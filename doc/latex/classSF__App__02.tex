\hypertarget{classSF__App__02}{
\section{SF\_\-App\_\-02 Class Reference}
\label{classSF__App__02}\index{SF\_\-App\_\-02@{SF\_\-App\_\-02}}
}
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classSF__App__02_a1609c01e73facfc2e0870dab45eddc4d}{\_\-\_\-construct} (\$oConfig)
\item 
\hyperlink{classSF__App__02_a421831a265621325e1fdd19aace0c758}{\_\-\_\-destruct} ()
\item 
\hyperlink{classSF__App__02_a9ad3d2905b2a50dfbee6d5f473e758a9}{\_\-\_\-set} (\$sProp, \$oValue)
\item 
\hyperlink{classSF__App__02_a9519b5bba407a1a89f324fcc7f26c0e2}{\_\-\_\-get} (\$sProp)
\item 
\hyperlink{classSF__App__02_ae1ecd9ab5b45268eb8405fcd83011fb0}{loadPage} (\$sPageName=\char`\"{}index.php\char`\"{})
\item 
\hyperlink{classSF__App__02_a1404a2a435e6df83c906a296e1c5461b}{preRender} (\$sPage=\char`\"{}index.php\char`\"{})
\item 
\hyperlink{classSF__App__02_a79f6c757cc35a847495f9254503dfa8f}{render} (\$sPage=\char`\"{}index.php\char`\"{}, \$iTitle=\char`\"{}1\char`\"{})
\item 
\hyperlink{classSF__App__02_a9dc5da61781d3ffe5bc80275a129d08a}{openDatabase} ()
\item 
\hyperlink{classSF__App__02_a18a992b92ee5ff3ad60ec30d8e0cba60}{validateUser} (\$bRequireFrame=true, \$bRequireAdd=true, \$bRequireLogin=false, \$bUsePrefs=true, \$bAddUser=true)
\item 
\hyperlink{classSF__App__02_a245ca49c58ae5e1c2efcdea0369d5b22}{getCurrentCommand} ()
\item 
\hyperlink{classSF__App__02_aac5925714018c3a661eba69a737d6597}{isPageCommand} (\$sCmd)
\item 
\hyperlink{classSF__App__02_a06cc1f1b035e423dce27f7db925a17c0}{trackPageView} (\$sPage)
\item 
\hyperlink{classSF__App__02_a6deb2041e7ee4cbb3511c0f5a7ea8a03}{inviteRedirect} ()
\item 
\hyperlink{classSF__App__02_a83d6db3f4e5f36ddd8adad2f53133e76}{redirect} (\$sUrl)
\item 
\hyperlink{classSF__App__02_acf7865241ab5ac45a0f04674efe51d1a}{getInviteeList} ()
\item 
\hyperlink{classSF__App__02_af12c69561c23be5e6fc7e4e0a2808fbb}{addAdVendor} (\$iAVC, \$sIds)
\item 
\hyperlink{classSF__App__02_a3978cc0d9152ece4cd315601a95a38bd}{setRefHandle} (\$sFBML)
\item 
\hyperlink{classSF__App__02_a99e97980251298d31efe3451470e8df5}{getAdCode} (\$iAVC=null, \$eType=SF\_\-AdType::Banner)
\end{DoxyCompactItemize}
\subsection*{Protected Member Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classSF__App__02_ad0a0692ff1a11536ebbcf3ec058b28ba}{initializeConfiguration} (\$oConfig)
\item 
\hyperlink{classSF__App__02_a074545d4bc47f611f84f1a7852801d57}{initializeSonetrix} ()
\item 
\hyperlink{classSF__App__02_a96b0f4bab679378904506e1a106c4e60}{initializePlatform} ()
\item 
\hyperlink{classSF__App__02_aa40909289ffd00ccc071d938f586fc47}{processQueryString} ()
\end{DoxyCompactItemize}
\subsection*{Protected Attributes}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classSF__App__02_a23d5b5190ee32c4eb8fff028844b1fa6}{\$m\_\-oPFAPI} = null
\item 
\hyperlink{classSF__App__02_a22d1091f94c58e3533304abe3eb9e9fe}{\$m\_\-oSntx} = null
\item 
\hyperlink{classSF__App__02_af0fd242fc474881efab473522eec0748}{\$m\_\-oDB} = null
\item 
\hyperlink{classSF__App__02_a480a834e33015cc9a001d1d84972bb12}{\$m\_\-oUserDB} = null
\item 
\hyperlink{classSF__App__02_a55534a049a693ced372dba4331e5e9bd}{\$m\_\-bEnableSonetrix} = true
\item 
\hyperlink{classSF__App__02_a21ffd6ebc459ccba9514cbaee05b2ece}{\$m\_\-sCmd} = 'show'
\item 
\hyperlink{classSF__App__02_a2db945fecc9d0f95e19093d7829be78d}{\$m\_\-sIPAddr} = null
\item 
\hyperlink{classSF__App__02_a251ed856d45aa28d717a012291b71d26}{\$m\_\-sReferrer} = null
\item 
\hyperlink{classSF__App__02_a03606a66e78d358c6094f05f0857845d}{\$m\_\-arBanner} = \hyperlink{list_8php_aa3205d038c7f8feb5c9f01ac4dfadc88}{array}()
\item 
\hyperlink{classSF__App__02_a78a5b97e38e7a2bc9e36cca0a97a2cca}{\$m\_\-eInvitePlacement} = SF\_\-InvitePlacement::AfterAdd
\item 
\hyperlink{classSF__App__02_a82cc1f3844569fa451cac5abc03b1a4d}{\$m\_\-sPageAction} = 'home'
\item 
\hyperlink{classSF__App__02_a980e6fd9e83172281b1e6dac50f16e9c}{\$m\_\-sPageSubAction} = ''
\item 
\hyperlink{classSF__App__02_a0af2b37a09c1015be10cfa60f3f1d1b9}{\$m\_\-oConfig} = null
\end{DoxyCompactItemize}


\subsection{Detailed Description}
The main \hyperlink{classSnowFrame}{SnowFrame} application class 

Definition at line 32 of file SF\_\-App\_\-02.php.



\subsection{Constructor \& Destructor Documentation}
\hypertarget{classSF__App__02_a1609c01e73facfc2e0870dab45eddc4d}{
\index{SF\_\-App\_\-02@{SF\_\-App\_\-02}!\_\-\_\-construct@{\_\-\_\-construct}}
\index{\_\-\_\-construct@{\_\-\_\-construct}!SF_App_02@{SF\_\-App\_\-02}}
\subsubsection[{\_\-\_\-construct}]{\setlength{\rightskip}{0pt plus 5cm}\_\-\_\-construct (
\begin{DoxyParamCaption}
\item[{\$}]{ oConfig}
\end{DoxyParamCaption}
)}}
\label{classSF__App__02_a1609c01e73facfc2e0870dab45eddc4d}
Constructor


\begin{DoxyParams}{Parameters}
\item[{\em \hyperlink{classSF__AppConfig}{SF\_\-AppConfig}}]\$oConfig \end{DoxyParams}


Definition at line 92 of file SF\_\-App\_\-02.php.




\begin{DoxyCode}
    {
        //  Get the config container loaded
        $this->initializeConfiguration( $oConfig );

        //  Construct a platform specific object
        $this->initializePlatform();

        //  Create a new Sonetrix object...
        $this->initializeSonetrix();

        //  Open database if method exists...
        if ( method_exists( $this, "dbConnect" ) )
            $this->dbConnect();

        //  Process the query string...
        $this->processQueryString();
    }
\end{DoxyCode}




Here is the call graph for this function:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=398pt]{classSF__App__02_a1609c01e73facfc2e0870dab45eddc4d_cgraph}
\end{center}
\end{figure}


\hypertarget{classSF__App__02_a421831a265621325e1fdd19aace0c758}{
\index{SF\_\-App\_\-02@{SF\_\-App\_\-02}!\_\-\_\-destruct@{\_\-\_\-destruct}}
\index{\_\-\_\-destruct@{\_\-\_\-destruct}!SF_App_02@{SF\_\-App\_\-02}}
\subsubsection[{\_\-\_\-destruct}]{\setlength{\rightskip}{0pt plus 5cm}\_\-\_\-destruct (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}}
\label{classSF__App__02_a421831a265621325e1fdd19aace0c758}
Destructor 

Definition at line 115 of file SF\_\-App\_\-02.php.




\begin{DoxyCode}
    {
        if ( $this->m_oDB )
            $this->m_oDB->closeDatabase();
    }
\end{DoxyCode}




\subsection{Member Function Documentation}
\hypertarget{classSF__App__02_a9519b5bba407a1a89f324fcc7f26c0e2}{
\index{SF\_\-App\_\-02@{SF\_\-App\_\-02}!\_\-\_\-get@{\_\-\_\-get}}
\index{\_\-\_\-get@{\_\-\_\-get}!SF_App_02@{SF\_\-App\_\-02}}
\subsubsection[{\_\-\_\-get}]{\setlength{\rightskip}{0pt plus 5cm}\_\-\_\-get (
\begin{DoxyParamCaption}
\item[{\$}]{ sProp}
\end{DoxyParamCaption}
)}}
\label{classSF__App__02_a9519b5bba407a1a89f324fcc7f26c0e2}
Public getter 

Definition at line 194 of file SF\_\-App\_\-02.php.




\begin{DoxyCode}
    {
        if ( property_exists( $oConfig, $sProp ) )
            return( eval( "$oConfig" . "->" . $sProp ) );

        switch ( $sProp )
        {
            case "Config":
                return( $this->m_oConfig );

            case "Command":
                return( $this->m_sCmd );

            case "Action":
                return( $this->m_sPageAction );

            case "SubAction":
                return( $this->m_sPageSubAction );
        }
    }
\end{DoxyCode}


\hypertarget{classSF__App__02_a9ad3d2905b2a50dfbee6d5f473e758a9}{
\index{SF\_\-App\_\-02@{SF\_\-App\_\-02}!\_\-\_\-set@{\_\-\_\-set}}
\index{\_\-\_\-set@{\_\-\_\-set}!SF_App_02@{SF\_\-App\_\-02}}
\subsubsection[{\_\-\_\-set}]{\setlength{\rightskip}{0pt plus 5cm}\_\-\_\-set (
\begin{DoxyParamCaption}
\item[{\$}]{ sProp, }
\item[{\$}]{ oValue}
\end{DoxyParamCaption}
)}}
\label{classSF__App__02_a9ad3d2905b2a50dfbee6d5f473e758a9}
Property setter 

Definition at line 177 of file SF\_\-App\_\-02.php.




\begin{DoxyCode}
    {
        switch ( $sProp )
        {
            case "SubAction":
                $this->m_sPageSubAction = $oValue;
                break;

            case "Action":
                $this->m_sPageAction = $oValue;
                break;
        }
    }
\end{DoxyCode}


\hypertarget{classSF__App__02_af12c69561c23be5e6fc7e4e0a2808fbb}{
\index{SF\_\-App\_\-02@{SF\_\-App\_\-02}!addAdVendor@{addAdVendor}}
\index{addAdVendor@{addAdVendor}!SF_App_02@{SF\_\-App\_\-02}}
\subsubsection[{addAdVendor}]{\setlength{\rightskip}{0pt plus 5cm}addAdVendor (
\begin{DoxyParamCaption}
\item[{\$}]{ iAVC, }
\item[{\$}]{ sIds}
\end{DoxyParamCaption}
)}}
\label{classSF__App__02_af12c69561c23be5e6fc7e4e0a2808fbb}


Definition at line 426 of file SF\_\-App\_\-02.php.




\begin{DoxyCode}
    {
        $this->m_arBanner[ $iAVC ] = new SF_BannerAd( $iAVC, explode(',',$sIds) )
      ;
    }
\end{DoxyCode}


\hypertarget{classSF__App__02_a99e97980251298d31efe3451470e8df5}{
\index{SF\_\-App\_\-02@{SF\_\-App\_\-02}!getAdCode@{getAdCode}}
\index{getAdCode@{getAdCode}!SF_App_02@{SF\_\-App\_\-02}}
\subsubsection[{getAdCode}]{\setlength{\rightskip}{0pt plus 5cm}getAdCode (
\begin{DoxyParamCaption}
\item[{\$}]{ iAVC = {\ttfamily null}, }
\item[{\$}]{ eType = {\ttfamily SF\_\-AdType::Banner}}
\end{DoxyParamCaption}
)}}
\label{classSF__App__02_a99e97980251298d31efe3451470e8df5}
Emit banner stuff


\begin{DoxyParams}{Parameters}
\item[{\em unknown\_\-type}]\$sKey \end{DoxyParams}


Definition at line 444 of file SF\_\-App\_\-02.php.




\begin{DoxyCode}
    {
        $sOut = "";

        if ( isset( $this->m_arBanner[ $iAVC ] ) )
            $sOut = $this->m_arBanner[ $iAVC ]->getAdCode( $this->m_oConfig->PFAP
      I->getPFType(), $eType );
        else
        {
            foreach ( $this->m_arBanner as $sKey => $oValue )
                $sOut = $oValue->getAdCode( $this->m_oConfig->PFAPI->getPFType(),
       $eType );
        }

        return( $sOut );
    }
\end{DoxyCode}


\hypertarget{classSF__App__02_a245ca49c58ae5e1c2efcdea0369d5b22}{
\index{SF\_\-App\_\-02@{SF\_\-App\_\-02}!getCurrentCommand@{getCurrentCommand}}
\index{getCurrentCommand@{getCurrentCommand}!SF_App_02@{SF\_\-App\_\-02}}
\subsubsection[{getCurrentCommand}]{\setlength{\rightskip}{0pt plus 5cm}getCurrentCommand (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}}
\label{classSF__App__02_a245ca49c58ae5e1c2efcdea0369d5b22}
Returns the current command

\begin{DoxyReturn}{Returns}
unknown 
\end{DoxyReturn}


Definition at line 360 of file SF\_\-App\_\-02.php.




\begin{DoxyCode}
    {
        return( $this->m_sCmd );
    }
\end{DoxyCode}


\hypertarget{classSF__App__02_acf7865241ab5ac45a0f04674efe51d1a}{
\index{SF\_\-App\_\-02@{SF\_\-App\_\-02}!getInviteeList@{getInviteeList}}
\index{getInviteeList@{getInviteeList}!SF_App_02@{SF\_\-App\_\-02}}
\subsubsection[{getInviteeList}]{\setlength{\rightskip}{0pt plus 5cm}getInviteeList (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}}
\label{classSF__App__02_acf7865241ab5ac45a0f04674efe51d1a}
Returns a comma separated list of invited people for exclusion...

\begin{DoxyReturn}{Returns}
unknown 
\end{DoxyReturn}


Definition at line 417 of file SF\_\-App\_\-02.php.




\begin{DoxyCode}
    {
        if ( $this->m_bEnableSonetrix && $this->m_oConfig )
            return( $this->m_oConfig->user_getInvitees( $this->PFUserId ) );
    }
\end{DoxyCode}


\hypertarget{classSF__App__02_ad0a0692ff1a11536ebbcf3ec058b28ba}{
\index{SF\_\-App\_\-02@{SF\_\-App\_\-02}!initializeConfiguration@{initializeConfiguration}}
\index{initializeConfiguration@{initializeConfiguration}!SF_App_02@{SF\_\-App\_\-02}}
\subsubsection[{initializeConfiguration}]{\setlength{\rightskip}{0pt plus 5cm}initializeConfiguration (
\begin{DoxyParamCaption}
\item[{\$}]{ oConfig}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily  \mbox{[}protected\mbox{]}}}}
\label{classSF__App__02_ad0a0692ff1a11536ebbcf3ec058b28ba}
Initialize the configuration container 

Definition at line 124 of file SF\_\-App\_\-02.php.




\begin{DoxyCode}
    {
        //  Get the config container loaded
        if ( $oConfig != null )
            $this->m_oConfig = $oConfig;
        else
            $this->m_oConfig = new SF_AppConfig();

        //  Populate container a bit...
        $this->m_oConfig->BaseUrl = $sBaseUrl;
        $this->m_oConfig->AppName = $sAppName;
        $this->m_oConfig->AppId = $sAppId;
        $this->m_oConfig->APIKey = $sAPIKey;
        $this->m_oConfig->APISecret = $sAPISecret;
        $this->m_oConfig->AppProfileId = $sProfileId;
        $this->m_oConfig->PTC = $iPTC;
    }
\end{DoxyCode}




Here is the caller graph for this function:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=308pt]{classSF__App__02_ad0a0692ff1a11536ebbcf3ec058b28ba_icgraph}
\end{center}
\end{figure}


\hypertarget{classSF__App__02_a96b0f4bab679378904506e1a106c4e60}{
\index{SF\_\-App\_\-02@{SF\_\-App\_\-02}!initializePlatform@{initializePlatform}}
\index{initializePlatform@{initializePlatform}!SF_App_02@{SF\_\-App\_\-02}}
\subsubsection[{initializePlatform}]{\setlength{\rightskip}{0pt plus 5cm}initializePlatform (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily  \mbox{[}protected\mbox{]}}}}
\label{classSF__App__02_a96b0f4bab679378904506e1a106c4e60}


Definition at line 154 of file SF\_\-App\_\-02.php.




\begin{DoxyCode}
    {
        switch ( $this->m_oConfig->PTC )
        {
            case SF_PlatformTypes::Friendster:
                break;

            case SF_PlatformTypes::MySpace:
                break;

            case SF_PlatformTypes::Facebook:
                $this->m_oConfig->PFAPI = new SF_Facebook( $sBaseUrl, $sAppName, 
      $sAppId, $sAPIKey, $sAPISecret );
                break;

            case SF_PlatformTypes::Bebo:
                $this->m_oConfig->PFAPI = new SF_Bebo( $sBaseUrl, $sAppName, $sAp
      pId, $sAPIKey, $sAPISecret, $sProfileId );
                break;
        }
    }
\end{DoxyCode}




Here is the caller graph for this function:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=284pt]{classSF__App__02_a96b0f4bab679378904506e1a106c4e60_icgraph}
\end{center}
\end{figure}


\hypertarget{classSF__App__02_a074545d4bc47f611f84f1a7852801d57}{
\index{SF\_\-App\_\-02@{SF\_\-App\_\-02}!initializeSonetrix@{initializeSonetrix}}
\index{initializeSonetrix@{initializeSonetrix}!SF_App_02@{SF\_\-App\_\-02}}
\subsubsection[{initializeSonetrix}]{\setlength{\rightskip}{0pt plus 5cm}initializeSonetrix (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily  \mbox{[}protected\mbox{]}}}}
\label{classSF__App__02_a074545d4bc47f611f84f1a7852801d57}
Initialize the Sonetrix object 

Definition at line 145 of file SF\_\-App\_\-02.php.




\begin{DoxyCode}
    {
        if ( $this->m_oConfig->EnableSonetrix )
            $this->m_oConfig->Sonetrix = new Sonetrix( $this->m_oConfig->AppId, $
      this->m_oConfig->PTC, null, null, ( $this->m_oConfig->PTC == SF_PlatformTypes::Fa
      cebook && $this->m_oConfig->PFAPI->PFAPI ? $this->m_oConfig->PFAPI->PFAPI : null 
      ), $sAppProfileId = $sProfileId );
    }
\end{DoxyCode}




Here is the caller graph for this function:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=284pt]{classSF__App__02_a074545d4bc47f611f84f1a7852801d57_icgraph}
\end{center}
\end{figure}


\hypertarget{classSF__App__02_a6deb2041e7ee4cbb3511c0f5a7ea8a03}{
\index{SF\_\-App\_\-02@{SF\_\-App\_\-02}!inviteRedirect@{inviteRedirect}}
\index{inviteRedirect@{inviteRedirect}!SF_App_02@{SF\_\-App\_\-02}}
\subsubsection[{inviteRedirect}]{\setlength{\rightskip}{0pt plus 5cm}inviteRedirect (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}}
\label{classSF__App__02_a6deb2041e7ee4cbb3511c0f5a7ea8a03}
Redirects to invite page if app was just installed... 

Definition at line 392 of file SF\_\-App\_\-02.php.




\begin{DoxyCode}
    {
        if ( $this->m_eInvitePlacement == SF_InvitePlacement::AfterAdd && isset( 
      $_REQUEST['installed'] ) && $_REQUEST['installed'] == '1' )
        {
            //  No user database? Ping sonetrix with addition
            if ( ! $this->UserDB && $this->m_oConfig )
                $this->m_oConfig->setHashUID( $this->m_oConfig->user_install( $th
      is->m_oConfig->PFAPI->PFUserId, $this->m_oConfig->PFAPI->getSessionKey() ) );

            $this->redirect( $this->m_oConfig->PFAPI->AppUrl . "invite.php" );
        }
    }
\end{DoxyCode}




Here is the call graph for this function:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=250pt]{classSF__App__02_a6deb2041e7ee4cbb3511c0f5a7ea8a03_cgraph}
\end{center}
\end{figure}




Here is the caller graph for this function:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=256pt]{classSF__App__02_a6deb2041e7ee4cbb3511c0f5a7ea8a03_icgraph}
\end{center}
\end{figure}


\hypertarget{classSF__App__02_aac5925714018c3a661eba69a737d6597}{
\index{SF\_\-App\_\-02@{SF\_\-App\_\-02}!isPageCommand@{isPageCommand}}
\index{isPageCommand@{isPageCommand}!SF_App_02@{SF\_\-App\_\-02}}
\subsubsection[{isPageCommand}]{\setlength{\rightskip}{0pt plus 5cm}isPageCommand (
\begin{DoxyParamCaption}
\item[{\$}]{ sCmd}
\end{DoxyParamCaption}
)}}
\label{classSF__App__02_aac5925714018c3a661eba69a737d6597}
Determines if a specific command was sent


\begin{DoxyParams}{Parameters}
\item[{\em unknown\_\-type}]\$sCmd \end{DoxyParams}
\begin{DoxyReturn}{Returns}
unknown 
\end{DoxyReturn}


Definition at line 371 of file SF\_\-App\_\-02.php.




\begin{DoxyCode}
    {
        return( strtolower( $this->m_sCmd ) == strtolower( $sCmd ) );
    }
\end{DoxyCode}


\hypertarget{classSF__App__02_ae1ecd9ab5b45268eb8405fcd83011fb0}{
\index{SF\_\-App\_\-02@{SF\_\-App\_\-02}!loadPage@{loadPage}}
\index{loadPage@{loadPage}!SF_App_02@{SF\_\-App\_\-02}}
\subsubsection[{loadPage}]{\setlength{\rightskip}{0pt plus 5cm}loadPage (
\begin{DoxyParamCaption}
\item[{\$}]{ sPageName = {\ttfamily \char`\"{}index.php\char`\"{}}}
\end{DoxyParamCaption}
)}}
\label{classSF__App__02_ae1ecd9ab5b45268eb8405fcd83011fb0}
Loads the page data


\begin{DoxyParams}{Parameters}
\item[{\em unknown\_\-type}]\$sPageName \end{DoxyParams}


Definition at line 220 of file SF\_\-App\_\-02.php.




\begin{DoxyCode}
    {
        //  Validate the user...
        $this->validateUser();

        //  First time? Go to invite page...
        if ( $sPageName == "index.php" )
        {
            $this->inviteRedirect();
        }
    }
\end{DoxyCode}




Here is the call graph for this function:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=346pt]{classSF__App__02_ae1ecd9ab5b45268eb8405fcd83011fb0_cgraph}
\end{center}
\end{figure}


\hypertarget{classSF__App__02_a9dc5da61781d3ffe5bc80275a129d08a}{
\index{SF\_\-App\_\-02@{SF\_\-App\_\-02}!openDatabase@{openDatabase}}
\index{openDatabase@{openDatabase}!SF_App_02@{SF\_\-App\_\-02}}
\subsubsection[{openDatabase}]{\setlength{\rightskip}{0pt plus 5cm}openDatabase (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}}
\label{classSF__App__02_a9dc5da61781d3ffe5bc80275a129d08a}
Creates a database object and opens a connection.


\begin{DoxyParams}{Parameters}
\item[{\em unknown\_\-type}]\$sDBHost \item[{\em unknown\_\-type}]\$sDBUser \item[{\em unknown\_\-type}]\$sDBPass \item[{\em unknown\_\-type}]\$sDBName \end{DoxyParams}


Definition at line 266 of file SF\_\-App\_\-02.php.




\begin{DoxyCode}
    {
        $this->m_oConfig->UserDB = null;
        $this->m_oConfig->DB = new SF_Database( $sDBHost, $sDBUser, $sDBPass, $sD
      BName, true );

        if ( $this->m_oConfig->UserDBClassName != null )
        {
            try
            {
                require_once( $this->m_oConfig->UserDBClassName . ".php" );
                $this->m_oConfig->UserDB = new $sUserDBClassName( $this->m_oConfi
      g->DB, $this->m_oConfig->AppId, $this->m_oConfig->PTC, $this->m_oConfig->Sonetrix
      , $this->m_oConfig->PFAPI );
            }
            catch ( Exception $_ex )
            {
                //  No user database available...
            }
        }
    }
\end{DoxyCode}


\hypertarget{classSF__App__02_a1404a2a435e6df83c906a296e1c5461b}{
\index{SF\_\-App\_\-02@{SF\_\-App\_\-02}!preRender@{preRender}}
\index{preRender@{preRender}!SF_App_02@{SF\_\-App\_\-02}}
\subsubsection[{preRender}]{\setlength{\rightskip}{0pt plus 5cm}preRender (
\begin{DoxyParamCaption}
\item[{\$}]{ sPage = {\ttfamily \char`\"{}index.php\char`\"{}}}
\end{DoxyParamCaption}
)}}
\label{classSF__App__02_a1404a2a435e6df83c906a296e1c5461b}
Before rendering 

Definition at line 236 of file SF\_\-App\_\-02.php.




\begin{DoxyCode}
    {
        //  Track the hit...
        $this->trackPageView( $sPage );

        if ( $this->m_oConfig->Sonetrix )
            echo "<!-- huid " . $this->m_oConfig->Sonetrix->getHashUID() . " -->"
      ;
    }
\end{DoxyCode}




Here is the call graph for this function:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=268pt]{classSF__App__02_a1404a2a435e6df83c906a296e1c5461b_cgraph}
\end{center}
\end{figure}




Here is the caller graph for this function:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=230pt]{classSF__App__02_a1404a2a435e6df83c906a296e1c5461b_icgraph}
\end{center}
\end{figure}


\hypertarget{classSF__App__02_aa40909289ffd00ccc071d938f586fc47}{
\index{SF\_\-App\_\-02@{SF\_\-App\_\-02}!processQueryString@{processQueryString}}
\index{processQueryString@{processQueryString}!SF_App_02@{SF\_\-App\_\-02}}
\subsubsection[{processQueryString}]{\setlength{\rightskip}{0pt plus 5cm}processQueryString (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily  \mbox{[}protected\mbox{]}}}}
\label{classSF__App__02_aa40909289ffd00ccc071d938f586fc47}
Generic query string processing for the application. 

Definition at line 302 of file SF\_\-App\_\-02.php.




\begin{DoxyCode}
    {
        if ( isset( $_SERVER['HTTP_REFERER'] ) )
            $this->m_sReferrer = $_SERVER['HTTP_REFERER'];

        //  Default values...
        $this->m_sIPAddr = $_SERVER['REMOTE_ADDR'];

        //  What's this page's command?
        if ( isset( $_REQUEST["c"] ) )
        {
            $this->m_sCmd = $_REQUEST[ 'c' ];

            //  Deal with screwy facebook bug where they don't parse url properly
      
            if ( substr( $this->m_sCmd, 0, 7 ) == 'addhttp' )
            {
                $_sUrl = substr( $this->m_sCmd, 3 );
                error_log( "Screwy URL redirect [{$_sUrl} -->> {" . $this->PFAPI-
      >AppUrl . '?c=add&auth_token=' . $_REQUEST['auth_token'] . '&installed=1' . "]", 
      0 );
                $this->redirect( $this->PFAPI->AppUrl . '?c=add&auth_token=' . $_
      REQUEST['auth_token'] . '&installed=1' );
            }
        }

        //  Handle app removal here...
        if ( $this->m_sCmd == "del" && $this->m_oConfig->UserDB != null )
        {
            //  If user is in database, remove him/her
            if ( $this->UserDB->userIsInDB( $this->PFUserId ) )
                $this->UserDB->removeApp( $this->PFUserId );

            //  Now bail...
            exit;
        }

        //  Any page actions?
        if ( isset( $_REQUEST[ 'action' ] ) )
            $this->m_sPageAction = $_REQUEST[ 'action' ];

        //  Any page sub-actions?
        if ( isset( $_REQUEST[ 'sa' ] ) )
            $this->m_sPageSubAction = $_REQUEST[ 'sa' ];

        //  Let the platform take a look at the query string...
        if ( $this->m_oConfig->PFAPI && method_exists( $this->m_oConfig->PFAPI, "
      processQueryString" ) )
            $this->m_oConfig->PFAPI->processQueryString();

        //  Let sonetrix have a look at the query string...
        if ( $this->m_bEnableSonetrix && $this->m_oConfig && $this->m_oConfig->PF
      API && method_exists( $this->m_oConfig, "processQueryString" ) )
            $this->m_oConfig->processQueryString( $this->m_oConfig->PFAPI->PFUser
      Id );

        //  Return page command...
        return( $this->m_sCmd );
    }
\end{DoxyCode}




Here is the call graph for this function:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=282pt]{classSF__App__02_aa40909289ffd00ccc071d938f586fc47_cgraph}
\end{center}
\end{figure}




Here is the caller graph for this function:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=300pt]{classSF__App__02_aa40909289ffd00ccc071d938f586fc47_icgraph}
\end{center}
\end{figure}


\hypertarget{classSF__App__02_a83d6db3f4e5f36ddd8adad2f53133e76}{
\index{SF\_\-App\_\-02@{SF\_\-App\_\-02}!redirect@{redirect}}
\index{redirect@{redirect}!SF_App_02@{SF\_\-App\_\-02}}
\subsubsection[{redirect}]{\setlength{\rightskip}{0pt plus 5cm}redirect (
\begin{DoxyParamCaption}
\item[{\$}]{ sUrl}
\end{DoxyParamCaption}
)}}
\label{classSF__App__02_a83d6db3f4e5f36ddd8adad2f53133e76}


Definition at line 407 of file SF\_\-App\_\-02.php.




\begin{DoxyCode}
    {
        $this->m_oConfig->PFAPI->redirect( $sUrl );
    }
\end{DoxyCode}




Here is the caller graph for this function:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=390pt]{classSF__App__02_a83d6db3f4e5f36ddd8adad2f53133e76_icgraph}
\end{center}
\end{figure}


\hypertarget{classSF__App__02_a79f6c757cc35a847495f9254503dfa8f}{
\index{SF\_\-App\_\-02@{SF\_\-App\_\-02}!render@{render}}
\index{render@{render}!SF_App_02@{SF\_\-App\_\-02}}
\subsubsection[{render}]{\setlength{\rightskip}{0pt plus 5cm}render (
\begin{DoxyParamCaption}
\item[{\$}]{ sPage = {\ttfamily \char`\"{}index.php\char`\"{}}, }
\item[{\$}]{ iTitle = {\ttfamily \char`\"{}1\char`\"{}}}
\end{DoxyParamCaption}
)}}
\label{classSF__App__02_a79f6c757cc35a847495f9254503dfa8f}
Renders quiz to the page... 

Definition at line 249 of file SF\_\-App\_\-02.php.




\begin{DoxyCode}
    {
        $this->preRender( $sPage );

        //  Spit out GA code...
        if ( null != $this->m_oConfig->PFAPI && method_exists( $this->m_oConfig->
      PFAPI, "render" ) )
            $this->m_oConfig->render( $sPage, $iTitle );
    }
\end{DoxyCode}




Here is the call graph for this function:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=352pt]{classSF__App__02_a79f6c757cc35a847495f9254503dfa8f_cgraph}
\end{center}
\end{figure}


\hypertarget{classSF__App__02_a3978cc0d9152ece4cd315601a95a38bd}{
\index{SF\_\-App\_\-02@{SF\_\-App\_\-02}!setRefHandle@{setRefHandle}}
\index{setRefHandle@{setRefHandle}!SF_App_02@{SF\_\-App\_\-02}}
\subsubsection[{setRefHandle}]{\setlength{\rightskip}{0pt plus 5cm}setRefHandle (
\begin{DoxyParamCaption}
\item[{\$}]{ sFBML}
\end{DoxyParamCaption}
)}}
\label{classSF__App__02_a3978cc0d9152ece4cd315601a95a38bd}


Definition at line 434 of file SF\_\-App\_\-02.php.




\begin{DoxyCode}
    {
        $this->m_oConfig->PFAPI->setRefHandle( $sFBML );
    }
\end{DoxyCode}


\hypertarget{classSF__App__02_a06cc1f1b035e423dce27f7db925a17c0}{
\index{SF\_\-App\_\-02@{SF\_\-App\_\-02}!trackPageView@{trackPageView}}
\index{trackPageView@{trackPageView}!SF_App_02@{SF\_\-App\_\-02}}
\subsubsection[{trackPageView}]{\setlength{\rightskip}{0pt plus 5cm}trackPageView (
\begin{DoxyParamCaption}
\item[{\$}]{ sPage}
\end{DoxyParamCaption}
)}}
\label{classSF__App__02_a06cc1f1b035e423dce27f7db925a17c0}
Tracks a page hit...


\begin{DoxyParams}{Parameters}
\item[{\em unknown\_\-type}]\$sPage \item[{\em unknown\_\-type}]\$sPage \end{DoxyParams}


Definition at line 382 of file SF\_\-App\_\-02.php.




\begin{DoxyCode}
    {
        if ( $this->m_bEnableSonetrix && $this->m_oConfig )
            $this->m_oConfig->user_pageView( $this->PFUserId, $sPage );
    }
\end{DoxyCode}




Here is the caller graph for this function:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=352pt]{classSF__App__02_a06cc1f1b035e423dce27f7db925a17c0_icgraph}
\end{center}
\end{figure}


\hypertarget{classSF__App__02_a18a992b92ee5ff3ad60ec30d8e0cba60}{
\index{SF\_\-App\_\-02@{SF\_\-App\_\-02}!validateUser@{validateUser}}
\index{validateUser@{validateUser}!SF_App_02@{SF\_\-App\_\-02}}
\subsubsection[{validateUser}]{\setlength{\rightskip}{0pt plus 5cm}validateUser (
\begin{DoxyParamCaption}
\item[{\$}]{ bRequireFrame = {\ttfamily true}, }
\item[{\$}]{ bRequireAdd = {\ttfamily true}, }
\item[{\$}]{ bRequireLogin = {\ttfamily false}, }
\item[{\$}]{ bUsePrefs = {\ttfamily true}, }
\item[{\$}]{ bAddUser = {\ttfamily true}}
\end{DoxyParamCaption}
)}}
\label{classSF__App__02_a18a992b92ee5ff3ad60ec30d8e0cba60}


Definition at line 288 of file SF\_\-App\_\-02.php.




\begin{DoxyCode}
    {
        if ( $this->PFAPI )
            $this->m_oConfig->PFAPI->validateUser( $bRequireFrame, $bRequireAdd, 
      $bRequireLogin, $bUsePrefs, $bAddUser );

        //  Let the user database have a look
        if ( $this->UserDB && method_exists( $this->UserDB, "processQueryString" 
      ) )
            $this->m_oConfig->UserDB->processQueryString( $this->m_oConfig->PFUse
      rId );
    }
\end{DoxyCode}




Here is the caller graph for this function:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=254pt]{classSF__App__02_a18a992b92ee5ff3ad60ec30d8e0cba60_icgraph}
\end{center}
\end{figure}




\subsection{Field Documentation}
\hypertarget{classSF__App__02_a03606a66e78d358c6094f05f0857845d}{
\index{SF\_\-App\_\-02@{SF\_\-App\_\-02}!\$m\_\-arBanner@{\$m\_\-arBanner}}
\index{\$m\_\-arBanner@{\$m\_\-arBanner}!SF_App_02@{SF\_\-App\_\-02}}
\subsubsection[{\$m\_\-arBanner}]{\setlength{\rightskip}{0pt plus 5cm}\$m\_\-arBanner = {\bf array}()\hspace{0.3cm}{\ttfamily  \mbox{[}protected\mbox{]}}}}
\label{classSF__App__02_a03606a66e78d358c6094f05f0857845d}


Definition at line 69 of file SF\_\-App\_\-02.php.

\hypertarget{classSF__App__02_a55534a049a693ced372dba4331e5e9bd}{
\index{SF\_\-App\_\-02@{SF\_\-App\_\-02}!\$m\_\-bEnableSonetrix@{\$m\_\-bEnableSonetrix}}
\index{\$m\_\-bEnableSonetrix@{\$m\_\-bEnableSonetrix}!SF_App_02@{SF\_\-App\_\-02}}
\subsubsection[{\$m\_\-bEnableSonetrix}]{\setlength{\rightskip}{0pt plus 5cm}\$m\_\-bEnableSonetrix = true\hspace{0.3cm}{\ttfamily  \mbox{[}protected\mbox{]}}}}
\label{classSF__App__02_a55534a049a693ced372dba4331e5e9bd}
Enable/disable Sonetrix integration 

Definition at line 53 of file SF\_\-App\_\-02.php.

\hypertarget{classSF__App__02_a78a5b97e38e7a2bc9e36cca0a97a2cca}{
\index{SF\_\-App\_\-02@{SF\_\-App\_\-02}!\$m\_\-eInvitePlacement@{\$m\_\-eInvitePlacement}}
\index{\$m\_\-eInvitePlacement@{\$m\_\-eInvitePlacement}!SF_App_02@{SF\_\-App\_\-02}}
\subsubsection[{\$m\_\-eInvitePlacement}]{\setlength{\rightskip}{0pt plus 5cm}\$m\_\-eInvitePlacement = SF\_\-InvitePlacement::AfterAdd\hspace{0.3cm}{\ttfamily  \mbox{[}protected\mbox{]}}}}
\label{classSF__App__02_a78a5b97e38e7a2bc9e36cca0a97a2cca}
Invitation placement 

Definition at line 73 of file SF\_\-App\_\-02.php.

\hypertarget{classSF__App__02_a0af2b37a09c1015be10cfa60f3f1d1b9}{
\index{SF\_\-App\_\-02@{SF\_\-App\_\-02}!\$m\_\-oConfig@{\$m\_\-oConfig}}
\index{\$m\_\-oConfig@{\$m\_\-oConfig}!SF_App_02@{SF\_\-App\_\-02}}
\subsubsection[{\$m\_\-oConfig}]{\setlength{\rightskip}{0pt plus 5cm}\$m\_\-oConfig = null\hspace{0.3cm}{\ttfamily  \mbox{[}protected\mbox{]}}}}
\label{classSF__App__02_a0af2b37a09c1015be10cfa60f3f1d1b9}
The application configuration container 

Definition at line 85 of file SF\_\-App\_\-02.php.

\hypertarget{classSF__App__02_af0fd242fc474881efab473522eec0748}{
\index{SF\_\-App\_\-02@{SF\_\-App\_\-02}!\$m\_\-oDB@{\$m\_\-oDB}}
\index{\$m\_\-oDB@{\$m\_\-oDB}!SF_App_02@{SF\_\-App\_\-02}}
\subsubsection[{\$m\_\-oDB}]{\setlength{\rightskip}{0pt plus 5cm}\$m\_\-oDB = null\hspace{0.3cm}{\ttfamily  \mbox{[}protected\mbox{]}}}}
\label{classSF__App__02_af0fd242fc474881efab473522eec0748}
Database API object 

Definition at line 45 of file SF\_\-App\_\-02.php.

\hypertarget{classSF__App__02_a23d5b5190ee32c4eb8fff028844b1fa6}{
\index{SF\_\-App\_\-02@{SF\_\-App\_\-02}!\$m\_\-oPFAPI@{\$m\_\-oPFAPI}}
\index{\$m\_\-oPFAPI@{\$m\_\-oPFAPI}!SF_App_02@{SF\_\-App\_\-02}}
\subsubsection[{\$m\_\-oPFAPI}]{\setlength{\rightskip}{0pt plus 5cm}\$m\_\-oPFAPI = null\hspace{0.3cm}{\ttfamily  \mbox{[}protected\mbox{]}}}}
\label{classSF__App__02_a23d5b5190ee32c4eb8fff028844b1fa6}
Platform API object 

Definition at line 37 of file SF\_\-App\_\-02.php.

\hypertarget{classSF__App__02_a22d1091f94c58e3533304abe3eb9e9fe}{
\index{SF\_\-App\_\-02@{SF\_\-App\_\-02}!\$m\_\-oSntx@{\$m\_\-oSntx}}
\index{\$m\_\-oSntx@{\$m\_\-oSntx}!SF_App_02@{SF\_\-App\_\-02}}
\subsubsection[{\$m\_\-oSntx}]{\setlength{\rightskip}{0pt plus 5cm}\$m\_\-oSntx = null\hspace{0.3cm}{\ttfamily  \mbox{[}protected\mbox{]}}}}
\label{classSF__App__02_a22d1091f94c58e3533304abe3eb9e9fe}
Sonetrix API object 

Definition at line 41 of file SF\_\-App\_\-02.php.

\hypertarget{classSF__App__02_a480a834e33015cc9a001d1d84972bb12}{
\index{SF\_\-App\_\-02@{SF\_\-App\_\-02}!\$m\_\-oUserDB@{\$m\_\-oUserDB}}
\index{\$m\_\-oUserDB@{\$m\_\-oUserDB}!SF_App_02@{SF\_\-App\_\-02}}
\subsubsection[{\$m\_\-oUserDB}]{\setlength{\rightskip}{0pt plus 5cm}\$m\_\-oUserDB = null\hspace{0.3cm}{\ttfamily  \mbox{[}protected\mbox{]}}}}
\label{classSF__App__02_a480a834e33015cc9a001d1d84972bb12}
User database object 

Definition at line 49 of file SF\_\-App\_\-02.php.

\hypertarget{classSF__App__02_a21ffd6ebc459ccba9514cbaee05b2ece}{
\index{SF\_\-App\_\-02@{SF\_\-App\_\-02}!\$m\_\-sCmd@{\$m\_\-sCmd}}
\index{\$m\_\-sCmd@{\$m\_\-sCmd}!SF_App_02@{SF\_\-App\_\-02}}
\subsubsection[{\$m\_\-sCmd}]{\setlength{\rightskip}{0pt plus 5cm}\$m\_\-sCmd = 'show'\hspace{0.3cm}{\ttfamily  \mbox{[}protected\mbox{]}}}}
\label{classSF__App__02_a21ffd6ebc459ccba9514cbaee05b2ece}
The last command sent to the app 

Definition at line 57 of file SF\_\-App\_\-02.php.

\hypertarget{classSF__App__02_a2db945fecc9d0f95e19093d7829be78d}{
\index{SF\_\-App\_\-02@{SF\_\-App\_\-02}!\$m\_\-sIPAddr@{\$m\_\-sIPAddr}}
\index{\$m\_\-sIPAddr@{\$m\_\-sIPAddr}!SF_App_02@{SF\_\-App\_\-02}}
\subsubsection[{\$m\_\-sIPAddr}]{\setlength{\rightskip}{0pt plus 5cm}\$m\_\-sIPAddr = null\hspace{0.3cm}{\ttfamily  \mbox{[}protected\mbox{]}}}}
\label{classSF__App__02_a2db945fecc9d0f95e19093d7829be78d}


Definition at line 61 of file SF\_\-App\_\-02.php.

\hypertarget{classSF__App__02_a82cc1f3844569fa451cac5abc03b1a4d}{
\index{SF\_\-App\_\-02@{SF\_\-App\_\-02}!\$m\_\-sPageAction@{\$m\_\-sPageAction}}
\index{\$m\_\-sPageAction@{\$m\_\-sPageAction}!SF_App_02@{SF\_\-App\_\-02}}
\subsubsection[{\$m\_\-sPageAction}]{\setlength{\rightskip}{0pt plus 5cm}\$m\_\-sPageAction = 'home'\hspace{0.3cm}{\ttfamily  \mbox{[}protected\mbox{]}}}}
\label{classSF__App__02_a82cc1f3844569fa451cac5abc03b1a4d}
The current page action 

Definition at line 77 of file SF\_\-App\_\-02.php.

\hypertarget{classSF__App__02_a980e6fd9e83172281b1e6dac50f16e9c}{
\index{SF\_\-App\_\-02@{SF\_\-App\_\-02}!\$m\_\-sPageSubAction@{\$m\_\-sPageSubAction}}
\index{\$m\_\-sPageSubAction@{\$m\_\-sPageSubAction}!SF_App_02@{SF\_\-App\_\-02}}
\subsubsection[{\$m\_\-sPageSubAction}]{\setlength{\rightskip}{0pt plus 5cm}\$m\_\-sPageSubAction = ''\hspace{0.3cm}{\ttfamily  \mbox{[}protected\mbox{]}}}}
\label{classSF__App__02_a980e6fd9e83172281b1e6dac50f16e9c}


Definition at line 81 of file SF\_\-App\_\-02.php.

\hypertarget{classSF__App__02_a251ed856d45aa28d717a012291b71d26}{
\index{SF\_\-App\_\-02@{SF\_\-App\_\-02}!\$m\_\-sReferrer@{\$m\_\-sReferrer}}
\index{\$m\_\-sReferrer@{\$m\_\-sReferrer}!SF_App_02@{SF\_\-App\_\-02}}
\subsubsection[{\$m\_\-sReferrer}]{\setlength{\rightskip}{0pt plus 5cm}\$m\_\-sReferrer = null\hspace{0.3cm}{\ttfamily  \mbox{[}protected\mbox{]}}}}
\label{classSF__App__02_a251ed856d45aa28d717a012291b71d26}


Definition at line 65 of file SF\_\-App\_\-02.php.



The documentation for this class was generated from the following file:\begin{DoxyCompactItemize}
\item 
/usr/local/yiixl/lib/original/components/snowframe/base/\hyperlink{SF__App__02_8php}{SF\_\-App\_\-02.php}\end{DoxyCompactItemize}
