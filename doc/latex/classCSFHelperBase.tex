\hypertarget{classCSFHelperBase}{
\section{CSFHelperBase Class Reference}
\label{classCSFHelperBase}\index{CSFHelperBase@{CSFHelperBase}}
}


Inheritance diagram for CSFHelperBase:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=172pt]{classCSFHelperBase__inherit__graph}
\end{center}
\end{figure}


Collaboration diagram for CSFHelperBase:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=172pt]{classCSFHelperBase__coll__graph}
\end{center}
\end{figure}
\subsection*{Static Public Member Functions}
\begin{DoxyCompactItemize}
\item 
static \hyperlink{classCSFHelperBase_abb5e3b20530f28ae782f03229e94ad36}{array\_\-to\_\-string} (\$\hyperlink{list_8php_aa3205d038c7f8feb5c9f01ac4dfadc88}{array})
\item 
static \hyperlink{classCSFHelperBase_a711114d7dbe0c5570cbe3dfbec4181ce}{string\_\-to\_\-array} (\$string)
\item 
static \hyperlink{classCSFHelperBase_a3afb921a061161738de5e471984e1fcf}{getRequest} (\$sUrl, \$sQueryString=\char`\"{}\char`\"{}, \$sUserAgent=\char`\"{}SnowFrame Object Framework PHP5 Client 1.00a (pogostick.com)\char`\"{})
\item 
static \hyperlink{classCSFHelperBase_ab6d665a16096c6c1ab8ae2ef8214a847}{trimLines} (\$string)
\item 
static \hyperlink{classCSFHelperBase_aef2d4e1f18258000c870a620e0b2f5ca}{suckTag} (\$sData, \$sTag, \$sTagEnd, \$iStart=0, \$sNear=null)
\item 
static \hyperlink{classCSFHelperBase_a7e9d6928d3527eba3e8eecabb20cce0f}{getPagerString} (\$iPage=1, \$iLimit=15, \$iTotal=0, \$sId, \$sForm, \$sUrl= '/', \$sQueryParam= 'p')
\item 
static \hyperlink{classCSFHelperBase_a384e6feb3f0a9de4e64918ad50329a97}{isValidEmail} (\$sEmail=null)
\item 
static \hyperlink{classCSFHelperBase_ae9d18bd127af37c39b484e55f9b95493}{dbCleanString} (\$sSource, \$bReturnNULL=true)
\end{DoxyCompactItemize}


\subsection{Detailed Description}


Definition at line 23 of file CSFHelperBase.php.



\subsection{Member Function Documentation}
\hypertarget{classCSFHelperBase_abb5e3b20530f28ae782f03229e94ad36}{
\index{CSFHelperBase@{CSFHelperBase}!array\_\-to\_\-string@{array\_\-to\_\-string}}
\index{array\_\-to\_\-string@{array\_\-to\_\-string}!CSFHelperBase@{CSFHelperBase}}
\subsubsection[{array\_\-to\_\-string}]{\setlength{\rightskip}{0pt plus 5cm}static array\_\-to\_\-string (
\begin{DoxyParamCaption}
\item[{\$}]{ array}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily  \mbox{[}static\mbox{]}}}}
\label{classCSFHelperBase_abb5e3b20530f28ae782f03229e94ad36}
Converts an array to a string that is safe to pass via a URL


\begin{DoxyParams}{Parameters}
\item[{\em array}]\$array \end{DoxyParams}
\begin{DoxyReturn}{Returns}
string 
\end{DoxyReturn}


Definition at line 31 of file CSFHelperBase.php.




\begin{DoxyCode}
    {
        $retval = '';
        $null_value = "^^^";

       if ( $array != null && is_array( $array ) )
       {
            foreach ( $array as $index => $val )
            {
                if ( gettype( $val ) == 'array' )
                    $value = '^^array^' . SF_Helpers::array_to_string( $val );
                else
                    $value = $val;

                if ( !$value )
                    $value = $null_value;

               $retval .= urlencode( base64_encode( $index ) ) . '|' . urlencode(
       base64_encode( $value ) ) . '||';
           }
       }

       return( urlencode( substr( $retval, 0, -2 ) ) );
    }
\end{DoxyCode}


\hypertarget{classCSFHelperBase_ae9d18bd127af37c39b484e55f9b95493}{
\index{CSFHelperBase@{CSFHelperBase}!dbCleanString@{dbCleanString}}
\index{dbCleanString@{dbCleanString}!CSFHelperBase@{CSFHelperBase}}
\subsubsection[{dbCleanString}]{\setlength{\rightskip}{0pt plus 5cm}static dbCleanString (
\begin{DoxyParamCaption}
\item[{\$}]{ sSource, }
\item[{\$}]{ bReturnNULL = {\ttfamily true}}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily  \mbox{[}static\mbox{]}}}}
\label{classCSFHelperBase_ae9d18bd127af37c39b484e55f9b95493}
Get a string for db updates 

Definition at line 294 of file CSFHelperBase.php.




\begin{DoxyCode}
    {
        if ( $sSource == null && $bReturnNULL )
            return( "null" );

        return( "'" . mysql_real_escape_string( $sSource ) . "'" );
    }
\end{DoxyCode}


\hypertarget{classCSFHelperBase_a7e9d6928d3527eba3e8eecabb20cce0f}{
\index{CSFHelperBase@{CSFHelperBase}!getPagerString@{getPagerString}}
\index{getPagerString@{getPagerString}!CSFHelperBase@{CSFHelperBase}}
\subsubsection[{getPagerString}]{\setlength{\rightskip}{0pt plus 5cm}static getPagerString (
\begin{DoxyParamCaption}
\item[{\$}]{ iPage = {\ttfamily 1}, }
\item[{\$}]{ iLimit = {\ttfamily 15}, }
\item[{\$}]{ iTotal = {\ttfamily 0}, }
\item[{\$}]{ sId, }
\item[{\$}]{ sForm, }
\item[{\$}]{ sUrl = {\ttfamily '/'}, }
\item[{\$}]{ sQueryParam = {\ttfamily 'p'}}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily  \mbox{[}static\mbox{]}}}}
\label{classCSFHelperBase_a7e9d6928d3527eba3e8eecabb20cce0f}
Produces a pager string for paging data


\begin{DoxyParams}{Parameters}
\item[{\em mixed}]\$iPage \item[{\em mixed}]\$iLimit \item[{\em mixed}]\$iTotal \item[{\em mixed}]\$sId \item[{\em mixed}]\$sForm \item[{\em mixed}]\$sUrl \item[{\em mixed}]\$sQueryParam \end{DoxyParams}


Definition at line 216 of file CSFHelperBase.php.




\begin{DoxyCode}
    {
        $iPrev = $iPage - 1;
        $iNext = $iPage + 1;
        $iFirst = 1;
        $iLast = ceil( $iTotal / $iLimit);
        $iFirstItem = ( $iLimit * $iPage ) - $iLimit + 1;
        $iLastItem = min( $iLimit * $iPage, $iTotal );
        $sOut = '';

        $sOut .= "<li><div style=\"display:none\" id=\"{$sId}_spinner\"><img vspa
      ce=\"2\" hspace=\"2\" src=\"http://www.appbarn.com/lib/images/spin20.gif\" border
      =\"0\" alt=\"\" /></div></li>";

        if ( $iLast > 1 )
        {
            $sOut .= '';

            if ( $iPage > 2 ) $sOut .= "<li><a clicktoshow=\"{$sId}_spinner\" cli
      ckrewriteid=\"{$sId}\" clickrewriteform=\"{$sForm}\" clickrewriteurl=\"$sUrl&{$sQ
      ueryParam}=$iFirst\" href=\"#\">First</a></li>";
            if ( $iPage > 1 ) $sOut .= "<li><a clicktoshow=\"{$sId}_spinner\" cli
      ckrewriteid=\"{$sId}\" clickrewriteform=\"{$sForm}\" clickrewriteurl=\"$sUrl&{$sQ
      ueryParam}=$iPrev\" href=\"#\">Prev</a></li>";

            if ( $iPage < 4 )
            {
                for ( $iCount = 1; $iCount <= min( 5, $iLast ); $iCount++ )
                {
                    if ( $iCount == $iPage )
                        $sOut .= "<li class=\"current\"><a clicktoshow=\"{$sId}_s
      pinner\" clickrewriteid=\"{$sId}\" clickrewriteform=\"{$sForm}\" clickrewriteurl=
      \"$sUrl&{$sQueryParam}=$iCount\" href=\"#\">$iCount</a></li>";
                    else
                        $sOut .= "<li><a clicktoshow=\"{$sId}_spinner\" clickrewr
      iteid=\"{$sId}\" clickrewriteform=\"{$sForm}\" clickrewriteurl=\"$sUrl&{$sQueryPa
      ram}=$iCount\" href=\"#\">$iCount</a></li>";
                }
            }
            elseif ($iPage > $iLast - 3)
            {
                for ( $iCount = $iLast - min(5, $iLast); $iCount <= $iLast; $iCou
      nt++ )
                {
                    if ($iCount == $iPage)
                        $sOut .= "<li class=\"current\"><a clicktoshow=\"{$sId}_s
      pinner\" clickrewriteid=\"{$sId}\" clickrewriteform=\"{$sForm}\" clickrewriteurl=
      \"$sUrl&{$sQueryParam}=$iCount\" href=\"#\">$iCount</a></li>";
                    else
                        $sOut .= "<li><a clicktoshow=\"{$sId}_spinner\" clickrewr
      iteid=\"{$sId}\" clickrewriteform=\"{$sForm}\" clickrewriteurl=\"$sUrl&{$sQueryPa
      ram}=$iCount\" href=\"#\">$iCount</a></li>";
                }
            }
            else
            {
                for($iCount = $iPage - 2; $iCount <= $iPage + 2; $iCount++)
                {
                    if ($iCount == $iPage)
                        $sOut .= "<li class=\"current\"><a clicktoshow=\"{$sId}_s
      pinner\" clickrewriteid=\"{$sId}\" clickrewriteform=\"{$sForm}\" clickrewriteurl=
      \"$sUrl&{$sQueryParam}=$iCount\" href=\"#\">$iCount</a></li>";
                    else
                        $sOut .= "<li><a clicktoshow=\"{$sId}_spinner\" clickrewr
      iteid=\"{$sId}\" clickrewriteform=\"{$sForm}\" clickrewriteurl=\"$sUrl&{$sQueryPa
      ram}=$iCount\" href=\"#\">$iCount</a></li>";
                }
            }

            //next button
            if ($iPage < $iLast)
                $sOut .= "<li><a clicktoshow=\"{$sId}_spinner\" clickrewriteid=\"
      {$sId}\" clickrewriteform=\"{$sForm}\" clickrewriteurl=\"$sUrl&{$sQueryParam}=$iN
      ext\" href=\"#\">Next</a></li>";

            //last button
            if ($iPage < $iLast - 1)
                $sOut .= "<li><a clicktoshow=\"{$sId}_spinner\" clickrewriteid=\"
      {$sId}\" clickrewriteform=\"{$sForm}\" clickrewriteurl=\"$sUrl&{$sQueryParam}=$iL
      ast\" href=\"#\">Last</a></li>";

            $sOut .= '';
        }

        $sOut .= '';
        $sOut = "$sOut";

        return( "<ul class=\"pagerpro\" id=\"pag_nav_links_{$sId}\">" . $sOut . "
      </ul>" );
    }
\end{DoxyCode}


\hypertarget{classCSFHelperBase_a3afb921a061161738de5e471984e1fcf}{
\index{CSFHelperBase@{CSFHelperBase}!getRequest@{getRequest}}
\index{getRequest@{getRequest}!CSFHelperBase@{CSFHelperBase}}
\subsubsection[{getRequest}]{\setlength{\rightskip}{0pt plus 5cm}static getRequest (
\begin{DoxyParamCaption}
\item[{\$}]{ sUrl, }
\item[{\$}]{ sQueryString = {\ttfamily \char`\"{}\char`\"{}}, }
\item[{\$}]{ sUserAgent = {\ttfamily \char`\"{}SnowFrame~Object~Framework~PHP5~Client~1.00a~(pogostick.com)\char`\"{}}}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily  \mbox{[}static\mbox{]}}}}
\label{classCSFHelperBase_a3afb921a061161738de5e471984e1fcf}
Retrieves an http page


\begin{DoxyParams}{Parameters}
\item[{\em mixed}]\$sUrl \item[{\em mixed}]\$sQueryString \item[{\em mixed}]\$sUserAgent \end{DoxyParams}
\begin{DoxyReturn}{Returns}
string 
\end{DoxyReturn}


Definition at line 107 of file CSFHelperBase.php.




\begin{DoxyCode}
    {
        if ( function_exists( 'curl_init' ) )
        {
            // Use CURL if installed...
            $oConn = curl_init();
            curl_setopt( $oConn, CURLOPT_URL, $sUrl . "?" . $sQueryString  );
            curl_setopt( $oConn, CURLOPT_RETURNTRANSFER, true );
            curl_setopt( $oConn, CURLOPT_USERAGENT, $sUserAgent );
            curl_setopt( $oConn, CURLOPT_TIMEOUT, 60 );
//          $_fTime = microtime( true );
            $sResult = curl_exec( $oConn );
//          error_log( "SF_Helpers::getRequest [" . ( microtime( true ) - $_fTime
       ) . " secs] [" . $sUrl . '?' . $sQueryString . "]", 0 );
            curl_close( $oConn );
        }
        else
        {
            // Non-CURL based version...
            $oContext =
                array('http' =>
                    array('method' => 'POST',
                        'header' => 'Content-type: application/x-www-form-urlenco
      ded'."\r\n".
                        'User-Agent: ' . $sUserAgent ."\r\n".
                        'Content-length: ' . strlen( $sQueryString ),
                        'content' => $post_string )
                    );

            $oContextId = stream_context_create( $oContext );

            $oSocket = fopen( $sUrl . "?" . $sQueryString, 'r', false, $oContextI
      d );

            if ( $oSocket )
            {
                $sResult = '';

                while ( !feof( $oSocket ) )
                    $sResult .= fgets( $oSocket, 4096 );

                fclose( $oSocket );
            }
        }

        return( $sResult );
    }
\end{DoxyCode}


\hypertarget{classCSFHelperBase_a384e6feb3f0a9de4e64918ad50329a97}{
\index{CSFHelperBase@{CSFHelperBase}!isValidEmail@{isValidEmail}}
\index{isValidEmail@{isValidEmail}!CSFHelperBase@{CSFHelperBase}}
\subsubsection[{isValidEmail}]{\setlength{\rightskip}{0pt plus 5cm}static isValidEmail (
\begin{DoxyParamCaption}
\item[{\$}]{ sEmail = {\ttfamily null}}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily  \mbox{[}static\mbox{]}}}}
\label{classCSFHelperBase_a384e6feb3f0a9de4e64918ad50329a97}
Validate email address 

Definition at line 286 of file CSFHelperBase.php.




\begin{DoxyCode}
    {
        return( preg_match( "/^[\d\w\/+!=#|$?%{^&}*`'~-][\d\w\/\.+!=#|$?%{^&}*`'~
      -]*@[A-Z0-9][A-Z0-9.-]{1,61}[A-Z0-9]\.[A-Z]{2,6}$/ix", $sEmail ) );
    }
\end{DoxyCode}


\hypertarget{classCSFHelperBase_a711114d7dbe0c5570cbe3dfbec4181ce}{
\index{CSFHelperBase@{CSFHelperBase}!string\_\-to\_\-array@{string\_\-to\_\-array}}
\index{string\_\-to\_\-array@{string\_\-to\_\-array}!CSFHelperBase@{CSFHelperBase}}
\subsubsection[{string\_\-to\_\-array}]{\setlength{\rightskip}{0pt plus 5cm}static string\_\-to\_\-array (
\begin{DoxyParamCaption}
\item[{\$}]{ string}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily  \mbox{[}static\mbox{]}}}}
\label{classCSFHelperBase_a711114d7dbe0c5570cbe3dfbec4181ce}
Converts a string created by \hyperlink{classCSFHelperBase_abb5e3b20530f28ae782f03229e94ad36}{array\_\-to\_\-string()} back into an array.


\begin{DoxyParams}{Parameters}
\item[{\em string}]\$string \end{DoxyParams}
\begin{DoxyReturn}{Returns}
array 
\end{DoxyReturn}


Definition at line 61 of file CSFHelperBase.php.




\begin{DoxyCode}
    {
        $retval = array();
        $string = urldecode( $string );
        $tmp_array = explode( '||', $string );
        $null_value = urlencode( base64_encode( "^^^" ) );

        foreach ( $tmp_array as $tmp_val )
        {
            if ( $tmp_val )
            {
                $decoded_index = $index = $value = null;
                $arTemp = explode( '|', $tmp_val );
                
                if ( is_array( $arTemp ) && sizeof( $arTemp ) > 1 )
                {
                    list( $index, $value ) = $arTemp;
                    $decoded_index = base64_decode( urldecode( $index ) );

                    if ( $value != $null_value )
                    {
                        $val = base64_decode( urldecode( $value ) );
                        if ( substr( $val, 0, 8 ) == '^^array^' )
                            $val = SF_Helpers::string_to_array( substr( $val, 8 )
       );

                        $retval[ $decoded_index ] = $val;
                    }
                    else
                        $retval[ $decoded_index ] = NULL;
                }
            }
            else
                error_log( "bogus array: [{$tmp_val}]",0);
        }

        return( $retval );
    }
\end{DoxyCode}


\hypertarget{classCSFHelperBase_aef2d4e1f18258000c870a620e0b2f5ca}{
\index{CSFHelperBase@{CSFHelperBase}!suckTag@{suckTag}}
\index{suckTag@{suckTag}!CSFHelperBase@{CSFHelperBase}}
\subsubsection[{suckTag}]{\setlength{\rightskip}{0pt plus 5cm}static suckTag (
\begin{DoxyParamCaption}
\item[{\$}]{ sData, }
\item[{\$}]{ sTag, }
\item[{\$}]{ sTagEnd, }
\item[{\$}]{ iStart = {\ttfamily 0}, }
\item[{\$}]{ sNear = {\ttfamily null}}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily  \mbox{[}static\mbox{]}}}}
\label{classCSFHelperBase_aef2d4e1f18258000c870a620e0b2f5ca}
Parse HTML field for a tag...


\begin{DoxyParams}{Parameters}
\item[{\em mixed}]\$sData \item[{\em mixed}]\$sTag \item[{\em mixed}]\$sTagEnd \item[{\em mixed}]\$iStart \item[{\em mixed}]\$sNear \end{DoxyParams}
\begin{DoxyReturn}{Returns}
string 
\end{DoxyReturn}


Reimplemented from \hyperlink{classCPSHelperBase_aef2d4e1f18258000c870a620e0b2f5ca}{CPSHelperBase}.



Definition at line 173 of file CSFHelperBase.php.




\begin{DoxyCode}
    {
        $_sResult = "";
        $_l = strlen( $sTag );

        //  If near value given, get position of that as start
        if ( $sNear != null )
        {
            $_iStart = stripos( $sData, $sNear, $iStart );
            if ( $_iStart >= 0 )
                $iStart = $_iStart + strlen( $sNear );
        }

        $_i = stripos( $sData, $sTag, $iStart );
        $_k = strlen( $sTagEnd );

        if ( $_i >= 0 )
        {
            $_j = stripos( $sData, $sTagEnd, $_i + $_l );

            if ( $_j >= 0 )
            {
                $iStart = $_i;
                $_sResult = substr( $sData, $_i + $_l,  $_j - $_i - $_l );
            }

            return( trim( $_sResult ) );
        }

        return( null );
    }
\end{DoxyCode}


\hypertarget{classCSFHelperBase_ab6d665a16096c6c1ab8ae2ef8214a847}{
\index{CSFHelperBase@{CSFHelperBase}!trimLines@{trimLines}}
\index{trimLines@{trimLines}!CSFHelperBase@{CSFHelperBase}}
\subsubsection[{trimLines}]{\setlength{\rightskip}{0pt plus 5cm}static trimLines (
\begin{DoxyParamCaption}
\item[{\$}]{ string}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily  \mbox{[}static\mbox{]}}}}
\label{classCSFHelperBase_ab6d665a16096c6c1ab8ae2ef8214a847}
Removes extra lines


\begin{DoxyParams}{Parameters}
\item[{\em string}]\$string \end{DoxyParams}
\begin{DoxyReturn}{Returns}
string 
\end{DoxyReturn}


Definition at line 158 of file CSFHelperBase.php.




\begin{DoxyCode}
    {
        return( preg_replace("/(^[\r\n]*|[\r\n]+)[\s\t]*[\r\n]+/", "\n", $string)
       );
    }
\end{DoxyCode}




The documentation for this class was generated from the following file:\begin{DoxyCompactItemize}
\item 
/usr/local/yiixl/lib/original/components/snowframe/helpers/\hyperlink{CSFHelperBase_8php}{CSFHelperBase.php}\end{DoxyCompactItemize}
