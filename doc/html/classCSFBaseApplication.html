<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>&quot;The Yii Extension Library Of Doom!&quot;: CSFBaseApplication Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.7.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul class="tablist">
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li><a href="classes.html"><span>Data&nbsp;Structure&nbsp;Index</span></a></li>
      <li><a href="hierarchy.html"><span>Class&nbsp;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Data&nbsp;Fields</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pro-methods">Protected Member Functions</a>  </div>
  <div class="headertitle">
<h1>CSFBaseApplication Class Reference</h1>  </div>
</div>
<div class="contents">
<!-- doxytag: class="CSFBaseApplication" --><!-- doxytag: inherits="CPSApiComponent" --><div class="dynheader">
Inheritance diagram for CSFBaseApplication:</div>
<div class="dyncontent">
<div class="center"><img src="classCSFBaseApplication__inherit__graph.png" border="0" usemap="#CSFBaseApplication_inherit__map" alt="Inheritance graph"/></div>
<map name="CSFBaseApplication_inherit__map" id="CSFBaseApplication_inherit__map">
<area shape="rect" id="node2" href="classCPSApiComponent.html" title="CPSApiComponent" alt="" coords="9,237,151,267"/><area shape="rect" id="node4" href="classCPSComponent.html" title="CPSComponent" alt="" coords="19,160,141,189"/><area shape="rect" id="node6" href="interfaceIPSComponent.html" title="IPSComponent" alt="" coords="21,83,139,112"/><area shape="rect" id="node8" href="interfaceIPSBase.html" title="IPSBase" alt="" coords="43,5,117,35"/></map>
<center><span class="legend">[<a target="top" href="graph_legend.html">legend</a>]</span></center></div>
<div class="dynheader">
Collaboration diagram for CSFBaseApplication:</div>
<div class="dyncontent">
<div class="center"><img src="classCSFBaseApplication__coll__graph.png" border="0" usemap="#CSFBaseApplication_coll__map" alt="Collaboration graph"/></div>
<map name="CSFBaseApplication_coll__map" id="CSFBaseApplication_coll__map">
<area shape="rect" id="node2" href="classCPSApiComponent.html" title="CPSApiComponent" alt="" coords="9,237,151,267"/><area shape="rect" id="node4" href="classCPSComponent.html" title="CPSComponent" alt="" coords="19,160,141,189"/><area shape="rect" id="node6" href="interfaceIPSComponent.html" title="IPSComponent" alt="" coords="21,83,139,112"/><area shape="rect" id="node8" href="interfaceIPSBase.html" title="IPSBase" alt="" coords="43,5,117,35"/></map>
<center><span class="legend">[<a target="top" href="graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCSFBaseApplication.html#a2dc262e99b1c246b56f27626bfe699ff">preinit</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCSFBaseApplication.html#a4be4055f3361d4800e16bc2e2e38cda6">init</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCSFBaseApplication.html#a96b0f4bab679378904506e1a106c4e60">initializePlatform</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCSFBaseApplication.html#a71fa3ba915a284747b787ab0d94869ce">capturePageView</a> ($sPage)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCSFBaseApplication.html#a6deb2041e7ee4cbb3511c0f5a7ea8a03">inviteRedirect</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCSFBaseApplication.html#a83d6db3f4e5f36ddd8adad2f53133e76">redirect</a> ($sUrl)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCSFBaseApplication.html#acf7865241ab5ac45a0f04674efe51d1a">getInviteeList</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCSFBaseApplication.html#af12c69561c23be5e6fc7e4e0a2808fbb">addAdVendor</a> ($iAVC, $sIds)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCSFBaseApplication.html#a3978cc0d9152ece4cd315601a95a38bd">setRefHandle</a> ($sFBML)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCSFBaseApplication.html#a99e97980251298d31efe3451470e8df5">getAdCode</a> ($iAVC=null, $eType=SF_AdType::Banner)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCSFBaseApplication.html#ac409888924f803214fbd2df44327242b">publishTemplate</a> ($sBundleId=null, &amp;$arBundleData=<a class="el" href="list_8php.html#aa3205d038c7f8feb5c9f01ac4dfadc88">array</a>(), $arTargetIds=null)</td></tr>
<tr><td colspan="2"><h2><a name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCSFBaseApplication.html#aa40909289ffd00ccc071d938f586fc47">processQueryString</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCSFBaseApplication.html#aed904ee937df5c26c42b9995d2e3a69b">processApplicationCommand</a> ($sCommand=null)</td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>

<p>Definition at line <a class="el" href="CSFBaseApplication_8php_source.html#l00024">24</a> of file <a class="el" href="CSFBaseApplication_8php_source.html">CSFBaseApplication.php</a>.</p>
<hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="af12c69561c23be5e6fc7e4e0a2808fbb"></a><!-- doxytag: member="CSFBaseApplication::addAdVendor" ref="af12c69561c23be5e6fc7e4e0a2808fbb" args="($iAVC, $sIds)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">addAdVendor </td>
          <td>(</td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>iAVC</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>sIds</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="CSFBaseApplication_8php_source.html#l00210">210</a> of file <a class="el" href="CSFBaseApplication_8php_source.html">CSFBaseApplication.php</a>.</p>

<p><div class="fragment"><pre class="fragment">    {
        $this-&gt;m_arBanner[ $iAVC ] = <span class="keyword">new</span> SF_BannerAd( $iAVC, explode(<span class="charliteral">&#39;,&#39;</span>,$sIds) );
    }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a71fa3ba915a284747b787ab0d94869ce"></a><!-- doxytag: member="CSFBaseApplication::capturePageView" ref="a71fa3ba915a284747b787ab0d94869ce" args="($sPage)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">capturePageView </td>
          <td>(</td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>sPage</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Tracks a page hit... </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>string</em>&nbsp;</td><td>$sPage </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="CSFBaseApplication_8php_source.html#l00166">166</a> of file <a class="el" href="CSFBaseApplication_8php_source.html">CSFBaseApplication.php</a>.</p>

<p><div class="fragment"><pre class="fragment">    {
        <span class="keywordflow">if</span> ( $this-&gt;sonetrix )
            $this-&gt;sonetrix-&gt;user_pageView( $this-&gt;PFUserId, $sPage );
    }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a99e97980251298d31efe3451470e8df5"></a><!-- doxytag: member="CSFBaseApplication::getAdCode" ref="a99e97980251298d31efe3451470e8df5" args="($iAVC=null, $eType=SF_AdType::Banner)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">getAdCode </td>
          <td>(</td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>iAVC</em> = <code>null</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>eType</em> = <code>SF_AdType::Banner</code></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Emit banner stuff</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>unknown_type</em>&nbsp;</td><td>$sKey </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="CSFBaseApplication_8php_source.html#l00228">228</a> of file <a class="el" href="CSFBaseApplication_8php_source.html">CSFBaseApplication.php</a>.</p>

<p><div class="fragment"><pre class="fragment">    {
        $sOut = <span class="stringliteral">&quot;&quot;</span>;

        <span class="keywordflow">if</span> ( isset( $this-&gt;m_arBanner[ $iAVC ] ) )
            $sOut = $this-&gt;m_arBanner[ $iAVC ]-&gt;getAdCode( $this-&gt;pfApi-&gt;getPFType(), $eType );
        <span class="keywordflow">else</span>
        {
            <span class="keywordflow">foreach</span> ( $this-&gt;m_arBanner as $sKey =&gt; $oValue )
                $sOut = $oValue-&gt;getAdCode( $this-&gt;pfApi-&gt;getPFType(), $eType );
        }

        <span class="keywordflow">return</span>( $sOut );
    }
</pre></div></p>

</div>
</div>
<a class="anchor" id="acf7865241ab5ac45a0f04674efe51d1a"></a><!-- doxytag: member="CSFBaseApplication::getInviteeList" ref="acf7865241ab5ac45a0f04674efe51d1a" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">getInviteeList </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Returns a comma separated list of invited people for exclusion...</p>
<dl class="return"><dt><b>Returns:</b></dt><dd>unknown </dd></dl>

<p>Definition at line <a class="el" href="CSFBaseApplication_8php_source.html#l00201">201</a> of file <a class="el" href="CSFBaseApplication_8php_source.html">CSFBaseApplication.php</a>.</p>

<p><div class="fragment"><pre class="fragment">    {
        <span class="keywordflow">if</span> ( $this-&gt;m_bEnableSonetrix &amp;&amp; $this-&gt;sonetrix )
            <span class="keywordflow">return</span>( $this-&gt;sonetrix-&gt;user_getInvitees( $this-&gt;PFUserId ) );
    }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a4be4055f3361d4800e16bc2e2e38cda6"></a><!-- doxytag: member="CSFBaseApplication::init" ref="a4be4055f3361d4800e16bc2e2e38cda6" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">init </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Intialize </p>

<p>Reimplemented from <a class="el" href="classCPSApiComponent.html#a4be4055f3361d4800e16bc2e2e38cda6">CPSApiComponent</a>.</p>

<p>Definition at line <a class="el" href="CSFBaseApplication_8php_source.html#l00075">75</a> of file <a class="el" href="CSFBaseApplication_8php_source.html">CSFBaseApplication.php</a>.</p>

<p><div class="fragment"><pre class="fragment">    {
        <a class="code" href="classCSFBaseApplication.html#a4be4055f3361d4800e16bc2e2e38cda6">parent::init</a>();
        
        <span class="comment">//  Construct a platform specific object</span>
        $this-&gt;<a class="code" href="classCSFBaseApplication.html#a96b0f4bab679378904506e1a106c4e60">initializePlatform</a>();

        <span class="comment">//  Create a new Sonetrix object...</span>
        <span class="keywordflow">if</span> ( $this-&gt;m_bEnableSonetrix )
        {
            $this-&gt;sonetrix = <span class="keyword">new</span> Sonetrix( $sAppId, $iPTC, null, null, ( $iPTC == <a class="code" href="classSF.html#a9e8fafa39429831b857bb06424d74dae">SF::PT_FACEBOOK</a> &amp;&amp; $this-&gt;pfApi-&gt;PFAPI ? $this-&gt;pfApi-&gt;PFAPI : null ), $sProfileId );
            <span class="keywordflow">if</span> ( $this-&gt;sonetrix &amp;&amp; $this-&gt;pfApi ) $this-&gt;pfApi-&gt;Sonetrix = $this-&gt;sonetrix;
        }

        <span class="comment">//  Process the query string...</span>
        $this-&gt;<a class="code" href="classCSFBaseApplication.html#aa40909289ffd00ccc071d938f586fc47">processQueryString</a>();
    }
</pre></div></p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classCSFBaseApplication_a4be4055f3361d4800e16bc2e2e38cda6_cgraph.png" border="0" usemap="#classCSFBaseApplication_a4be4055f3361d4800e16bc2e2e38cda6_cgraph" alt=""/></div>
<map name="classCSFBaseApplication_a4be4055f3361d4800e16bc2e2e38cda6_cgraph" id="classCSFBaseApplication_a4be4055f3361d4800e16bc2e2e38cda6_cgraph">
<area shape="rect" id="node3" href="classCSFBaseApplication.html#a96b0f4bab679378904506e1a106c4e60" title="initializePlatform" alt="" coords="108,5,233,35"/><area shape="rect" id="node5" href="classCSFBaseApplication.html#aa40909289ffd00ccc071d938f586fc47" title="processQueryString" alt="" coords="97,59,244,88"/><area shape="rect" id="node7" href="classCSFBaseApplication.html#aed904ee937df5c26c42b9995d2e3a69b" title="processApplicationCommand" alt="" coords="295,59,503,88"/><area shape="rect" id="node9" href="classCSFBaseApplication.html#a83d6db3f4e5f36ddd8adad2f53133e76" title="redirect" alt="" coords="553,59,623,88"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a96b0f4bab679378904506e1a106c4e60"></a><!-- doxytag: member="CSFBaseApplication::initializePlatform" ref="a96b0f4bab679378904506e1a106c4e60" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">initializePlatform </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="CSFBaseApplication_8php_source.html#l00096">96</a> of file <a class="el" href="CSFBaseApplication_8php_source.html">CSFBaseApplication.php</a>.</p>

<p><div class="fragment"><pre class="fragment">    {
        <span class="keywordflow">switch</span> ( $this-&gt;pfTypeCode )
        {
            <span class="keywordflow">case</span> <a class="code" href="classSF.html#a68ee53bd9120191897b1bbf694e1312c">SF::PT_FRIENDSTER</a>:
            <span class="keywordflow">case</span> <a class="code" href="classSF.html#a78190e4161de1deb7e2928e801539df5">SF::PT_MYSPACE</a>:
                <span class="keywordflow">break</span>;

            <span class="keywordflow">case</span> <a class="code" href="classSF.html#a9e8fafa39429831b857bb06424d74dae">SF::PT_FACEBOOK</a>:
                $this-&gt;pfApi = <span class="keyword">new</span> CSFFacebookPlatform( $sBaseUrl, $sAppName, $sAppId, $sAPIKey, $sAPISecret );
                <span class="keywordflow">break</span>;

            <span class="keywordflow">case</span> <a class="code" href="classSF.html#a44c3e775e3f80d5b3fa3e1d745705126">SF::PT_BEBO</a>:
                $this-&gt;pfApi = <span class="keyword">new</span> CSFBeboPlatform( $sBaseUrl, $sAppName, $sAppId, $sAPIKey, $sAPISecret, $sProfileId );
                <span class="keywordflow">break</span>;
        }
        
        <span class="keywordflow">if</span> ( ! $this-&gt;pfApi )
            <span class="keywordflow">throw</span> <span class="keyword">new</span> CException( <span class="stringliteral">&#39;Invalid, unsupported, or no platform type selected.&#39;</span> );
    }
</pre></div></p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classCSFBaseApplication_a96b0f4bab679378904506e1a106c4e60_icgraph.png" border="0" usemap="#classCSFBaseApplication_a96b0f4bab679378904506e1a106c4e60_icgraph" alt=""/></div>
<map name="classCSFBaseApplication_a96b0f4bab679378904506e1a106c4e60_icgraph" id="classCSFBaseApplication_a96b0f4bab679378904506e1a106c4e60_icgraph">
<area shape="rect" id="node3" href="classCSFBaseApplication.html#a4be4055f3361d4800e16bc2e2e38cda6" title="init" alt="" coords="183,5,223,35"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a6deb2041e7ee4cbb3511c0f5a7ea8a03"></a><!-- doxytag: member="CSFBaseApplication::inviteRedirect" ref="a6deb2041e7ee4cbb3511c0f5a7ea8a03" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">inviteRedirect </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Redirects to invite page if app was just installed... </p>

<p>Definition at line <a class="el" href="CSFBaseApplication_8php_source.html#l00176">176</a> of file <a class="el" href="CSFBaseApplication_8php_source.html">CSFBaseApplication.php</a>.</p>

<p><div class="fragment"><pre class="fragment">    {
        <span class="keywordflow">if</span> ( $this-&gt;m_eInvitePlacement == SF_InvitePlacement::AfterAdd &amp;&amp; isset( $_REQUEST[<span class="stringliteral">&#39;installed&#39;</span>] ) &amp;&amp; $_REQUEST[<span class="stringliteral">&#39;installed&#39;</span>] == <span class="charliteral">&#39;1&#39;</span> )
        {
            <span class="comment">//  No user database? Ping sonetrix with addition</span>
            <span class="keywordflow">if</span> ( ! $this-&gt;UserDB &amp;&amp; $this-&gt;sonetrix )
                $this-&gt;sonetrix-&gt;setHashUID( $this-&gt;sonetrix-&gt;user_install( $this-&gt;pfApi-&gt;PFUserId, $this-&gt;pfApi-&gt;getSessionKey() ) );

            $this-&gt;<a class="code" href="classCSFBaseApplication.html#a83d6db3f4e5f36ddd8adad2f53133e76">redirect</a>( $this-&gt;pfApi-&gt;AppUrl . <span class="stringliteral">&quot;invite.php&quot;</span> );
        }
    }
</pre></div></p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classCSFBaseApplication_a6deb2041e7ee4cbb3511c0f5a7ea8a03_cgraph.png" border="0" usemap="#classCSFBaseApplication_a6deb2041e7ee4cbb3511c0f5a7ea8a03_cgraph" alt=""/></div>
<map name="classCSFBaseApplication_a6deb2041e7ee4cbb3511c0f5a7ea8a03_cgraph" id="classCSFBaseApplication_a6deb2041e7ee4cbb3511c0f5a7ea8a03_cgraph">
<area shape="rect" id="node3" href="classCSFBaseApplication.html#a83d6db3f4e5f36ddd8adad2f53133e76" title="redirect" alt="" coords="161,5,231,35"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a2dc262e99b1c246b56f27626bfe699ff"></a><!-- doxytag: member="CSFBaseApplication::preinit" ref="a2dc262e99b1c246b56f27626bfe699ff" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">preinit </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Initialize </p>

<p>Reimplemented from <a class="el" href="classCPSComponent.html#a2dc262e99b1c246b56f27626bfe699ff">CPSComponent</a>.</p>

<p>Definition at line <a class="el" href="CSFBaseApplication_8php_source.html#l00033">33</a> of file <a class="el" href="CSFBaseApplication_8php_source.html">CSFBaseApplication.php</a>.</p>

<p><div class="fragment"><pre class="fragment">    {
        <a class="code" href="classCSFBaseApplication.html#a2dc262e99b1c246b56f27626bfe699ff">parent::preinit</a>();
        $this-&gt;addOptions( self::getBaseOptions() );
    }
</pre></div></p>

</div>
</div>
<a class="anchor" id="aed904ee937df5c26c42b9995d2e3a69b"></a><!-- doxytag: member="CSFBaseApplication::processApplicationCommand" ref="aed904ee937df5c26c42b9995d2e3a69b" args="($sCommand=null)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">processApplicationCommand </td>
          <td>(</td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>sCommand</em> = <code>null</code></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Process any single application commands </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>string</em>&nbsp;</td><td>$sCommand </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="CSFBaseApplication_8php_source.html#l00135">135</a> of file <a class="el" href="CSFBaseApplication_8php_source.html">CSFBaseApplication.php</a>.</p>

<p><div class="fragment"><pre class="fragment">    {
        $this-&gt;pageCommand = trim( PS::nvl( $sCommand, $this-&gt;pageCommand ) );

        <span class="comment">//  Deal with screwy facebook bug where they don&#39;t parse url properly</span>
        <span class="keywordflow">if</span> ( substr( $this-&gt;pageCommand, 0, 7 ) == <span class="stringliteral">&#39;addhttp&#39;</span> )
        {
            $_sUrl = substr( $this-&gt;pageCommand, 3 );
            $this-&gt;<a class="code" href="classCSFBaseApplication.html#a83d6db3f4e5f36ddd8adad2f53133e76">redirect</a>( $this-&gt;pfApi-&gt;appUrl . <span class="stringliteral">&#39;?c=add&amp;auth_token=&#39;</span> . $_REQUEST[<span class="stringliteral">&#39;auth_token&#39;</span>] . <span class="stringliteral">&#39;&amp;installed=1&amp;refuid=&#39;</span> . ( isset( $_REQUEST[<span class="stringliteral">&#39;refuid&#39;</span>] ) ? $_REQUEST[<span class="stringliteral">&#39;refuid&#39;</span>] : <span class="stringliteral">&#39;&#39;</span> ) );
        }

        <span class="keywordflow">switch</span> ( $this-&gt;pageCommand )
        {
            <span class="keywordflow">case</span> <span class="stringliteral">&#39;ping&#39;</span>:
                echo <span class="stringliteral">&#39;pong&#39;</span>;
                <span class="keywordflow">break</span>;
                
            <span class="keywordflow">case</span> <span class="stringliteral">&#39;del&#39;</span>:
                <span class="keywordflow">if</span> ( $this-&gt;currentUser )
                    $this-&gt;currentUser-&gt;remove();
                <span class="keywordflow">break</span>;
        }
        
        <span class="comment">//  Stop execution here.</span>
        exit;
    }
</pre></div></p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classCSFBaseApplication_aed904ee937df5c26c42b9995d2e3a69b_cgraph.png" border="0" usemap="#classCSFBaseApplication_aed904ee937df5c26c42b9995d2e3a69b_cgraph" alt=""/></div>
<map name="classCSFBaseApplication_aed904ee937df5c26c42b9995d2e3a69b_cgraph" id="classCSFBaseApplication_aed904ee937df5c26c42b9995d2e3a69b_cgraph">
<area shape="rect" id="node3" href="classCSFBaseApplication.html#a83d6db3f4e5f36ddd8adad2f53133e76" title="redirect" alt="" coords="265,5,335,35"/></map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classCSFBaseApplication_aed904ee937df5c26c42b9995d2e3a69b_icgraph.png" border="0" usemap="#classCSFBaseApplication_aed904ee937df5c26c42b9995d2e3a69b_icgraph" alt=""/></div>
<map name="classCSFBaseApplication_aed904ee937df5c26c42b9995d2e3a69b_icgraph" id="classCSFBaseApplication_aed904ee937df5c26c42b9995d2e3a69b_icgraph">
<area shape="rect" id="node3" href="classCSFBaseApplication.html#aa40909289ffd00ccc071d938f586fc47" title="processQueryString" alt="" coords="265,5,412,35"/><area shape="rect" id="node5" href="classCSFBaseApplication.html#a4be4055f3361d4800e16bc2e2e38cda6" title="init" alt="" coords="463,5,503,35"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="aa40909289ffd00ccc071d938f586fc47"></a><!-- doxytag: member="CSFBaseApplication::processQueryString" ref="aa40909289ffd00ccc071d938f586fc47" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">processQueryString </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Generic query string processing for the application. </p>

<p>Definition at line <a class="el" href="CSFBaseApplication_8php_source.html#l00120">120</a> of file <a class="el" href="CSFBaseApplication_8php_source.html">CSFBaseApplication.php</a>.</p>

<p><div class="fragment"><pre class="fragment">    {
        $this-&gt;httpReferrer = PS::o( $_SERVER, <span class="stringliteral">&#39;HTTP_REFERER&#39;</span> );
        $this-&gt;clientIPAddress = PS::o( $_SERVER, <span class="stringliteral">&#39;REMOTE_ADDR&#39;</span> );
        $this-&gt;pageAction = PS::o( $_REQUEST, <span class="stringliteral">&#39;action&#39;</span> );
        $this-&gt;pageSubAction = PS::o( $_REQUEST, <span class="stringliteral">&#39;sa&#39;</span> );

        <span class="keywordflow">if</span> ( null !== ( $_sCmd = PS::o( $_REQUEST, <span class="charliteral">&#39;c&#39;</span>, null, <span class="keyword">true</span> ) ) )
            $this-&gt;<a class="code" href="classCSFBaseApplication.html#aed904ee937df5c26c42b9995d2e3a69b">processApplicationCommand</a>( $_sCmd );
    }
</pre></div></p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classCSFBaseApplication_aa40909289ffd00ccc071d938f586fc47_cgraph.png" border="0" usemap="#classCSFBaseApplication_aa40909289ffd00ccc071d938f586fc47_cgraph" alt=""/></div>
<map name="classCSFBaseApplication_aa40909289ffd00ccc071d938f586fc47_cgraph" id="classCSFBaseApplication_aa40909289ffd00ccc071d938f586fc47_cgraph">
<area shape="rect" id="node3" href="classCSFBaseApplication.html#aed904ee937df5c26c42b9995d2e3a69b" title="processApplicationCommand" alt="" coords="204,5,412,35"/><area shape="rect" id="node5" href="classCSFBaseApplication.html#a83d6db3f4e5f36ddd8adad2f53133e76" title="redirect" alt="" coords="463,5,532,35"/></map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classCSFBaseApplication_aa40909289ffd00ccc071d938f586fc47_icgraph.png" border="0" usemap="#classCSFBaseApplication_aa40909289ffd00ccc071d938f586fc47_icgraph" alt=""/></div>
<map name="classCSFBaseApplication_aa40909289ffd00ccc071d938f586fc47_icgraph" id="classCSFBaseApplication_aa40909289ffd00ccc071d938f586fc47_icgraph">
<area shape="rect" id="node3" href="classCSFBaseApplication.html#a4be4055f3361d4800e16bc2e2e38cda6" title="init" alt="" coords="204,5,244,35"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ac409888924f803214fbd2df44327242b"></a><!-- doxytag: member="CSFBaseApplication::publishTemplate" ref="ac409888924f803214fbd2df44327242b" args="($sBundleId=null, &amp;$arBundleData=array(), $arTargetIds=null)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">publishTemplate </td>
          <td>(</td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>sBundleId</em> = <code>null</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&amp;$&nbsp;</td>
          <td class="paramname"> <em>arBundleData</em> = <code><a class="el" href="list_8php.html#aa3205d038c7f8feb5c9f01ac4dfadc88">array</a>()</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>arTargetIds</em> = <code>null</code></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="CSFBaseApplication_8php_source.html#l00243">243</a> of file <a class="el" href="CSFBaseApplication_8php_source.html">CSFBaseApplication.php</a>.</p>

<p><div class="fragment"><pre class="fragment">    {
        $_sBundleId = $sBundleId;
        $_sAppUrl = $this-&gt;PFAPI-&gt;AppUrl;
        
        <span class="keywordflow">try</span>
        {
            <span class="comment">//  See if we can get the bundle id for this app...</span>
            <span class="keywordflow">if</span> ( $sBundleId == null )
            {
                <span class="keywordflow">if</span> ( $arBundle = $this-&gt;PFAPI-&gt;getRegisteredBundles() )
                {
                    <span class="comment">//  Get the bundle id...</span>
                    $_sBundleId = isset( $arBundle, $arBundle[ 0 ], $arBundle[ 0 ][ <span class="stringliteral">&#39;template_bundle_id&#39;</span> ] ) ? $arBundle[0][<span class="stringliteral">&#39;template_bundle_id&#39;</span>] : null;
                    error_log( <span class="stringliteral">&#39;Found registered bundle id &#39;</span> . $_sBundleId . <span class="stringliteral">&#39; for app [&#39;</span> . $this-&gt;getQuizName() . <span class="charliteral">&#39;]&#39;</span> );
                }
                <span class="keywordflow">else</span>
                {
                    <span class="comment">//  Create a default quiz bundle...</span>
                    $arOneLine = $arShort = $arAction = <a class="code" href="admin_8php.html#a2394bd91cde70158acb50a4a7f860ab5">array</a>();
                    $arOneLine[] = <span class="stringliteral">&#39;{*actor*} just took the {*quiz_name*} quiz and the result was {*quiz_result_name*}.&#39;</span>;
                    
                    $arShort[] = <a class="code" href="admin_8php.html#a2394bd91cde70158acb50a4a7f860ab5">array</a>( 
                        <span class="stringliteral">&#39;template_title&#39;</span> =&gt; <span class="stringliteral">&#39;{*actor*} just took the {*quiz_name*} quiz and the result was {*quiz_result_name*}.&#39;</span>,
                        <span class="stringliteral">&#39;template_body&#39;</span> =&gt; <span class="stringliteral">&#39;{*quiz_result_full*}&#39;</span>,
                    );
            
                    $arAction[] = <a class="code" href="admin_8php.html#a2394bd91cde70158acb50a4a7f860ab5">array</a>( <span class="stringliteral">&#39;text&#39;</span> =&gt; <span class="stringliteral">&#39;Take the quiz!&#39;</span>, <span class="stringliteral">&#39;href&#39;</span> =&gt; $this-&gt;PFAPI-&gt;AppUrl );
                    <span class="keywordflow">if</span> ( $this-&gt;m_sFanPageUrl ) $arAction[] = <a class="code" href="admin_8php.html#a2394bd91cde70158acb50a4a7f860ab5">array</a>( <span class="stringliteral">&#39;text&#39;</span> =&gt; <span class="stringliteral">&#39;Become a fan!&#39;</span>, <span class="stringliteral">&#39;href&#39;</span> =&gt; $this-&gt;m_sFanPageUrl );
                    
                    $_sBundleId = $this-&gt;PFAPI-&gt;registerBundle( $arOneLine, $arShort, null, $arLinks );
                    error_log( <span class="stringliteral">&#39;Registered bundle id &#39;</span> . $_sBundleId . <span class="stringliteral">&#39; for app [&#39;</span> . $this-&gt;getQuizName() . <span class="charliteral">&#39;]&#39;</span> );
                }
            }
            
            <span class="comment">//  Do we have a bundle to publish?</span>
            <span class="keywordflow">if</span> ( $_sBundleId )
            {
                <span class="comment">//  Create array...</span>
                <span class="keywordflow">if</span> ( ! <span class="keyword">sizeof</span>( $arBundleData ) )
                {
                    $arBundleData = <a class="code" href="admin_8php.html#a2394bd91cde70158acb50a4a7f860ab5">array</a>(
                        <span class="stringliteral">&#39;quiz_name&#39;</span> =&gt; <span class="stringliteral">&quot;&amp;quot;&lt;a href=\&quot;{$_sAppUrl}\&quot;&gt;{$this-&gt;m_sQuizName}&lt;/a&gt;&amp;quot;&quot;</span>,
                        <span class="stringliteral">&#39;quiz_result_name&#39;</span> =&gt; <span class="stringliteral">&quot;&amp;quot;&lt;a href=\&quot;{$_sAppUrl}\&quot;&gt;{$this-&gt;m_oResult-&gt;FullName}&lt;/a&gt;&amp;quot;&quot;</span>,
                        <span class="stringliteral">&#39;quiz_result_full&#39;</span> =&gt; $this-&gt;m_oResult-&gt;Description . <span class="stringliteral">&quot;&lt;br /&gt;&lt;br /&gt;&lt;a href=\&quot;{$_sAppUrl}\&quot;&gt;Why not take the quiz yourself?&lt;/a&gt;&quot;</span>,
                        <span class="stringliteral">&#39;images&#39;</span> =&gt; <a class="code" href="admin_8php.html#a2394bd91cde70158acb50a4a7f860ab5">array</a>( <a class="code" href="admin_8php.html#a2394bd91cde70158acb50a4a7f860ab5">array</a>( <span class="stringliteral">&#39;src&#39;</span> =&gt; $this-&gt;m_oResult-&gt;ImageUrl, <span class="stringliteral">&#39;href&#39;</span> =&gt; $_sAppUrl ) ),
                    );
                }
                    
                <span class="comment">//  Publish action to feed...</span>
                $sResult = $this-&gt;PFAPI-&gt;publishBundle( $_sBundleId, $arBundleData, $arTargetIds, null, 2 );
            }
        }
        <span class="keywordflow">catch</span> ( Exception $_ex )
        {
            error_log( <span class="stringliteral">&#39;Error publishing bundle id &#39;</span> . $_sBundleId . <span class="stringliteral">&#39;: &#39;</span> . $_ex-&gt;getMessage() );
        }
    }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a83d6db3f4e5f36ddd8adad2f53133e76"></a><!-- doxytag: member="CSFBaseApplication::redirect" ref="a83d6db3f4e5f36ddd8adad2f53133e76" args="($sUrl)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">redirect </td>
          <td>(</td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>sUrl</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="CSFBaseApplication_8php_source.html#l00191">191</a> of file <a class="el" href="CSFBaseApplication_8php_source.html">CSFBaseApplication.php</a>.</p>

<p><div class="fragment"><pre class="fragment">    {
        $this-&gt;pfApi-&gt;redirect( $sUrl );
    }
</pre></div></p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classCSFBaseApplication_a83d6db3f4e5f36ddd8adad2f53133e76_icgraph.png" border="0" usemap="#classCSFBaseApplication_a83d6db3f4e5f36ddd8adad2f53133e76_icgraph" alt=""/></div>
<map name="classCSFBaseApplication_a83d6db3f4e5f36ddd8adad2f53133e76_icgraph" id="classCSFBaseApplication_a83d6db3f4e5f36ddd8adad2f53133e76_icgraph">
<area shape="rect" id="node3" href="classCSFBaseApplication.html#a6deb2041e7ee4cbb3511c0f5a7ea8a03" title="inviteRedirect" alt="" coords="177,5,284,35"/><area shape="rect" id="node5" href="classCSFBaseApplication.html#aed904ee937df5c26c42b9995d2e3a69b" title="processApplicationCommand" alt="" coords="127,59,335,88"/><area shape="rect" id="node7" href="classCSFBaseApplication.html#aa40909289ffd00ccc071d938f586fc47" title="processQueryString" alt="" coords="385,59,532,88"/><area shape="rect" id="node9" href="classCSFBaseApplication.html#a4be4055f3361d4800e16bc2e2e38cda6" title="init" alt="" coords="583,59,623,88"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a3978cc0d9152ece4cd315601a95a38bd"></a><!-- doxytag: member="CSFBaseApplication::setRefHandle" ref="a3978cc0d9152ece4cd315601a95a38bd" args="($sFBML)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">setRefHandle </td>
          <td>(</td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>sFBML</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="CSFBaseApplication_8php_source.html#l00218">218</a> of file <a class="el" href="CSFBaseApplication_8php_source.html">CSFBaseApplication.php</a>.</p>

<p><div class="fragment"><pre class="fragment">    {
        $this-&gt;pfApi-&gt;setRefHandle( $sFBML );
    }
</pre></div></p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>/usr/local/yiixl/lib/original/components/snowframe/base/<a class="el" href="CSFBaseApplication_8php_source.html">CSFBaseApplication.php</a></li>
</ul>
</div>
<hr class="footer"/><address class="footer"><small>Generated on Thu Mar 24 2011 20:11:43 for "The Yii Extension Library Of Doom!" by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.1 </small></address>
</body>
</html>
