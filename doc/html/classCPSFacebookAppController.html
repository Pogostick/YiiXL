<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>&quot;The Yii Extension Library Of Doom!&quot;: CPSFacebookAppController Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.7.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul class="tablist">
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li><a href="classes.html"><span>Data&nbsp;Structure&nbsp;Index</span></a></li>
      <li><a href="hierarchy.html"><span>Class&nbsp;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Data&nbsp;Fields</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-attribs">Data Fields</a> &#124;
<a href="#pro-methods">Protected Member Functions</a> &#124;
<a href="#pro-attribs">Protected Attributes</a>  </div>
  <div class="headertitle">
<h1>CPSFacebookAppController Class Reference</h1>  </div>
</div>
<div class="contents">
<!-- doxytag: class="CPSFacebookAppController" --><!-- doxytag: inherits="CPSController" --><div class="dynheader">
Inheritance diagram for CPSFacebookAppController:</div>
<div class="dyncontent">
<div class="center"><img src="classCPSFacebookAppController__inherit__graph.png" border="0" usemap="#CPSFacebookAppController_inherit__map" alt="Inheritance graph"/></div>
<map name="CPSFacebookAppController_inherit__map" id="CPSFacebookAppController_inherit__map">
<area shape="rect" id="node2" href="classCPSController.html" title="CPSController" alt="" coords="48,83,157,112"/><area shape="rect" id="node4" href="interfaceIPSBase.html" title="IPSBase" alt="" coords="65,5,140,35"/></map>
<center><span class="legend">[<a target="top" href="graph_legend.html">legend</a>]</span></center></div>
<div class="dynheader">
Collaboration diagram for CPSFacebookAppController:</div>
<div class="dyncontent">
<div class="center"><img src="classCPSFacebookAppController__coll__graph.png" border="0" usemap="#CPSFacebookAppController_coll__map" alt="Collaboration graph"/></div>
<map name="CPSFacebookAppController_coll__map" id="CPSFacebookAppController_coll__map">
<area shape="rect" id="node2" href="classCPSController.html" title="CPSController" alt="" coords="48,83,157,112"/><area shape="rect" id="node4" href="interfaceIPSBase.html" title="IPSBase" alt="" coords="65,5,140,35"/></map>
<center><span class="legend">[<a target="top" href="graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCPSFacebookAppController.html#a0b280ce1a525781c8943e5101471a6c0">getUserModelClass</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCPSFacebookAppController.html#ae0af15a6b8117c8e984beae8e585fcd2">setUserModelClass</a> ($value)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCPSFacebookAppController.html#a0588504e111b21b1e1380b70ebe30b2f">getFacebookApi</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCPSFacebookAppController.html#a8d0c4e1299abe333956fca30fdc44143">getIdentity</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCPSFacebookAppController.html#a5d251c70a3f9f9daaff7f00ec5f894c0">getAccessToken</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCPSFacebookAppController.html#a4455e1688e73f1dba89f3f74d1334937">getLogoutUrl</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCPSFacebookAppController.html#a37af09a26efc969d1381851b8c379808">getLoginUrl</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCPSFacebookAppController.html#aefa4c5bd150e2a7d525576d7959c6911">getSession</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCPSFacebookAppController.html#aab9fd8efbb71dfc96d46f37bf13f95dc">getIsDeauthRequest</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCPSFacebookAppController.html#a4be4055f3361d4800e16bc2e2e38cda6">init</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCPSFacebookAppController.html#afe5dbb3e026bc3bfdecbd539025c7f93">filters</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCPSFacebookAppController.html#a06b9943f26298eca9387c6099343b938">accessRules</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCPSFacebookAppController.html#ae955b1cdd5f2adcae90f9e744d8cc7a6">actionIndex</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCPSFacebookAppController.html#a251c5654a2fa56e2db1fed76f1213e18">actionAdmin</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCPSFacebookAppController.html#a0781439fc2f14283719e441f1ca2b73e">actionInviteComplete</a> ($queryParam= 'ids')</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCPSFacebookAppController.html#ae81ecfd4dd63d17b0e8eec3c2179bf0f">actionDeauthorize</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCPSFacebookAppController.html#ab2ff8b9313c96e3605f730f21f29b384">actionInviteFriends</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCPSFacebookAppController.html#a8471fa2c95307d608c34f15dae47d254">actionError</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCPSFacebookAppController.html#a023e71297825d72b643617f9fdf25355">onFacebookLogin</a> (CEvent $event)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCPSFacebookAppController.html#ab64866966afd63a8e70d4d3693dd728b">facebookLogin</a> (CEvent $event)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCPSFacebookAppController.html#a790701ff73be7c0b993611e88baed25d">getFbUserName</a> ($fbUserId)</td></tr>
<tr><td colspan="2"><h2><a name="pub-attribs"></a>
Data Fields</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">const&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCPSFacebookAppController.html#a92f90cffdcf9bdc7042c27210d7bf711">MAX_FRIENDS_TO_SHOW</a> = 7</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">const&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCPSFacebookAppController.html#a758c150b67e476ecf77478f16b387c61">DEBUG</a> = false</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">const&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCPSFacebookAppController.html#aa59dac68626789b109ad0c18e6fbb96e">USE_CACHE</a> = false</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">const&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCPSFacebookAppController.html#a70840ece73140159e9b08da06002ae3a">IS_CANVAS</a> = true</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">const&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCPSFacebookAppController.html#ac3a66a3e0e2e675b4aa12dec472b8dd0">IS_CONNECT</a> = false</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">const&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCPSFacebookAppController.html#a68a34ece4de56a54f4f82c474c0204d7">THUMB_CACHE</a> = 'thumb_cache'</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">const&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCPSFacebookAppController.html#a33ac1db1c172ba0f5722c97f00af34d6">FRIEND_CACHE</a> = 'friend_cache'</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">const&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCPSFacebookAppController.html#a1893848deeea686e915dd2151301e807">APP_FRIEND_CACHE</a> = 'app_friend_cache'</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">const&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCPSFacebookAppController.html#a566d4822d1e8b1e6a916007a2be84878">PROFILE_CACHE</a> = 'profile_cache'</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">const&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCPSFacebookAppController.html#a3fefc47757aedf92a1e71a894503a9e0">ME_CACHE</a> = 'me_cache'</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">const&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCPSFacebookAppController.html#a52c5815c1a32c4d4e554abd7c6071f56">FL_CACHE</a> = 'fl_cache'</td></tr>
<tr><td colspan="2"><h2><a name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCPSFacebookAppController.html#ac7d88d5e0b0fb564c0e1ae69167e8449">_initializeFacebook</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCPSFacebookAppController.html#aef66ca6a78a6289bce2ba881bf575b12">_getRssFeed</a> ($items=5)</td></tr>
<tr><td colspan="2"><h2><a name="pro-attribs"></a>
Protected Attributes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCPSFacebookAppController.html#a86b918c4cc90bae631b0f42b136d3a3c">$_userModelClass</a> = 'User'</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCPSFacebookAppController.html#a2f481ea63815c4c7e8c6dad8b4d839ec">$_facebookApi</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCPSFacebookAppController.html#a5584acee1fc0d8fbc8970705ce8795cf">$_identity</a> = null</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCPSFacebookAppController.html#a4baf52b9d7a98e5d1354c0184a030233">$_accessToken</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCPSFacebookAppController.html#a51fb44c62c03238ce850844bb9835e9a">$_logoutUrl</a> = ''</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCPSFacebookAppController.html#ad0039d9d92917bd2c7e46c93d8562b8b">$_loginUrl</a> = ''</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCPSFacebookAppController.html#ad0641deaf4d314f034a134efaa6fbff0">$_session</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCPSFacebookAppController.html#a0363ec28009b511c07f346dd1b889afb">$_isDeauthRequest</a> = false</td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>

<p>Definition at line <a class="el" href="CPSFacebookAppController_8php_source.html#l00043">43</a> of file <a class="el" href="CPSFacebookAppController_8php_source.html">CPSFacebookAppController.php</a>.</p>
<hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="aef66ca6a78a6289bce2ba881bf575b12"></a><!-- doxytag: member="CPSFacebookAppController::_getRssFeed" ref="aef66ca6a78a6289bce2ba881bf575b12" args="($items=5)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">_getRssFeed </td>
          <td>(</td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>items</em> = <code>5</code></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Returns an RSS feed </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>integer</em>&nbsp;</td><td>items to return </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="CPSFacebookAppController_8php_source.html#l00361">361</a> of file <a class="el" href="CPSFacebookAppController_8php_source.html">CPSFacebookAppController.php</a>.</p>

<p><div class="fragment"><pre class="fragment">    {
    }
</pre></div></p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classCPSFacebookAppController_aef66ca6a78a6289bce2ba881bf575b12_icgraph.png" border="0" usemap="#classCPSFacebookAppController_aef66ca6a78a6289bce2ba881bf575b12_icgraph" alt=""/></div>
<map name="classCPSFacebookAppController_aef66ca6a78a6289bce2ba881bf575b12_icgraph" id="classCPSFacebookAppController_aef66ca6a78a6289bce2ba881bf575b12_icgraph">
<area shape="rect" id="node3" href="classCPSFacebookAppController.html#a4be4055f3361d4800e16bc2e2e38cda6" title="init" alt="" coords="159,5,199,35"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ac7d88d5e0b0fb564c0e1ae69167e8449"></a><!-- doxytag: member="CPSFacebookAppController::_initializeFacebook" ref="ac7d88d5e0b0fb564c0e1ae69167e8449" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">_initializeFacebook </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Initialize the Facebook stuff </p>
<dl class="return"><dt><b>Returns:</b></dt><dd>boolean </dd></dl>

<p>Definition at line <a class="el" href="CPSFacebookAppController_8php_source.html#l00333">333</a> of file <a class="el" href="CPSFacebookAppController_8php_source.html">CPSFacebookAppController.php</a>.</p>

<p><div class="fragment"><pre class="fragment">    {
        <span class="comment">//  Create the api object</span>
        $this-&gt;_facebookApi = PS::_gco( <span class="stringliteral">&#39;facebook&#39;</span> );

        <span class="comment">//  Get the login url</span>
        $this-&gt;_loginUrl = $this-&gt;_facebookApi-&gt;getLoginUrl(
            <a class="code" href="admin_8php.html#a2394bd91cde70158acb50a4a7f860ab5">array</a>(
                <span class="stringliteral">&#39;canvas&#39;</span> =&gt; self::IS_CANVAS,
                <span class="stringliteral">&#39;fbconnect&#39;</span> =&gt; self::IS_CONNECT,
                <span class="stringliteral">&#39;req_perms&#39;</span> =&gt; $this-&gt;_facebookApi-&gt;getAppPermissions(),
            )
        );

        PS::_ss(
            <span class="stringliteral">&#39;_currentIdentity&#39;</span>,
            $this-&gt;_identity = <span class="keyword">new</span> <a class="code" href="classCPSFacebookUserIdentity.html">CPSFacebookUserIdentity</a>(
                $this-&gt;_facebookApi,
                $this-&gt;_loginUrl,
                $this-&gt;_userModelClass
            )
        );
    }
</pre></div></p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classCPSFacebookAppController_ac7d88d5e0b0fb564c0e1ae69167e8449_icgraph.png" border="0" usemap="#classCPSFacebookAppController_ac7d88d5e0b0fb564c0e1ae69167e8449_icgraph" alt=""/></div>
<map name="classCPSFacebookAppController_ac7d88d5e0b0fb564c0e1ae69167e8449_icgraph" id="classCPSFacebookAppController_ac7d88d5e0b0fb564c0e1ae69167e8449_icgraph">
<area shape="rect" id="node3" href="classCPSFacebookAppController.html#a4be4055f3361d4800e16bc2e2e38cda6" title="init" alt="" coords="196,5,236,35"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a06b9943f26298eca9387c6099343b938"></a><!-- doxytag: member="CPSFacebookAppController::accessRules" ref="a06b9943f26298eca9387c6099343b938" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">accessRules </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>The base access rules for our CRUD controller</p>
<dl class="return"><dt><b>Returns:</b></dt><dd>array Access control rules </dd></dl>

<p>Definition at line <a class="el" href="CPSFacebookAppController_8php_source.html#l00184">184</a> of file <a class="el" href="CPSFacebookAppController_8php_source.html">CPSFacebookAppController.php</a>.</p>

<p><div class="fragment"><pre class="fragment">    {
        <span class="comment">//  The base rules allow only authorized users</span>
        <span class="keywordflow">return</span> <a class="code" href="admin_8php.html#a2394bd91cde70158acb50a4a7f860ab5">array</a>(
            <a class="code" href="admin_8php.html#a2394bd91cde70158acb50a4a7f860ab5">array</a>( <span class="stringliteral">&#39;allow&#39;</span>,
                <span class="stringliteral">&#39;actions&#39;</span> =&gt; <a class="code" href="admin_8php.html#a2394bd91cde70158acb50a4a7f860ab5">array</a>( <span class="charliteral">&#39;*&#39;</span> ),
                <span class="stringliteral">&#39;users&#39;</span> =&gt; <a class="code" href="admin_8php.html#a2394bd91cde70158acb50a4a7f860ab5">array</a>( <span class="charliteral">&#39;@&#39;</span> ),
            ),
        );
    }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a251c5654a2fa56e2db1fed76f1213e18"></a><!-- doxytag: member="CPSFacebookAppController::actionAdmin" ref="a251c5654a2fa56e2db1fed76f1213e18" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">actionAdmin </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Admin page </p>

<p>Definition at line <a class="el" href="CPSFacebookAppController_8php_source.html#l00210">210</a> of file <a class="el" href="CPSFacebookAppController_8php_source.html">CPSFacebookAppController.php</a>.</p>

<p><div class="fragment"><pre class="fragment">    {
        $this-&gt;layout = <span class="stringliteral">&#39;admin&#39;</span>;
        <span class="keywordflow">if</span> ( null !== ( $_user = PS::_gs( <span class="stringliteral">&#39;currentUser&#39;</span> ) ) )
            $this-&gt;render( ( $_user &amp;&amp; $_user-&gt;admin_level_nbr != 0 ) ? <span class="stringliteral">&#39;admin&#39;</span> : <span class="stringliteral">&#39;index&#39;</span> );
    }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ae81ecfd4dd63d17b0e8eec3c2179bf0f"></a><!-- doxytag: member="CPSFacebookAppController::actionDeauthorize" ref="ae81ecfd4dd63d17b0e8eec3c2179bf0f" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">actionDeauthorize </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Called when user removes app and/or permissions </p>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000009">Todo:</a></b></dt><dd>when Facebook fixes their shit and actually send a user id along with this, it will be useful. </dd></dl>

<p>Definition at line <a class="el" href="CPSFacebookAppController_8php_source.html#l00239">239</a> of file <a class="el" href="CPSFacebookAppController_8php_source.html">CPSFacebookAppController.php</a>.</p>

<p><div class="fragment"><pre class="fragment">    {
        <span class="keywordflow">if</span> ( defined( <span class="stringliteral">&#39;PYE_TRACE_LEVEL&#39;</span> ) &amp;&amp; PYE_TRACE_LEVEL &gt; 3 )
            <a class="code" href="classCPSLog.html#ab8a624f93a0bfc699dd00c01af886955">CPSLog::trace</a>( __METHOD__, <span class="stringliteral">&#39;Deauth request: &#39;</span> . print_r( $_REQUEST, <span class="keyword">true</span> ) );

        $this-&gt;layout = <span class="keyword">false</span>;

        <span class="comment">//  Reset!</span>
        <span class="keywordflow">if</span> ( null !== ( $_user = PS::_gs( <span class="stringliteral">&#39;currentUser&#39;</span> ) ) )
        {
            $_user-&gt;app_del_date = date( <span class="stringliteral">&#39;Y-m-d H:i:s&#39;</span> );
            $_user-&gt;app_del_count_nbr += 1;
            $_user-&gt;access_token_text = null;
            $_user-&gt;session_key_text = null;
            $_user-&gt;update( <a class="code" href="admin_8php.html#a2394bd91cde70158acb50a4a7f860ab5">array</a>( <span class="stringliteral">&#39;app_del_date&#39;</span>, <span class="stringliteral">&#39;app_del_count_nbr&#39;</span>, <span class="stringliteral">&#39;access_token_text&#39;</span>, <span class="stringliteral">&#39;session_key_text&#39;</span> ) );
        }
    }
</pre></div></p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classCPSFacebookAppController_ae81ecfd4dd63d17b0e8eec3c2179bf0f_cgraph.png" border="0" usemap="#classCPSFacebookAppController_ae81ecfd4dd63d17b0e8eec3c2179bf0f_cgraph" alt=""/></div>
<map name="classCPSFacebookAppController_ae81ecfd4dd63d17b0e8eec3c2179bf0f_cgraph" id="classCPSFacebookAppController_ae81ecfd4dd63d17b0e8eec3c2179bf0f_cgraph">
<area shape="rect" id="node3" href="classCPSLog.html#ab8a624f93a0bfc699dd00c01af886955" title="CPSLog::trace" alt="" coords="192,32,304,61"/><area shape="rect" id="node5" href="classCPSLog.html#a4c3be4120dc6dee2c97a6dde9428ac76" title="CPSLog::log" alt="" coords="352,32,451,61"/><area shape="rect" id="node7" href="classCPSLog.html#a66291d27410fbf7ba4978f513c13e6f0" title="CPSLog::_getCallingMethod" alt="" coords="499,5,696,35"/><area shape="rect" id="node9" href="classCPSLog.html#a8471574061e9457cc6e5be7c151b9cfb" title="CPSLog::_processMessage" alt="" coords="501,59,693,88"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a8471fa2c95307d608c34f15dae47d254"></a><!-- doxytag: member="CPSFacebookAppController::actionError" ref="a8471fa2c95307d608c34f15dae47d254" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">actionError </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>This is the action to handle external exceptions. </p>

<p>Reimplemented from <a class="el" href="classCPSController.html#a8471fa2c95307d608c34f15dae47d254">CPSController</a>.</p>

<p>Definition at line <a class="el" href="CPSFacebookAppController_8php_source.html#l00268">268</a> of file <a class="el" href="CPSFacebookAppController_8php_source.html">CPSFacebookAppController.php</a>.</p>

<p><div class="fragment"><pre class="fragment">    {
        <span class="keywordflow">if</span> ( $error = Yii::app()-&gt;errorHandler-&gt;error )
        {
            <span class="keywordflow">if</span> ( Yii::app()-&gt;request-&gt;isAjaxRequest )
            {
                $this-&gt;layout = <span class="keyword">false</span>;
                echo $error[<span class="stringliteral">&#39;message&#39;</span>];
                <span class="keywordflow">return</span>;
            }

            $this-&gt;render( <span class="stringliteral">&#39;error&#39;</span>, $error );
        }
    }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ae955b1cdd5f2adcae90f9e744d8cc7a6"></a><!-- doxytag: member="CPSFacebookAppController::actionIndex" ref="ae955b1cdd5f2adcae90f9e744d8cc7a6" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">actionIndex </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Home page </p>

<p>Definition at line <a class="el" href="CPSFacebookAppController_8php_source.html#l00202">202</a> of file <a class="el" href="CPSFacebookAppController_8php_source.html">CPSFacebookAppController.php</a>.</p>

<p><div class="fragment"><pre class="fragment">    {
        $this-&gt;render( <span class="stringliteral">&#39;index&#39;</span> );
    }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a0781439fc2f14283719e441f1ca2b73e"></a><!-- doxytag: member="CPSFacebookAppController::actionInviteComplete" ref="a0781439fc2f14283719e441f1ca2b73e" args="($queryParam= 'ids')" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">actionInviteComplete </td>
          <td>(</td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>queryParam</em> = <code>'ids'</code></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Called after invitations have been sent. </p>

<p>Definition at line <a class="el" href="CPSFacebookAppController_8php_source.html#l00220">220</a> of file <a class="el" href="CPSFacebookAppController_8php_source.html">CPSFacebookAppController.php</a>.</p>

<p><div class="fragment"><pre class="fragment">    {
        <span class="keywordflow">if</span> ( defined( <span class="stringliteral">&#39;PYE_TRACE_LEVEL&#39;</span> ) &amp;&amp; PYE_TRACE_LEVEL &gt; 3 )
            <a class="code" href="classCPSLog.html#ab8a624f93a0bfc699dd00c01af886955">CPSLog::trace</a>( __METHOD__, <span class="stringliteral">&#39;Invite complete: &#39;</span> . print_r( $_REQUEST, <span class="keyword">true</span> ) );

        <span class="comment">//  $_POST[&#39;ids&#39;] is an array of invited friends...</span>
        <span class="keywordflow">if</span> ( null !== ( $_user = PS::_gs( <span class="stringliteral">&#39;currentUser&#39;</span> ) ) )
        {
            $_user-&gt;invite_count_nbr += count( PS::o( $_REQUEST, $queryParam, <a class="code" href="admin_8php.html#a2394bd91cde70158acb50a4a7f860ab5">array</a>() ) );
            $_user-&gt;update( <a class="code" href="admin_8php.html#a2394bd91cde70158acb50a4a7f860ab5">array</a>( <span class="stringliteral">&#39;invite_count_nbr&#39;</span> ) );
        }

        $this-&gt;redirect( PS::_gp( <span class="stringliteral">&#39;appUrl&#39;</span> ) );
    }
</pre></div></p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classCPSFacebookAppController_a0781439fc2f14283719e441f1ca2b73e_cgraph.png" border="0" usemap="#classCPSFacebookAppController_a0781439fc2f14283719e441f1ca2b73e_cgraph" alt=""/></div>
<map name="classCPSFacebookAppController_a0781439fc2f14283719e441f1ca2b73e_cgraph" id="classCPSFacebookAppController_a0781439fc2f14283719e441f1ca2b73e_cgraph">
<area shape="rect" id="node3" href="classCPSLog.html#ab8a624f93a0bfc699dd00c01af886955" title="CPSLog::trace" alt="" coords="211,32,323,61"/><area shape="rect" id="node5" href="classCPSLog.html#a4c3be4120dc6dee2c97a6dde9428ac76" title="CPSLog::log" alt="" coords="371,32,469,61"/><area shape="rect" id="node7" href="classCPSLog.html#a66291d27410fbf7ba4978f513c13e6f0" title="CPSLog::_getCallingMethod" alt="" coords="517,5,715,35"/><area shape="rect" id="node9" href="classCPSLog.html#a8471574061e9457cc6e5be7c151b9cfb" title="CPSLog::_processMessage" alt="" coords="520,59,712,88"/></map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classCPSFacebookAppController_a0781439fc2f14283719e441f1ca2b73e_icgraph.png" border="0" usemap="#classCPSFacebookAppController_a0781439fc2f14283719e441f1ca2b73e_icgraph" alt=""/></div>
<map name="classCPSFacebookAppController_a0781439fc2f14283719e441f1ca2b73e_icgraph" id="classCPSFacebookAppController_a0781439fc2f14283719e441f1ca2b73e_icgraph">
<area shape="rect" id="node3" href="classCPSFacebookAppController.html#a4be4055f3361d4800e16bc2e2e38cda6" title="init" alt="" coords="212,5,252,35"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ab2ff8b9313c96e3605f730f21f29b384"></a><!-- doxytag: member="CPSFacebookAppController::actionInviteFriends" ref="ab2ff8b9313c96e3605f730f21f29b384" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">actionInviteFriends </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Invite page </p>

<p>Definition at line <a class="el" href="CPSFacebookAppController_8php_source.html#l00260">260</a> of file <a class="el" href="CPSFacebookAppController_8php_source.html">CPSFacebookAppController.php</a>.</p>

<p><div class="fragment"><pre class="fragment">    {
        $this-&gt;render( <span class="stringliteral">&#39;index&#39;</span> );
    }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ab64866966afd63a8e70d4d3693dd728b"></a><!-- doxytag: member="CPSFacebookAppController::facebookLogin" ref="ab64866966afd63a8e70d4d3693dd728b" args="(CEvent $event)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">facebookLogin </td>
          <td>(</td>
          <td class="paramtype">CEvent $&nbsp;</td>
          <td class="paramname"> <em>event</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>facebookLogin event handler stub </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>CEvent</em>&nbsp;</td><td>$event </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>boolean </dd></dl>

<p>Definition at line <a class="el" href="CPSFacebookAppController_8php_source.html#l00301">301</a> of file <a class="el" href="CPSFacebookAppController_8php_source.html">CPSFacebookAppController.php</a>.</p>

<p><div class="fragment"><pre class="fragment">    {
        <span class="keywordflow">return</span> <span class="keyword">true</span>;
    }
</pre></div></p>

</div>
</div>
<a class="anchor" id="afe5dbb3e026bc3bfdecbd539025c7f93"></a><!-- doxytag: member="CPSFacebookAppController::filters" ref="afe5dbb3e026bc3bfdecbd539025c7f93" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">filters </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>The filters for this controller</p>
<dl class="return"><dt><b>Returns:</b></dt><dd>array Action filters </dd></dl>

<p>Definition at line <a class="el" href="CPSFacebookAppController_8php_source.html#l00169">169</a> of file <a class="el" href="CPSFacebookAppController_8php_source.html">CPSFacebookAppController.php</a>.</p>

<p><div class="fragment"><pre class="fragment">    {
        <span class="keywordflow">if</span> ( PS::isCLI() ) <span class="keywordflow">return</span> <a class="code" href="admin_8php.html#a2394bd91cde70158acb50a4a7f860ab5">array</a>();

        <span class="comment">//  Perform access control for CRUD operations</span>
        <span class="keywordflow">return</span> <a class="code" href="admin_8php.html#a2394bd91cde70158acb50a4a7f860ab5">array</a>(
            <span class="stringliteral">&#39;accessControl&#39;</span>,
        );
    }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a5d251c70a3f9f9daaff7f00ec5f894c0"></a><!-- doxytag: member="CPSFacebookAppController::getAccessToken" ref="a5d251c70a3f9f9daaff7f00ec5f894c0" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">getAccessToken </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="CPSFacebookAppController_8php_source.html#l00092">92</a> of file <a class="el" href="CPSFacebookAppController_8php_source.html">CPSFacebookAppController.php</a>.</p>

<p><div class="fragment"><pre class="fragment">{ <span class="keywordflow">return</span> $this-&gt;_accessToken; }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a0588504e111b21b1e1380b70ebe30b2f"></a><!-- doxytag: member="CPSFacebookAppController::getFacebookApi" ref="a0588504e111b21b1e1380b70ebe30b2f" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">getFacebookApi </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="CPSFacebookAppController_8php_source.html#l00080">80</a> of file <a class="el" href="CPSFacebookAppController_8php_source.html">CPSFacebookAppController.php</a>.</p>

<p><div class="fragment"><pre class="fragment">{ <span class="keywordflow">return</span> $this-&gt;_facebookApi; }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a790701ff73be7c0b993611e88baed25d"></a><!-- doxytag: member="CPSFacebookAppController::getFbUserName" ref="a790701ff73be7c0b993611e88baed25d" args="($fbUserId)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">getFbUserName </td>
          <td>(</td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>fbUserId</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="CPSFacebookAppController_8php_source.html#l00306">306</a> of file <a class="el" href="CPSFacebookAppController_8php_source.html">CPSFacebookAppController.php</a>.</p>

<p><div class="fragment"><pre class="fragment">    {
        <span class="keywordflow">try</span>
        {
            <span class="keywordflow">if</span> ( $this-&gt;_identity &amp;&amp; $this-&gt;_identity-&gt;getFBUserId() == $fbUserId )
                <span class="keywordflow">return</span> <span class="stringliteral">&#39;You&#39;</span>;

            $_user = json_decode( file_get_contents( <span class="stringliteral">&#39;https://graph.facebook.com/&#39;</span> . $fbUserId ) );

            <span class="keywordflow">if</span> ( $_user )
                <span class="keywordflow">return</span> trim( $_user-&gt;first_name . <span class="charliteral">&#39; &#39;</span> . $_user-&gt;last_name );
        }
        <span class="keywordflow">catch</span> ( Exception $_ex )
        {
        }

        <span class="keywordflow">return</span> <span class="stringliteral">&#39;Facebook User&#39;</span>;
    }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a8d0c4e1299abe333956fca30fdc44143"></a><!-- doxytag: member="CPSFacebookAppController::getIdentity" ref="a8d0c4e1299abe333956fca30fdc44143" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">getIdentity </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="CPSFacebookAppController_8php_source.html#l00086">86</a> of file <a class="el" href="CPSFacebookAppController_8php_source.html">CPSFacebookAppController.php</a>.</p>

<p><div class="fragment"><pre class="fragment">{ <span class="keywordflow">return</span> $this-&gt;_identity; }
</pre></div></p>

</div>
</div>
<a class="anchor" id="aab9fd8efbb71dfc96d46f37bf13f95dc"></a><!-- doxytag: member="CPSFacebookAppController::getIsDeauthRequest" ref="aab9fd8efbb71dfc96d46f37bf13f95dc" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">getIsDeauthRequest </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="CPSFacebookAppController_8php_source.html#l00116">116</a> of file <a class="el" href="CPSFacebookAppController_8php_source.html">CPSFacebookAppController.php</a>.</p>

<p><div class="fragment"><pre class="fragment">{ <span class="keywordflow">return</span> $this-&gt;_isDeauthRequest; }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a37af09a26efc969d1381851b8c379808"></a><!-- doxytag: member="CPSFacebookAppController::getLoginUrl" ref="a37af09a26efc969d1381851b8c379808" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">getLoginUrl </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="CPSFacebookAppController_8php_source.html#l00104">104</a> of file <a class="el" href="CPSFacebookAppController_8php_source.html">CPSFacebookAppController.php</a>.</p>

<p><div class="fragment"><pre class="fragment">{ <span class="keywordflow">return</span> $this-&gt;_loginUrl; }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a4455e1688e73f1dba89f3f74d1334937"></a><!-- doxytag: member="CPSFacebookAppController::getLogoutUrl" ref="a4455e1688e73f1dba89f3f74d1334937" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">getLogoutUrl </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="CPSFacebookAppController_8php_source.html#l00098">98</a> of file <a class="el" href="CPSFacebookAppController_8php_source.html">CPSFacebookAppController.php</a>.</p>

<p><div class="fragment"><pre class="fragment">{ <span class="keywordflow">return</span> $this-&gt;_logoutUrl; }
</pre></div></p>

</div>
</div>
<a class="anchor" id="aefa4c5bd150e2a7d525576d7959c6911"></a><!-- doxytag: member="CPSFacebookAppController::getSession" ref="aefa4c5bd150e2a7d525576d7959c6911" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">getSession </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="CPSFacebookAppController_8php_source.html#l00110">110</a> of file <a class="el" href="CPSFacebookAppController_8php_source.html">CPSFacebookAppController.php</a>.</p>

<p><div class="fragment"><pre class="fragment">{ <span class="keywordflow">return</span> $this-&gt;_session; }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a0b280ce1a525781c8943e5101471a6c0"></a><!-- doxytag: member="CPSFacebookAppController::getUserModelClass" ref="a0b280ce1a525781c8943e5101471a6c0" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">getUserModelClass </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="CPSFacebookAppController_8php_source.html#l00072">72</a> of file <a class="el" href="CPSFacebookAppController_8php_source.html">CPSFacebookAppController.php</a>.</p>

<p><div class="fragment"><pre class="fragment">{ <span class="keywordflow">return</span> $this-&gt;_userModelClass; }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a4be4055f3361d4800e16bc2e2e38cda6"></a><!-- doxytag: member="CPSFacebookAppController::init" ref="a4be4055f3361d4800e16bc2e2e38cda6" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">init </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Initialize </p>

<p>Reimplemented from <a class="el" href="classCPSController.html#a4be4055f3361d4800e16bc2e2e38cda6">CPSController</a>.</p>

<p>Definition at line <a class="el" href="CPSFacebookAppController_8php_source.html#l00125">125</a> of file <a class="el" href="CPSFacebookAppController_8php_source.html">CPSFacebookAppController.php</a>.</p>

<p><div class="fragment"><pre class="fragment">    {
        <span class="comment">//  See if this is a deauth...</span>
        $this-&gt;_isDeauthRequest = ( <span class="keyword">false</span> !== strpos( $_SERVER[<span class="stringliteral">&#39;REQUEST_URI&#39;</span>], <span class="stringliteral">&#39;app/deauthorize&#39;</span> ) );

        <span class="keywordflow">if</span> ( isset( $_REQUEST[<span class="stringliteral">&#39;request_ids&#39;</span>] ) )
        {
            $this-&gt;<a class="code" href="classCPSFacebookAppController.html#a0781439fc2f14283719e441f1ca2b73e">actionInviteComplete</a>( <span class="stringliteral">&#39;request_ids&#39;</span> );
            $this-&gt;redirect( <span class="charliteral">&#39;/&#39;</span> );
        }

        <a class="code" href="classCPSFacebookAppController.html#a4be4055f3361d4800e16bc2e2e38cda6">parent::init</a>();

        <span class="comment">//  Get our identity</span>
        $this-&gt;_identity = PS::_gs( <span class="stringliteral">&#39;currentIdentity&#39;</span> );

        <span class="comment">//  Handle an rss feed</span>
        <span class="keywordflow">if</span> ( isset( $_REQUEST[ <span class="stringliteral">&#39;rss&#39;</span> ] ) )
        {
            header( <span class="stringliteral">&quot;Content-Type: application/xml; charset=ISO-8859-1&quot;</span> );
            echo $this-&gt;<a class="code" href="classCPSFacebookAppController.html#aef66ca6a78a6289bce2ba881bf575b12">_getRssFeed</a>();
            die();
        }

        <span class="comment">//  No facebook?</span>
        <span class="keywordflow">if</span> ( PS::_gs( <span class="stringliteral">&#39;standalone&#39;</span> ) || PS::o( $_REQUEST, <span class="stringliteral">&#39;standalone&#39;</span> ) )
            PS::_ss( <span class="stringliteral">&#39;standalone&#39;</span>, <span class="keyword">true</span> );

        <span class="comment">//  Set up events...</span>
        $this-&gt;<a class="code" href="classCPSFacebookAppController.html#a023e71297825d72b643617f9fdf25355">onFacebookLogin</a> = <a class="code" href="admin_8php.html#a2394bd91cde70158acb50a4a7f860ab5">array</a>( $this, <span class="stringliteral">&#39;facebookLogin&#39;</span> );

        <span class="comment">//  Ignore ajax requests...</span>
        <span class="keywordflow">if</span> ( ! Yii::app()-&gt;<a class="code" href="classCPSController.html#adf1a35ad20e475c59cc0967d5764aa22">getRequest</a>()-&gt;<a class="code" href="classCPSController.html#aed1df55c262bb0238ae6ef0921a2552b">getIsAjaxRequest</a>() )
        {
            <span class="comment">//  Set up the Facebook API</span>
            $this-&gt;<a class="code" href="classCPSFacebookAppController.html#ac7d88d5e0b0fb564c0e1ae69167e8449">_initializeFacebook</a>();
        }
    }
</pre></div></p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classCPSFacebookAppController_a4be4055f3361d4800e16bc2e2e38cda6_cgraph.png" border="0" usemap="#classCPSFacebookAppController_a4be4055f3361d4800e16bc2e2e38cda6_cgraph" alt=""/></div>
<map name="classCPSFacebookAppController_a4be4055f3361d4800e16bc2e2e38cda6_cgraph" id="classCPSFacebookAppController_a4be4055f3361d4800e16bc2e2e38cda6_cgraph">
<area shape="rect" id="node3" href="classCPSFacebookAppController.html#aef66ca6a78a6289bce2ba881bf575b12" title="_getRssFeed" alt="" coords="159,5,260,35"/><area shape="rect" id="node5" href="classCPSFacebookAppController.html#ac7d88d5e0b0fb564c0e1ae69167e8449" title="_initializeFacebook" alt="" coords="140,59,279,88"/><area shape="rect" id="node7" href="classCPSFacebookAppController.html#a0781439fc2f14283719e441f1ca2b73e" title="actionInviteComplete" alt="" coords="131,112,288,141"/><area shape="rect" id="node17" href="classCPSController.html#aed1df55c262bb0238ae6ef0921a2552b" title="CPSController::getIsAjaxRequest" alt="" coords="96,165,323,195"/><area shape="rect" id="node19" href="classCPSController.html#adf1a35ad20e475c59cc0967d5764aa22" title="CPSController::getRequest" alt="" coords="115,219,304,248"/><area shape="rect" id="node21" href="classCPSFacebookAppController.html#a023e71297825d72b643617f9fdf25355" title="onFacebookLogin" alt="" coords="144,272,275,301"/><area shape="rect" id="node9" href="classCPSLog.html#ab8a624f93a0bfc699dd00c01af886955" title="CPSLog::trace" alt="" coords="371,112,483,141"/><area shape="rect" id="node11" href="classCPSLog.html#a4c3be4120dc6dee2c97a6dde9428ac76" title="CPSLog::log" alt="" coords="531,112,629,141"/><area shape="rect" id="node13" href="classCPSLog.html#a66291d27410fbf7ba4978f513c13e6f0" title="CPSLog::_getCallingMethod" alt="" coords="677,85,875,115"/><area shape="rect" id="node15" href="classCPSLog.html#a8471574061e9457cc6e5be7c151b9cfb" title="CPSLog::_processMessage" alt="" coords="680,139,872,168"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a023e71297825d72b643617f9fdf25355"></a><!-- doxytag: member="CPSFacebookAppController::onFacebookLogin" ref="a023e71297825d72b643617f9fdf25355" args="(CEvent $event)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">onFacebookLogin </td>
          <td>(</td>
          <td class="paramtype">CEvent $&nbsp;</td>
          <td class="paramname"> <em>event</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Event: facebookLogin </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>CEvent</em>&nbsp;</td><td>$event </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="CPSFacebookAppController_8php_source.html#l00291">291</a> of file <a class="el" href="CPSFacebookAppController_8php_source.html">CPSFacebookAppController.php</a>.</p>

<p><div class="fragment"><pre class="fragment">    {
        $this-&gt;raiseEvent( <span class="stringliteral">&#39;onFacebookLogin&#39;</span>, $event );
    }
</pre></div></p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classCPSFacebookAppController_a023e71297825d72b643617f9fdf25355_icgraph.png" border="0" usemap="#classCPSFacebookAppController_a023e71297825d72b643617f9fdf25355_icgraph" alt=""/></div>
<map name="classCPSFacebookAppController_a023e71297825d72b643617f9fdf25355_icgraph" id="classCPSFacebookAppController_a023e71297825d72b643617f9fdf25355_icgraph">
<area shape="rect" id="node3" href="classCPSFacebookAppController.html#a4be4055f3361d4800e16bc2e2e38cda6" title="init" alt="" coords="188,5,228,35"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ae0af15a6b8117c8e984beae8e585fcd2"></a><!-- doxytag: member="CPSFacebookAppController::setUserModelClass" ref="ae0af15a6b8117c8e984beae8e585fcd2" args="($value)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">setUserModelClass </td>
          <td>(</td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>value</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="CPSFacebookAppController_8php_source.html#l00073">73</a> of file <a class="el" href="CPSFacebookAppController_8php_source.html">CPSFacebookAppController.php</a>.</p>

<p><div class="fragment"><pre class="fragment">{ $this-&gt;_userModelClass = $value; }
</pre></div></p>

</div>
</div>
<hr/><h2>Field Documentation</h2>
<a class="anchor" id="a4baf52b9d7a98e5d1354c0184a030233"></a><!-- doxytag: member="CPSFacebookAppController::$_accessToken" ref="a4baf52b9d7a98e5d1354c0184a030233" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">$_accessToken<code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="CPSFacebookAppController_8php_source.html#l00091">91</a> of file <a class="el" href="CPSFacebookAppController_8php_source.html">CPSFacebookAppController.php</a>.</p>

</div>
</div>
<a class="anchor" id="a2f481ea63815c4c7e8c6dad8b4d839ec"></a><!-- doxytag: member="CPSFacebookAppController::$_facebookApi" ref="a2f481ea63815c4c7e8c6dad8b4d839ec" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">$_facebookApi<code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="CPSFacebookAppController_8php_source.html#l00079">79</a> of file <a class="el" href="CPSFacebookAppController_8php_source.html">CPSFacebookAppController.php</a>.</p>

</div>
</div>
<a class="anchor" id="a5584acee1fc0d8fbc8970705ce8795cf"></a><!-- doxytag: member="CPSFacebookAppController::$_identity" ref="a5584acee1fc0d8fbc8970705ce8795cf" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">$_identity = null<code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="CPSFacebookAppController_8php_source.html#l00085">85</a> of file <a class="el" href="CPSFacebookAppController_8php_source.html">CPSFacebookAppController.php</a>.</p>

</div>
</div>
<a class="anchor" id="a0363ec28009b511c07f346dd1b889afb"></a><!-- doxytag: member="CPSFacebookAppController::$_isDeauthRequest" ref="a0363ec28009b511c07f346dd1b889afb" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">$_isDeauthRequest = false<code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="CPSFacebookAppController_8php_source.html#l00115">115</a> of file <a class="el" href="CPSFacebookAppController_8php_source.html">CPSFacebookAppController.php</a>.</p>

</div>
</div>
<a class="anchor" id="ad0039d9d92917bd2c7e46c93d8562b8b"></a><!-- doxytag: member="CPSFacebookAppController::$_loginUrl" ref="ad0039d9d92917bd2c7e46c93d8562b8b" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">$_loginUrl = ''<code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="CPSFacebookAppController_8php_source.html#l00103">103</a> of file <a class="el" href="CPSFacebookAppController_8php_source.html">CPSFacebookAppController.php</a>.</p>

</div>
</div>
<a class="anchor" id="a51fb44c62c03238ce850844bb9835e9a"></a><!-- doxytag: member="CPSFacebookAppController::$_logoutUrl" ref="a51fb44c62c03238ce850844bb9835e9a" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">$_logoutUrl = ''<code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="CPSFacebookAppController_8php_source.html#l00097">97</a> of file <a class="el" href="CPSFacebookAppController_8php_source.html">CPSFacebookAppController.php</a>.</p>

</div>
</div>
<a class="anchor" id="ad0641deaf4d314f034a134efaa6fbff0"></a><!-- doxytag: member="CPSFacebookAppController::$_session" ref="ad0641deaf4d314f034a134efaa6fbff0" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">$_session<code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="CPSFacebookAppController_8php_source.html#l00109">109</a> of file <a class="el" href="CPSFacebookAppController_8php_source.html">CPSFacebookAppController.php</a>.</p>

</div>
</div>
<a class="anchor" id="a86b918c4cc90bae631b0f42b136d3a3c"></a><!-- doxytag: member="CPSFacebookAppController::$_userModelClass" ref="a86b918c4cc90bae631b0f42b136d3a3c" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">$_userModelClass = 'User'<code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="CPSFacebookAppController_8php_source.html#l00071">71</a> of file <a class="el" href="CPSFacebookAppController_8php_source.html">CPSFacebookAppController.php</a>.</p>

</div>
</div>
<a class="anchor" id="a1893848deeea686e915dd2151301e807"></a><!-- doxytag: member="CPSFacebookAppController::APP_FRIEND_CACHE" ref="a1893848deeea686e915dd2151301e807" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="classCPSFacebookAppController.html#a1893848deeea686e915dd2151301e807">APP_FRIEND_CACHE</a> = 'app_friend_cache'</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="CPSFacebookAppController_8php_source.html#l00059">59</a> of file <a class="el" href="CPSFacebookAppController_8php_source.html">CPSFacebookAppController.php</a>.</p>

</div>
</div>
<a class="anchor" id="a758c150b67e476ecf77478f16b387c61"></a><!-- doxytag: member="CPSFacebookAppController::DEBUG" ref="a758c150b67e476ecf77478f16b387c61" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="classCPSFacebookAppController.html#a758c150b67e476ecf77478f16b387c61">DEBUG</a> = false</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="CPSFacebookAppController_8php_source.html#l00053">53</a> of file <a class="el" href="CPSFacebookAppController_8php_source.html">CPSFacebookAppController.php</a>.</p>

</div>
</div>
<a class="anchor" id="a52c5815c1a32c4d4e554abd7c6071f56"></a><!-- doxytag: member="CPSFacebookAppController::FL_CACHE" ref="a52c5815c1a32c4d4e554abd7c6071f56" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="classCPSFacebookAppController.html#a52c5815c1a32c4d4e554abd7c6071f56">FL_CACHE</a> = 'fl_cache'</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="CPSFacebookAppController_8php_source.html#l00062">62</a> of file <a class="el" href="CPSFacebookAppController_8php_source.html">CPSFacebookAppController.php</a>.</p>

</div>
</div>
<a class="anchor" id="a33ac1db1c172ba0f5722c97f00af34d6"></a><!-- doxytag: member="CPSFacebookAppController::FRIEND_CACHE" ref="a33ac1db1c172ba0f5722c97f00af34d6" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="classCPSFacebookAppController.html#a33ac1db1c172ba0f5722c97f00af34d6">FRIEND_CACHE</a> = 'friend_cache'</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="CPSFacebookAppController_8php_source.html#l00058">58</a> of file <a class="el" href="CPSFacebookAppController_8php_source.html">CPSFacebookAppController.php</a>.</p>

</div>
</div>
<a class="anchor" id="a70840ece73140159e9b08da06002ae3a"></a><!-- doxytag: member="CPSFacebookAppController::IS_CANVAS" ref="a70840ece73140159e9b08da06002ae3a" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="classCPSFacebookAppController.html#a70840ece73140159e9b08da06002ae3a">IS_CANVAS</a> = true</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="CPSFacebookAppController_8php_source.html#l00055">55</a> of file <a class="el" href="CPSFacebookAppController_8php_source.html">CPSFacebookAppController.php</a>.</p>

</div>
</div>
<a class="anchor" id="ac3a66a3e0e2e675b4aa12dec472b8dd0"></a><!-- doxytag: member="CPSFacebookAppController::IS_CONNECT" ref="ac3a66a3e0e2e675b4aa12dec472b8dd0" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="classCPSFacebookAppController.html#ac3a66a3e0e2e675b4aa12dec472b8dd0">IS_CONNECT</a> = false</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="CPSFacebookAppController_8php_source.html#l00056">56</a> of file <a class="el" href="CPSFacebookAppController_8php_source.html">CPSFacebookAppController.php</a>.</p>

</div>
</div>
<a class="anchor" id="a92f90cffdcf9bdc7042c27210d7bf711"></a><!-- doxytag: member="CPSFacebookAppController::MAX_FRIENDS_TO_SHOW" ref="a92f90cffdcf9bdc7042c27210d7bf711" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="classCPSFacebookAppController.html#a92f90cffdcf9bdc7042c27210d7bf711">MAX_FRIENDS_TO_SHOW</a> = 7</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Maximum number of photos to show </p>

<p>Definition at line <a class="el" href="CPSFacebookAppController_8php_source.html#l00052">52</a> of file <a class="el" href="CPSFacebookAppController_8php_source.html">CPSFacebookAppController.php</a>.</p>

</div>
</div>
<a class="anchor" id="a3fefc47757aedf92a1e71a894503a9e0"></a><!-- doxytag: member="CPSFacebookAppController::ME_CACHE" ref="a3fefc47757aedf92a1e71a894503a9e0" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="classCPSFacebookAppController.html#a3fefc47757aedf92a1e71a894503a9e0">ME_CACHE</a> = 'me_cache'</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="CPSFacebookAppController_8php_source.html#l00061">61</a> of file <a class="el" href="CPSFacebookAppController_8php_source.html">CPSFacebookAppController.php</a>.</p>

</div>
</div>
<a class="anchor" id="a566d4822d1e8b1e6a916007a2be84878"></a><!-- doxytag: member="CPSFacebookAppController::PROFILE_CACHE" ref="a566d4822d1e8b1e6a916007a2be84878" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="classCPSFacebookAppController.html#a566d4822d1e8b1e6a916007a2be84878">PROFILE_CACHE</a> = 'profile_cache'</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="CPSFacebookAppController_8php_source.html#l00060">60</a> of file <a class="el" href="CPSFacebookAppController_8php_source.html">CPSFacebookAppController.php</a>.</p>

</div>
</div>
<a class="anchor" id="a68a34ece4de56a54f4f82c474c0204d7"></a><!-- doxytag: member="CPSFacebookAppController::THUMB_CACHE" ref="a68a34ece4de56a54f4f82c474c0204d7" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="classCPSFacebookAppController.html#a68a34ece4de56a54f4f82c474c0204d7">THUMB_CACHE</a> = 'thumb_cache'</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="CPSFacebookAppController_8php_source.html#l00057">57</a> of file <a class="el" href="CPSFacebookAppController_8php_source.html">CPSFacebookAppController.php</a>.</p>

</div>
</div>
<a class="anchor" id="aa59dac68626789b109ad0c18e6fbb96e"></a><!-- doxytag: member="CPSFacebookAppController::USE_CACHE" ref="aa59dac68626789b109ad0c18e6fbb96e" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="classCPSFacebookAppController.html#aa59dac68626789b109ad0c18e6fbb96e">USE_CACHE</a> = false</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="CPSFacebookAppController_8php_source.html#l00054">54</a> of file <a class="el" href="CPSFacebookAppController_8php_source.html">CPSFacebookAppController.php</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>/usr/local/yiixl/lib/original/controllers/<a class="el" href="CPSFacebookAppController_8php_source.html">CPSFacebookAppController.php</a></li>
</ul>
</div>
<hr class="footer"/><address class="footer"><small>Generated on Thu Mar 24 2011 20:11:40 for "The Yii Extension Library Of Doom!" by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.1 </small></address>
</body>
</html>
