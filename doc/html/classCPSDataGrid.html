<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>&quot;The Yii Extension Library Of Doom!&quot;: CPSDataGrid Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.7.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul class="tablist">
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li><a href="classes.html"><span>Data&nbsp;Structure&nbsp;Index</span></a></li>
      <li><a href="hierarchy.html"><span>Class&nbsp;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Data&nbsp;Fields</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="#pro-static-methods">Static Protected Member Functions</a> &#124;
<a href="#pro-static-attribs">Static Protected Attributes</a>  </div>
  <div class="headertitle">
<h1>CPSDataGrid Class Reference</h1>  </div>
</div>
<div class="contents">
<!-- doxytag: class="CPSDataGrid" --><!-- doxytag: inherits="IPSBase" --><div class="dynheader">
Inheritance diagram for CPSDataGrid:</div>
<div class="dyncontent">
<div class="center"><img src="classCPSDataGrid__inherit__graph.png" border="0" usemap="#CPSDataGrid_inherit__map" alt="Inheritance graph"/></div>
<map name="CPSDataGrid_inherit__map" id="CPSDataGrid_inherit__map">
<area shape="rect" id="node2" href="interfaceIPSBase.html" title="IPSBase" alt="" coords="20,5,95,35"/></map>
<center><span class="legend">[<a target="top" href="graph_legend.html">legend</a>]</span></center></div>
<div class="dynheader">
Collaboration diagram for CPSDataGrid:</div>
<div class="dyncontent">
<div class="center"><img src="classCPSDataGrid__coll__graph.png" border="0" usemap="#CPSDataGrid_coll__map" alt="Collaboration graph"/></div>
<map name="CPSDataGrid_coll__map" id="CPSDataGrid_coll__map">
<area shape="rect" id="node2" href="interfaceIPSBase.html" title="IPSBase" alt="" coords="20,5,95,35"/></map>
<center><span class="legend">[<a target="top" href="graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCPSDataGrid.html#a714d703744491d6a840be72c0bbc4bdc">getGridOptions</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCPSDataGrid.html#a9d4cb8e1eb461643829da0b608ee73ed">setGridOptions</a> ($arValue)</td></tr>
<tr><td colspan="2"><h2><a name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCPSDataGrid.html#acd9b2a44c8b6b5aac349c4577bb0c00c">getMenuButtonType</a> ($sButton)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCPSDataGrid.html#aea971c9c726d0e1a6f345c986cca7ded">createEx</a> ($arModel, $arOptions=<a class="el" href="list_8php.html#aa3205d038c7f8feb5c9f01ac4dfadc88">array</a>())</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCPSDataGrid.html#a4f277aa7b3be8aead6d545302ac7c84b">create</a> ($sDataName, $arModel, $arColumns=<a class="el" href="list_8php.html#aa3205d038c7f8feb5c9f01ac4dfadc88">array</a>(), $arActions=<a class="el" href="list_8php.html#aa3205d038c7f8feb5c9f01ac4dfadc88">array</a>(), $oSort=null, $oPages=null, $arPagerOptions=<a class="el" href="list_8php.html#aa3205d038c7f8feb5c9f01ac4dfadc88">array</a>(), $sLinkView= 'update', $bEncode=true)</td></tr>
<tr><td colspan="2"><h2><a name="pro-static-methods"></a>
Static Protected Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCPSDataGrid.html#a7b2253a9182458ca0ad1103d6f5ac7ca">beginDataGrid</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCPSDataGrid.html#a0ae5d625361f41ef35ce201e37dc7041">getDataGridRows</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCPSDataGrid.html#ae3e67a9bbb3458e9757437db4a6d9cb1">endDataGrid</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCPSDataGrid.html#a1ca0021fa727c5725d9fd37e87372dad">appendSortArrow</a> ($sLink)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCPSDataGrid.html#a8fb3a5e29c0b628c703d714444c975b4">buildActions</a> (<a class="el" href="classCPSModel.html">CPSModel</a> $oModel)</td></tr>
<tr><td colspan="2"><h2><a name="pro-static-attribs"></a>
Static Protected Attributes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCPSDataGrid.html#a1ee8c98e418359687d96dff41468fa61">$m_iColumnCount</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCPSDataGrid.html#acd4ff83641d8c0eac7c449802d557a21">$m_arGridOptions</a> = <a class="el" href="list_8php.html#aa3205d038c7f8feb5c9f01ac4dfadc88">array</a>()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCPSDataGrid.html#a36b298be9109a11d6fc986b36831f96f">$m_arMenuButtonMap</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCPSDataGrid.html#aca9359f1c287f1fdc37313507050fe58">$m_arActionMap</a></td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>

<p>Definition at line <a class="el" href="CPSDataGrid_8php_source.html#l00022">22</a> of file <a class="el" href="CPSDataGrid_8php_source.html">CPSDataGrid.php</a>.</p>
<hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="a1ca0021fa727c5725d9fd37e87372dad"></a><!-- doxytag: member="CPSDataGrid::appendSortArrow" ref="a1ca0021fa727c5725d9fd37e87372dad" args="($sLink)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static appendSortArrow </td>
          <td>(</td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>sLink</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static, protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Appends a nice little arrow to a sort link.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>string</em>&nbsp;</td><td>$sLink </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="CPSDataGrid_8php_source.html#l00335">335</a> of file <a class="el" href="CPSDataGrid_8php_source.html">CPSDataGrid.php</a>.</p>

<p><div class="fragment"><pre class="fragment">    {
        <span class="keywordflow">return</span> $sLink;
        
        $_iPosNext = stripos( $sLink, <span class="charliteral">&#39;-&#39;</span> );
        $_iPos = stripos( $sLink, <span class="stringliteral">&#39;.desc&#39;</span> );
        
        <span class="keywordflow">if</span> ( $_iPos !== <span class="keyword">false</span> &amp;&amp; $_iPos &lt; $_iPosNext ) 
        {
            $_sDir = <span class="charliteral">&#39;s&#39;</span>;
            $_sTitle = <span class="stringliteral">&#39;Sorted Ascending&#39;</span>;
        }
        <span class="keywordflow">else</span>
        {
            $_sTitle = <span class="stringliteral">&#39;Sorted Descending&#39;</span>;
            $_sDir = <span class="charliteral">&#39;n&#39;</span>;
        }           

        <span class="keywordflow">return</span> $sLink . PS::tag( <span class="stringliteral">&#39;span&#39;</span>, <a class="code" href="admin_8php.html#a2394bd91cde70158acb50a4a7f860ab5">array</a>( <span class="stringliteral">&#39;title&#39;</span> =&gt; $_sTitle, <span class="stringliteral">&#39;class&#39;</span> =&gt; <span class="stringliteral">&quot;ui-icon ui-icon-arrowthickstop-1-{$_sDir} ps-data-grid-sort-arrow&quot;</span>  ) );
    }   
</pre></div></p>

</div>
</div>
<a class="anchor" id="a7b2253a9182458ca0ad1103d6f5ac7ca"></a><!-- doxytag: member="CPSDataGrid::beginDataGrid" ref="a7b2253a9182458ca0ad1103d6f5ac7ca" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static beginDataGrid </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static, protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Creates a data grid from options </p>
<dl class="return"><dt><b>Returns:</b></dt><dd>string </dd></dl>

<p>Definition at line <a class="el" href="CPSDataGrid_8php_source.html#l00176">176</a> of file <a class="el" href="CPSDataGrid_8php_source.html">CPSDataGrid.php</a>.</p>

<p><div class="fragment"><pre class="fragment">    {
        $oSort = PS::o( self::$m_arGridOptions, <span class="stringliteral">&#39;sort&#39;</span>, null );
        $arColumns = PS::o( self::$m_arGridOptions, <span class="stringliteral">&#39;columns&#39;</span>, <a class="code" href="admin_8php.html#a2394bd91cde70158acb50a4a7f860ab5">array</a>() );
        $arModel = PS::o( self::$m_arGridOptions, <span class="stringliteral">&#39;data&#39;</span>, null );
        $_arActions = PS::o( self::$m_arGridOptions, <span class="stringliteral">&#39;actions&#39;</span>, <a class="code" href="admin_8php.html#a2394bd91cde70158acb50a4a7f860ab5">array</a>() );
        $bAddActions = ! empty( $_arActions );
        $_sGridId = PS::o( self::$m_arGridOptions, <span class="stringliteral">&#39;id&#39;</span>, null, <span class="keyword">true</span> );
        $_sGridClass = PS::o( self::$m_arGridOptions, <span class="stringliteral">&#39;gridClass&#39;</span>, <span class="stringliteral">&#39;ps-data-grid ui-widget-content&#39;</span>, <span class="keyword">true</span> );
        
        $_sHeaders = null;
        $_oModel = is_array( $arModel ) &amp;&amp; count( $arModel ) ? current( $arModel ) : null;

        <span class="keywordflow">if</span> ( ! $_oModel &amp;&amp; null != ( $_sModelName = PS::o( self::$m_arGridOptions, <span class="stringliteral">&#39;modelName&#39;</span> ) ) )
            $_oModel = <span class="keyword">new</span> $_sModelName();

        <span class="keywordflow">foreach</span> ( $arColumns as $_sKey =&gt; $_oColumn )
        {
            $_sColumn = <a class="code" href="classCPSTransform.html#aa255554fc788af56211439af1c7d537f">CPSTransform::cleanColumn</a>( ( is_array( $_oColumn ) ? $_sKey = array_shift( $_oColumn ) : $_oColumn ) );
            <span class="keywordflow">if</span> ( $_oModel ) $_sModelLabel = $_oModel-&gt;getAttributeLabel( $_sColumn );
            $_sLabel = PS::o( $_oColumn, <span class="stringliteral">&#39;label&#39;</span>, ( $oSort ) ? self::appendSortArrow( $oSort-&gt;link( $_sColumn ) ) : ( $_sModelLabel ? $_sModelLabel : $_sColumn ), true );
            $_sHeaders .= PS::tag( <span class="stringliteral">&#39;th&#39;</span>, <a class="code" href="admin_8php.html#a2394bd91cde70158acb50a4a7f860ab5">array</a>(), $_sLabel );
            self::$m_iColumnCount++;
        }   

        <span class="keywordflow">if</span> ( $bAddActions ) 
        {
            $_sHeaders .= PS::tag( <span class="stringliteral">&#39;th&#39;</span>, <a class="code" href="admin_8php.html#a2394bd91cde70158acb50a4a7f860ab5">array</a>( <span class="stringliteral">&#39;class&#39;</span> =&gt; <span class="stringliteral">&#39;ps-actions-header&#39;</span> ), <span class="stringliteral">&#39;Actions&#39;</span> );
            self::$m_iColumnCount++;
        }
            
        <span class="comment">//  Begin our grid</span>
        $_arTableOpts = <a class="code" href="admin_8php.html#a2394bd91cde70158acb50a4a7f860ab5">array</a>(
            <span class="stringliteral">&#39;class&#39;</span> =&gt; $_sGridClass,
        );
        
        <span class="keywordflow">if</span> ( $_sGridId ) $_arTableOpts[<span class="stringliteral">&#39;id&#39;</span>] = $_sGridId;
        
        <span class="keywordflow">return</span> PS::tag( <span class="stringliteral">&#39;table&#39;</span>, $_arTableOpts, PS::tag( <span class="stringliteral">&#39;tr&#39;</span>, <a class="code" href="admin_8php.html#a2394bd91cde70158acb50a4a7f860ab5">array</a>( <span class="stringliteral">&#39;class&#39;</span> =&gt; <span class="stringliteral">&#39;ui-widget-header&#39;</span> ), $_sHeaders ), <span class="keyword">false</span> );
    }
</pre></div></p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classCPSDataGrid_a7b2253a9182458ca0ad1103d6f5ac7ca_cgraph.png" border="0" usemap="#classCPSDataGrid_a7b2253a9182458ca0ad1103d6f5ac7ca_cgraph" alt=""/></div>
<map name="classCPSDataGrid_a7b2253a9182458ca0ad1103d6f5ac7ca_cgraph" id="classCPSDataGrid_a7b2253a9182458ca0ad1103d6f5ac7ca_cgraph">
<area shape="rect" id="node3" href="classCPSTransform.html#aa255554fc788af56211439af1c7d537f" title="CPSTransform::cleanColumn" alt="" coords="168,5,371,35"/></map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classCPSDataGrid_a7b2253a9182458ca0ad1103d6f5ac7ca_icgraph.png" border="0" usemap="#classCPSDataGrid_a7b2253a9182458ca0ad1103d6f5ac7ca_icgraph" alt=""/></div>
<map name="classCPSDataGrid_a7b2253a9182458ca0ad1103d6f5ac7ca_icgraph" id="classCPSDataGrid_a7b2253a9182458ca0ad1103d6f5ac7ca_icgraph">
<area shape="rect" id="node3" href="classCPSDataGrid.html#aea971c9c726d0e1a6f345c986cca7ded" title="createEx" alt="" coords="169,5,247,35"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a8fb3a5e29c0b628c703d714444c975b4"></a><!-- doxytag: member="CPSDataGrid::buildActions" ref="a8fb3a5e29c0b628c703d714444c975b4" args="(CPSModel $oModel)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static buildActions </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCPSModel.html">CPSModel</a> $&nbsp;</td>
          <td class="paramname"> <em>oModel</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static, protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Builds an action cell</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em><a class="el" href="classCPSModel.html">CPSModel</a></em>&nbsp;</td><td>$oModel </td></tr>
  </table>
  </dd>
</dl>

<p><p>Creates a generic "action" button</p>
</p>

<p>Definition at line <a class="el" href="CPSDataGrid_8php_source.html#l00365">365</a> of file <a class="el" href="CPSDataGrid_8php_source.html">CPSDataGrid.php</a>.</p>

<p><div class="fragment"><pre class="fragment">    {
        $_oId = $_sActions = $_eAction = null;
        $_sDataName = PS::o( self::$m_arGridOptions, <span class="stringliteral">&#39;dataItemName&#39;</span>, <span class="stringliteral">&#39;item&#39;</span> );

        <span class="comment">//  Fix up link view array...</span>
        $_sLinkView = PS::o( self::$m_arGridOptions, <span class="stringliteral">&#39;linkView&#39;</span>, null );
        $_sViewName = PS::nvl( $_sLinkView, <span class="stringliteral">&#39;update&#39;</span> );
            
        $_sPK = PS::nvl( PS::o( self::$m_arGridOptions, <span class="stringliteral">&#39;pk&#39;</span> ), $oModel-&gt;getTableSchema()-&gt;primaryKey );
        $_arActions = PS::o( self::$m_arGridOptions, <span class="stringliteral">&#39;actions&#39;</span>, <a class="code" href="admin_8php.html#a2394bd91cde70158acb50a4a7f860ab5">array</a>( <span class="stringliteral">&#39;edit&#39;</span>, <span class="stringliteral">&#39;delete&#39;</span> ) );
        
        <span class="comment">//  sub options</span>
        $_arOptions = PS::o( $_arActions, <span class="stringliteral">&#39;options&#39;</span>, <a class="code" href="admin_8php.html#a2394bd91cde70158acb50a4a7f860ab5">array</a>(), <span class="keyword">true</span> );
        $_sLockColumn = PS::o( $_arOptions, <span class="stringliteral">&#39;lockColumn&#39;</span>, null, <span class="keyword">true</span> );

        <span class="comment">//  Build the actions</span>
        <span class="keywordflow">foreach</span> ( $_arActions as $_sKey =&gt; $_oParts )
        {
            $_eAction = PS::ACTION_NONE;
            $_sAction = ( is_numeric( $_oParts ) &amp;&amp; $_oParts &lt;= PS::ACTION_GENERIC ) ? self::$m_arActionMap[ $_oParts ] : $_oParts;
            $_arActionOptions = null;
            $_arLink = is_array( $_sViewName ) ? $_sViewName : <a class="code" href="admin_8php.html#a2394bd91cde70158acb50a4a7f860ab5">array</a>( $_sViewName );

            <span class="comment">//  If action is an array, first element is action, second is viewName (which can also be an array)</span>
            <span class="keywordflow">if</span> ( is_array( $_oParts ) )
            {
                <span class="keywordflow">if</span> ( isset( $_oParts[1] ) )
                {
                    $_sViewName = $_oParts[1];
                    $_arLink = is_array( $_sViewName ) ? $_sViewName : <a class="code" href="admin_8php.html#a2394bd91cde70158acb50a4a7f860ab5">array</a>( $_sViewName );
                    $_sAction = array_shift( $_oParts );
                    unset( $_oParts[1] );
                }
                <span class="keywordflow">else</span>
                {
                    <span class="comment">//  The rest art action options...</span>
                    $_arActionOptions = $_oParts;
                    $_arLink = PS::nvl( PS::o( $_arActionOptions, <span class="stringliteral">&#39;url&#39;</span> ), $_arLink );
                    <span class="keywordflow">if</span> ( ! is_array( $_arLink ) ) $_arLink = <a class="code" href="admin_8php.html#a2394bd91cde70158acb50a4a7f860ab5">array</a>( $_arLink );
                }
            }

            <span class="comment">//  Invalid action? Skip</span>
            <span class="keywordflow">if</span> ( is_numeric( $_sAction ) )
                $_eAction = intval( $_sAction );
            <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( is_array( $_sAction ) &amp;&amp; is_numeric( $_sKey ) )
                $_eAction = intval( $_sKey );
            <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( <span class="keyword">false</span> === ( $_eAction = array_search( $_sAction, self::$m_arActionMap, <span class="keyword">true</span> ) ) )
                <span class="keywordflow">continue</span>;
            
            <span class="comment">//  Skip lock actions on non-lockable columns</span>
            <span class="keywordflow">if</span> ( ! $_sLockColumn and ( $_eAction == PS::ACTION_LOCK || $_eAction == PS::ACTION_UNLOCK ) )
                <span class="keywordflow">continue</span>;
                
            <span class="comment">//  Stuff in the PK(s)</span>
            $_arLink[ $_sPK ] = $_oId = $oModel-&gt;{$_sPK};
            <span class="keywordflow">foreach</span> ( $_arLink as $_sKey =&gt; $_sValue )
            {
                <span class="keywordflow">if</span> ( 0 != preg_match( <span class="stringliteral">&#39;/\%\%(.*)+\%\%/i&#39;</span>, $_arLink[$_sKey], $_arMatch ) )
                {
                    <span class="keywordflow">if</span> ( $_arMatch )
                    {
                        <span class="keywordflow">foreach</span> ( array_keys( $oModel-&gt;getAttributes() ) as $_sAttribute )
                        {
                            $_arLink[ $_sKey ] = str_ireplace( <span class="stringliteral">&quot;%%{$_sAttribute}%%&quot;</span>, $oModel-&gt;{$_sAttribute}, $_arLink[ $_sKey ] );
                        }
                    }
                }
            }

            <span class="comment">//  Add the action</span>
            <span class="keywordflow">switch</span> ( $_eAction )
            {
                <span class="keywordflow">case</span> PS::ACTION_GENERIC:
                    $_sLabel = PS::o( $_arActionOptions, <span class="stringliteral">&#39;label&#39;</span> );
                    $_sIconName = PS::o( $_arActionOptions, <span class="stringliteral">&#39;icon&#39;</span> );
                    $_sConfirm = PS::o( $_arActionOptions, <span class="stringliteral">&#39;confirm&#39;</span> );

                    <span class="comment">//  Build an action</span>
                    $_sActions .= PS::jquiButton( $_sLabel, $_arLink,
                        <a class="code" href="admin_8php.html#a2394bd91cde70158acb50a4a7f860ab5">array</a>(
                            <span class="stringliteral">&#39;confirm&#39;</span> =&gt; $_sConfirm,
                            <span class="stringliteral">&#39;iconOnly&#39;</span> =&gt; <span class="keyword">true</span>, 
                            <span class="stringliteral">&#39;icon&#39;</span> =&gt; $_sIconName,
                            <span class="stringliteral">&#39;iconSize&#39;</span> =&gt; <span class="stringliteral">&#39;small&#39;</span>
                        )
                    );
                    <span class="keywordflow">break</span>;
                    
                <span class="keywordflow">case</span> PS::ACTION_LOCK:           <span class="comment">//  Special case if model contains lock column</span>
                    $_sLockName = ( ! $oModel-&gt;{$_sLockColumn} ) ? <span class="stringliteral">&#39;Lock&#39;</span> : <span class="stringliteral">&#39;Unlock&#39;</span>;
                    $_sIconName = ( $oModel-&gt;{$_sLockColumn} ) ? <span class="stringliteral">&#39;locked&#39;</span> : <span class="stringliteral">&#39;unlocked&#39;</span>;

                    <span class="comment">//  Lock import file</span>
                    $_sActions .= PS::jquiButton( $_sLockName, $_arLink,
                        <a class="code" href="admin_8php.html#a2394bd91cde70158acb50a4a7f860ab5">array</a>(
                            <span class="stringliteral">&#39;confirm&#39;</span> =&gt; <span class="stringliteral">&quot;Do you really want to &quot;</span> . strtolower( $_sLockName ) . <span class="stringliteral">&quot; this {$_sDataName}?&quot;</span>,
                            <span class="stringliteral">&#39;iconOnly&#39;</span> =&gt; <span class="keyword">true</span>, 
                            <span class="stringliteral">&#39;icon&#39;</span> =&gt; $_sIconName,
                            <span class="stringliteral">&#39;iconSize&#39;</span> =&gt; <span class="stringliteral">&#39;small&#39;</span>
                        )
                    );
                    <span class="keywordflow">break</span>;
                
                <span class="keywordflow">case</span> PS::ACTION_VIEW:
                    $_sActions .= PS::jquiButton( <span class="stringliteral">&#39;View&#39;</span>, $_arLink, <a class="code" href="admin_8php.html#a2394bd91cde70158acb50a4a7f860ab5">array</a>( <span class="stringliteral">&#39;iconOnly&#39;</span> =&gt; <span class="keyword">true</span>, <span class="stringliteral">&#39;icon&#39;</span> =&gt; <span class="stringliteral">&#39;gear&#39;</span>, <span class="stringliteral">&#39;iconSize&#39;</span> =&gt; <span class="stringliteral">&#39;small&#39;</span> ) );
                    <span class="keywordflow">break</span>;
                    
                <span class="keywordflow">case</span> PS::ACTION_EDIT:
                    $_sActions .= PS::jquiButton( <span class="stringliteral">&#39;Edit&#39;</span>, $_arLink, <a class="code" href="admin_8php.html#a2394bd91cde70158acb50a4a7f860ab5">array</a>( <span class="stringliteral">&#39;iconOnly&#39;</span> =&gt; <span class="keyword">true</span>, <span class="stringliteral">&#39;icon&#39;</span> =&gt; <span class="stringliteral">&#39;pencil&#39;</span>, <span class="stringliteral">&#39;iconSize&#39;</span> =&gt; <span class="stringliteral">&#39;small&#39;</span> ) );
                    <span class="keywordflow">break</span>;
                    
                <span class="keywordflow">case</span> PS::ACTION_DELETE:
                    $_sActions .= PS::jquiButton( <span class="stringliteral">&#39;Delete&#39;</span>, <a class="code" href="admin_8php.html#a2394bd91cde70158acb50a4a7f860ab5">array</a>( <span class="stringliteral">&#39;delete&#39;</span>, $_sPK =&gt; $_oId ),
                        <a class="code" href="admin_8php.html#a2394bd91cde70158acb50a4a7f860ab5">array</a>(
                            <span class="stringliteral">&#39;confirm&#39;</span> =&gt; <span class="stringliteral">&quot;Do you really want to delete this {$_sDataName}?&quot;</span>,
                            <span class="stringliteral">&#39;iconOnly&#39;</span> =&gt; <span class="keyword">true</span>, 
                            <span class="stringliteral">&#39;icon&#39;</span> =&gt; <span class="stringliteral">&#39;trash&#39;</span>, 
                            <span class="stringliteral">&#39;iconSize&#39;</span> =&gt; <span class="stringliteral">&#39;small&#39;</span>
                        )
                    );
                    <span class="keywordflow">break</span>;
                    
                <span class="keywordflow">default</span>:    <span class="comment">//  Catchall for prefab stuff...</span>
                    $_sActions .= str_ireplace( <span class="stringliteral">&#39;%%PK_VALUE%%&#39;</span>, $_oId, $_sAction );
                    <span class="keywordflow">break</span>;
            }
        }
        
        <span class="keywordflow">return</span> $_sActions;
    }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a4f277aa7b3be8aead6d545302ac7c84b"></a><!-- doxytag: member="CPSDataGrid::create" ref="a4f277aa7b3be8aead6d545302ac7c84b" args="($sDataName, $arModel, $arColumns=array(), $arActions=array(), $oSort=null, $oPages=null, $arPagerOptions=array(), $sLinkView= 'update', $bEncode=true)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static create </td>
          <td>(</td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>sDataName</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>arModel</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>arColumns</em> = <code><a class="el" href="list_8php.html#aa3205d038c7f8feb5c9f01ac4dfadc88">array</a>()</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>arActions</em> = <code><a class="el" href="list_8php.html#aa3205d038c7f8feb5c9f01ac4dfadc88">array</a>()</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>oSort</em> = <code>null</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>oPages</em> = <code>null</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>arPagerOptions</em> = <code><a class="el" href="list_8php.html#aa3205d038c7f8feb5c9f01ac4dfadc88">array</a>()</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>sLinkView</em> = <code>'update'</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>bEncode</em> = <code>true</code></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Outputs a data grid with pager on the bottom</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>string</em>&nbsp;</td><td>$sDataName </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>array</em>&nbsp;</td><td>$arModel </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>array</em>&nbsp;</td><td>$arColumns </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>array</em>&nbsp;</td><td>$arActions </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>CSort</em>&nbsp;</td><td>$oSort </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>CPagination</em>&nbsp;</td><td>$oPages </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>array</em>&nbsp;</td><td>$arPagerOptions </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>mixed</em>&nbsp;</td><td>$sLinkView </td></tr>
  </table>
  </dd>
</dl>
<dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="classCPSDataGrid.html#aea971c9c726d0e1a6f345c986cca7ded">CPSDataGrid::createEx</a> </dd></dl>
<dl class="deprecated"><dt><b><a class="el" href="deprecated.html#_deprecated000007">Deprecated:</a></b></dt><dd>Please use <a class="el" href="classCPSDataGrid.html#aea971c9c726d0e1a6f345c986cca7ded">CPSDataGrid::createEx()</a> </dd></dl>

<p>Definition at line <a class="el" href="CPSDataGrid_8php_source.html#l00519">519</a> of file <a class="el" href="CPSDataGrid_8php_source.html">CPSDataGrid.php</a>.</p>

<p><div class="fragment"><pre class="fragment">    {
        <span class="comment">//  Build option array for createEx</span>
        <span class="keywordflow">return</span> <a class="code" href="classCPSDataGrid.html#aea971c9c726d0e1a6f345c986cca7ded">self::createEx</a>( $arModel, 
            <a class="code" href="admin_8php.html#a2394bd91cde70158acb50a4a7f860ab5">array</a>(
                <span class="stringliteral">&#39;modelName&#39;</span>     =&gt; PS::o( $arPagerOptions, <span class="stringliteral">&#39;modelName&#39;</span>, null, <span class="keyword">true</span> ),
                <span class="stringliteral">&#39;accordion&#39;</span>     =&gt; PS::o( $arPagerOptions, <span class="stringliteral">&#39;accordion&#39;</span>, <span class="keyword">false</span>, <span class="keyword">true</span> ),
                <span class="stringliteral">&#39;gridHeader&#39;</span>    =&gt; PS::o( $arPagerOptions, <span class="stringliteral">&#39;gridHeader&#39;</span>, null, <span class="keyword">true</span> ),
                <span class="stringliteral">&#39;divComment&#39;</span>    =&gt; PS::o( $arPagerOptions, <span class="stringliteral">&#39;divComment&#39;</span>, <a class="code" href="admin_8php.html#a2394bd91cde70158acb50a4a7f860ab5">array</a>(), <span class="keyword">true</span> ),
                <span class="stringliteral">&#39;pk&#39;</span>            =&gt; PS::o( $arPagerOptions, <span class="stringliteral">&#39;pk&#39;</span>, null, <span class="keyword">true</span> ),
                <span class="stringliteral">&#39;pages&#39;</span>         =&gt; $oPages,
                <span class="stringliteral">&#39;sort&#39;</span>          =&gt; $oSort,
                <span class="stringliteral">&#39;actions&#39;</span>       =&gt; $arActions,
                <span class="stringliteral">&#39;columns&#39;</span>       =&gt; $arColumns,
                <span class="stringliteral">&#39;dataItemName&#39;</span>  =&gt; $sDataName,
                <span class="stringliteral">&#39;linkView&#39;</span>      =&gt; $sLinkView,
                <span class="stringliteral">&#39;encode&#39;</span>        =&gt; $bEncode,
                <span class="stringliteral">&#39;pagerOptions&#39;</span>  =&gt; $arPagerOptions,
            )
        );
    }
</pre></div></p>

</div>
</div>
<a class="anchor" id="aea971c9c726d0e1a6f345c986cca7ded"></a><!-- doxytag: member="CPSDataGrid::createEx" ref="aea971c9c726d0e1a6f345c986cca7ded" args="($arModel, $arOptions=array())" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static createEx </td>
          <td>(</td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>arModel</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>arOptions</em> = <code><a class="el" href="list_8php.html#aa3205d038c7f8feb5c9f01ac4dfadc88">array</a>()</code></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Outputs a data grid with pager on the bottom</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>array</em>&nbsp;</td><td>$arModel Array of models </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>array</em>&nbsp;</td><td>$arOptions Grid options </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>string </dd></dl>

<p>Definition at line <a class="el" href="CPSDataGrid_8php_source.html#l00096">96</a> of file <a class="el" href="CPSDataGrid_8php_source.html">CPSDataGrid.php</a>.</p>

<p><div class="fragment"><pre class="fragment">    {
        <span class="comment">//  Initialize...</span>
        $_sFormHeader = $_sOut = $_sPager = null;
        self::$m_iColumnCount = 0;
        self::$m_arGridOptions = $arOptions;
        
        <span class="comment">//  Register our css...</span>
        PS::_rcf( PS::_publish( Yii::getPathOfAlias( <span class="stringliteral">&#39;pogostick.templates.css&#39;</span> ) . DIRECTORY_SEPARATOR . <span class="stringliteral">&#39;ps-data-grid.css&#39;</span> ) );
        
        <span class="comment">//  Store our model, get our options</span>
        self::$m_arGridOptions[<span class="stringliteral">&#39;data&#39;</span>] = $arModel;
        $_arPagerOptions = PS::o( $arOptions, <span class="stringliteral">&#39;pagerOptions&#39;</span>, <a class="code" href="admin_8php.html#a2394bd91cde70158acb50a4a7f860ab5">array</a>(), <span class="keyword">true</span> );
        $_sPagerClass = PS::o( $arOptions, <span class="stringliteral">&#39;pagerClass&#39;</span>, <span class="stringliteral">&#39;CPSLinkPager&#39;</span>, <span class="keyword">true</span> );
        $_bAccordion = PS::o( $arOptions, <span class="stringliteral">&#39;accordion&#39;</span>, <span class="keyword">false</span>, <span class="keyword">true</span> );
        $_sGridHeader = PS::o( $arOptions, <span class="stringliteral">&#39;gridHeader&#39;</span>, null, <span class="keyword">true</span> );
        $_oPages = PS::o( $arOptions, <span class="stringliteral">&#39;pages&#39;</span>, null, <span class="keyword">true</span> );
        $_arFormHeader = PS::o( $arOptions, <span class="stringliteral">&#39;formHeader&#39;</span>, null, <span class="keyword">true</span> );
        $_sItemName = PS::o( $arOptions, <span class="stringliteral">&#39;itemName&#39;</span>, <span class="stringliteral">&#39;itme&#39;</span> );
        
        <span class="keywordflow">if</span> ( null !== $_arFormHeader )
        {
            $_arFormHeader[<span class="stringliteral">&#39;flashMessage&#39;</span>] = PS::o( $arOptions, <span class="stringliteral">&#39;flashMessage&#39;</span> );
            $_arFormHeader[<span class="stringliteral">&#39;itemName&#39;</span>] = PS::o( $_arFormHeader, <span class="stringliteral">&#39;itemName&#39;</span>, $_sItemName );
            $_sFormHeader = PS::o( $_arFormHeader, <span class="stringliteral">&#39;title&#39;</span>, <span class="stringliteral">&#39;Form Header&#39;</span>, <span class="keyword">true</span> );
        }
        <span class="keywordflow">else</span>
        {
            <span class="keywordflow">if</span> ( null !== ( $_arMenuButtons = PS::o( $arOptions, <span class="stringliteral">&#39;menuButtons&#39;</span>, null, <span class="keyword">true</span> ) ) )
            {
                $_sFormHeader = PS::o( $_arFormHeader, <span class="stringliteral">&#39;title&#39;</span>, <span class="stringliteral">&#39;Form Header&#39;</span>, <span class="keyword">true</span> );
                $_arFormHeader = <a class="code" href="admin_8php.html#a2394bd91cde70158acb50a4a7f860ab5">array</a>(
                    <span class="stringliteral">&#39;menuButtons&#39;</span> =&gt; $_arMenuButtons,
                    <span class="stringliteral">&#39;itemName&#39;</span> =&gt; PS::o( $arOptions, <span class="stringliteral">&#39;dataItemName&#39;</span>, $_sItemName ),
                );
            }
        }
        
        <span class="comment">//  Make a form header!</span>
        <span class="keywordflow">if</span> ( $_arFormHeader ) echo <a class="code" href="classCPSForm.html#a3ff5ebd31312034b030ce1273675dde2">CPSForm::formHeaderEx</a>( $_sFormHeader, $_arFormHeader );
        
        <span class="comment">//  Only work with CPSLinkPagers</span>
        <span class="keywordflow">if</span> ( ! is_a( $_sPagerClass, <span class="stringliteral">&#39;CPSLinkPager&#39;</span> ) ) $_sPagerClass = <span class="stringliteral">&#39;CPSLinkPager&#39;</span>;

        $_iPagerLocation = PS::o( $_arPagerOptions, <span class="stringliteral">&#39;location&#39;</span>, PS::PL_TOP_RIGHT, <span class="keyword">true</span> );

        <span class="comment">//  Create widget...</span>
        <span class="keywordflow">if</span> ( $_oPages ) 
        {
            $_oWidget = Yii::app()-&gt;controller-&gt;createWidget( $_sPagerClass, array_merge( <a class="code" href="admin_8php.html#a2394bd91cde70158acb50a4a7f860ab5">array</a>( <span class="stringliteral">&#39;pages&#39;</span> =&gt; $_oPages ), $_arPagerOptions ) );
        
            <span class="keywordflow">if</span> ( $_oWidget ) 
            {
                $_oWidget-&gt;pagerLocation = PS::nvl( $_iPagerLocation, $_oWidget-&gt;pagerLocation );
                $_sPager = $_oWidget-&gt;run( <span class="keyword">true</span> );

                <span class="comment">//  Where do you want it?</span>
                <span class="keywordflow">if</span> ( $_oWidget-&gt;pagerLocation == PS::PL_TOP_LEFT || $_oWidget-&gt;pagerLocation == PS::PL_TOP_RIGHT ) $_sOut .= $_sPager;
            }
        }

        <span class="comment">//  Add accordion header if requested...</span>
        <span class="keywordflow">if</span> ( $_bAccordion ) echo <span class="stringliteral">&#39;&lt;h3 class=&quot;ui-accordion-header ui-helper-reset ui-state-active ui-corner-top ps-grid-accordion-header&quot;&gt;&lt;span class=&quot;ui-icon ui-icon-triangle-1-s&quot; &gt;&lt;/span&gt;&lt;a href=&quot;#&quot;&gt;&lt;strong&gt;&#39;</span> . $_sGridHeader . <span class="stringliteral">&#39;&lt;/strong&gt;&lt;/a&gt;&lt;/h3&gt;&#39;</span>;
        
        <span class="comment">//  Build our grid</span>
        $_sOut .= <a class="code" href="classCPSDataGrid.html#a7b2253a9182458ca0ad1103d6f5ac7ca">self::beginDataGrid</a>();
        $_sOut .= <a class="code" href="classCPSDataGrid.html#a0ae5d625361f41ef35ce201e37dc7041">self::getDataGridRows</a>();
        $_sOut .= <a class="code" href="classCPSDataGrid.html#ae3e67a9bbb3458e9757437db4a6d9cb1">self::endDataGrid</a>();

        <span class="comment">//  Display on the bottom...</span>
        <span class="keywordflow">if</span> ( $_oWidget &amp;&amp; ( $_oWidget-&gt;pagerLocation == PS::PL_BOTTOM_LEFT || $_oWidget-&gt;pagerLocation == PS::PL_BOTTOM_RIGHT ) ) 
            $_sOut .= $_sPager;
        
        <span class="keywordflow">return</span> $_sOut;
    }
</pre></div></p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classCPSDataGrid_aea971c9c726d0e1a6f345c986cca7ded_cgraph.png" border="0" usemap="#classCPSDataGrid_aea971c9c726d0e1a6f345c986cca7ded_cgraph" alt=""/></div>
<map name="classCPSDataGrid_aea971c9c726d0e1a6f345c986cca7ded_cgraph" id="classCPSDataGrid_aea971c9c726d0e1a6f345c986cca7ded_cgraph">
<area shape="rect" id="node3" href="classCPSDataGrid.html#a7b2253a9182458ca0ad1103d6f5ac7ca" title="beginDataGrid" alt="" coords="167,5,281,35"/><area shape="rect" id="node7" href="classCPSDataGrid.html#ae3e67a9bbb3458e9757437db4a6d9cb1" title="endDataGrid" alt="" coords="173,59,275,88"/><area shape="rect" id="node9" href="classCPSForm.html#a3ff5ebd31312034b030ce1273675dde2" title="CPSForm::formHeaderEx" alt="" coords="133,112,315,141"/><area shape="rect" id="node11" href="classCPSDataGrid.html#a0ae5d625361f41ef35ce201e37dc7041" title="getDataGridRows" alt="" coords="159,165,289,195"/><area shape="rect" id="node5" href="classCPSTransform.html#aa255554fc788af56211439af1c7d537f" title="CPSTransform::cleanColumn" alt="" coords="363,5,565,35"/><area shape="rect" id="node13" href="classCPSTransform.html#aeabce54d5af0d17071617701b870308f" title="CPSTransform::column" alt="" coords="381,165,547,195"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ae3e67a9bbb3458e9757437db4a6d9cb1"></a><!-- doxytag: member="CPSDataGrid::endDataGrid" ref="ae3e67a9bbb3458e9757437db4a6d9cb1" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static endDataGrid </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static, protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Closes a data grid </p>

<p>Definition at line <a class="el" href="CPSDataGrid_8php_source.html#l00325">325</a> of file <a class="el" href="CPSDataGrid_8php_source.html">CPSDataGrid.php</a>.</p>

<p><div class="fragment"><pre class="fragment">    {
        <span class="keywordflow">return</span> PS::closeTag( <span class="stringliteral">&#39;table&#39;</span> );
    }
</pre></div></p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classCPSDataGrid_ae3e67a9bbb3458e9757437db4a6d9cb1_icgraph.png" border="0" usemap="#classCPSDataGrid_ae3e67a9bbb3458e9757437db4a6d9cb1_icgraph" alt=""/></div>
<map name="classCPSDataGrid_ae3e67a9bbb3458e9757437db4a6d9cb1_icgraph" id="classCPSDataGrid_ae3e67a9bbb3458e9757437db4a6d9cb1_icgraph">
<area shape="rect" id="node3" href="classCPSDataGrid.html#aea971c9c726d0e1a6f345c986cca7ded" title="createEx" alt="" coords="159,5,236,35"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a0ae5d625361f41ef35ce201e37dc7041"></a><!-- doxytag: member="CPSDataGrid::getDataGridRows" ref="a0ae5d625361f41ef35ce201e37dc7041" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static getDataGridRows </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static, protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="CPSDataGrid_8php_source.html#l00224">224</a> of file <a class="el" href="CPSDataGrid_8php_source.html">CPSDataGrid.php</a>.</p>

<p><div class="fragment"><pre class="fragment">    {
        <span class="comment">//  Pull are variables from the options</span>
        $_sNoDataMessage = PS::o( self::$m_arGridOptions, <span class="stringliteral">&#39;noDataMessage&#39;</span>, <span class="stringliteral">&#39;No Records Found&#39;</span>, <span class="keyword">true</span> );
        $arModel = PS::o( self::$m_arGridOptions, <span class="stringliteral">&#39;data&#39;</span>, <a class="code" href="admin_8php.html#a2394bd91cde70158acb50a4a7f860ab5">array</a>() );
        $sLinkView = PS::o( self::$m_arGridOptions, <span class="stringliteral">&#39;linkView&#39;</span>, null );
        $arColumns = PS::o( self::$m_arGridOptions, <span class="stringliteral">&#39;columns&#39;</span>, <a class="code" href="admin_8php.html#a2394bd91cde70158acb50a4a7f860ab5">array</a>() );
        $sPK = PS::o( self::$m_arGridOptions, <span class="stringliteral">&#39;pk&#39;</span>, null );
        $bEncode = PS::o( self::$m_arGridOptions, <span class="stringliteral">&#39;encode&#39;</span>, <span class="keyword">true</span> );
        $arDivComment = PS::o( self::$m_arGridOptions, <span class="stringliteral">&#39;divComment&#39;</span>, <a class="code" href="admin_8php.html#a2394bd91cde70158acb50a4a7f860ab5">array</a>() );
        $_sRowIdTemplate = PS::o( self::$m_arGridOptions, <span class="stringliteral">&#39;rowIdTemplate&#39;</span>, <span class="stringliteral">&#39;_grid_row_{pk}&#39;</span> );
        
        <span class="comment">//  sub options</span>
        $_arOptions = PS::o( $arActions, <span class="stringliteral">&#39;options&#39;</span>, <a class="code" href="admin_8php.html#a2394bd91cde70158acb50a4a7f860ab5">array</a>(), <span class="keyword">true</span> );
        $_sLockColumn = PS::o( $_arOptions, <span class="stringliteral">&#39;lockColumn&#39;</span>, null, <span class="keyword">true</span> );
        
        <span class="comment">//  Build the grid rows</span>
        $_sOut = null;
        $_iRow = 0;
        
        <span class="comment">//  Build the output row</span>
        $_arRowOpts = <a class="code" href="admin_8php.html#a2394bd91cde70158acb50a4a7f860ab5">array</a>();
        
        <span class="keywordflow">if</span> ( count( $arDivComment ) &amp;&amp; $_oModel-&gt;hasErrors() )
            $_arRowOpts = <a class="code" href="admin_8php.html#a2394bd91cde70158acb50a4a7f860ab5">array</a>( <span class="stringliteral">&#39;class&#39;</span> =&gt; $arDivComment[1], <span class="stringliteral">&#39;title&#39;</span> =&gt; implode( <span class="stringliteral">&#39;, &#39;</span>, current( $_oModel-&gt;getErrors() ) ) );
            
        $_arRowOpts[<span class="stringliteral">&#39;class&#39;</span>] = PS::o( $_arRowOpts, <span class="stringliteral">&#39;class&#39;</span>, <span class="stringliteral">&#39;ui-widget-content&#39;</span> );
        
        <span class="keywordflow">if</span> ( ! $arModel || ( is_array( $arModel ) &amp;&amp; ! count( $arModel ) ) ) 
        {
            $_sOut .= PS::tag( <span class="stringliteral">&#39;tr&#39;</span>, $_arRowOpts, PS::tag( <span class="stringliteral">&#39;td&#39;</span>, <a class="code" href="admin_8php.html#a2394bd91cde70158acb50a4a7f860ab5">array</a>( <span class="stringliteral">&#39;class&#39;</span> =&gt; <span class="stringliteral">&#39;ps-data-grid-no-data-found&#39;</span>, <span class="stringliteral">&#39;colspan&#39;</span> =&gt; self::$m_iColumnCount ), $_sNoDataMessage ) );
        }
        <span class="keywordflow">else</span>
        {
            $_sBaseClass = $_arOptions[<span class="stringliteral">&#39;class&#39;</span>];
            
            <span class="keywordflow">foreach</span> ( $arModel as $_iIndex =&gt; $_oModel )
            {
                $_sActions = null;
                $_sPK = PS::nvl( $sPK, $_oModel-&gt;getTableSchema()-&gt;primaryKey );
                $_sTD = <a class="code" href="classCPSTransform.html#aeabce54d5af0d17071617701b870308f">CPSTransform::column</a>( $_oModel, $arColumns, $sLinkView, <span class="stringliteral">&#39;td&#39;</span>, <a class="code" href="admin_8php.html#a2394bd91cde70158acb50a4a7f860ab5">array</a>( <span class="stringliteral">&#39;encode&#39;</span> =&gt; $bEncode ) );
                    
                <span class="comment">//  Build actions...</span>
                <span class="keywordflow">if</span> ( $_sActions = self::buildActions( $_oModel ) )
                    $_sTD .= PS::tag( <span class="stringliteral">&#39;td&#39;</span>, <a class="code" href="admin_8php.html#a2394bd91cde70158acb50a4a7f860ab5">array</a>( <span class="stringliteral">&#39;class&#39;</span> =&gt; <span class="stringliteral">&#39;ps-grid-actions&#39;</span> ), <span class="stringliteral">&#39;&lt;div class=&quot;ps-grid-actions-inner&quot;&gt;&#39;</span> . $_sActions . <span class="stringliteral">&#39;&lt;hr /&gt;&lt;/div&gt;&#39;</span> );
                
                <span class="comment">//  Row id template? Fill it in</span>
                <span class="keywordflow">if</span> ( $_sRowIdTemplate ) 
                {
                    <span class="keywordflow">if</span> ( <span class="keyword">false</span> !== stripos( $_sRowIdTemplate, <span class="stringliteral">&#39;{#}&#39;</span> ) )
                        $_arRowOpts[<span class="stringliteral">&#39;id&#39;</span>] = str_ireplace( <span class="stringliteral">&#39;{#}&#39;</span>, $_iRow, $_sRowIdTemplate );
                    <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( <span class="keyword">false</span> !== stripos( $_sRowIdTemplate, <span class="stringliteral">&#39;{pk}&#39;</span> ) &amp;&amp; $_sPK )
                        $_arRowOpts[<span class="stringliteral">&#39;id&#39;</span>] = str_ireplace( <span class="stringliteral">&#39;{pk}&#39;</span>, $_oModel-&gt;{$_sPK}, $_sRowIdTemplate );
                }
                
                <span class="comment">//  Mark odd rows</span>
                <a class="code" href="controller_2controller_8php.html#a7d53885feef470ba528847a3f2f1f93a">$_sClass</a> = $_sBaseClass;
                
                <span class="keywordflow">if</span> ( $_iRow % 2 == 0 ) 
                {
                    <a class="code" href="controller_2controller_8php.html#a7d53885feef470ba528847a3f2f1f93a">$_sClass</a> .= <span class="stringliteral">&#39; ui-state-default ps-data-grid-row-odd&#39;</span>;
                }
                <span class="keywordflow">else</span>
                {
                    <a class="code" href="controller_2controller_8php.html#a7d53885feef470ba528847a3f2f1f93a">$_sClass</a> .= <span class="stringliteral">&#39; ui-state-active ps-data-grid-row-even&#39;</span>;
                }
                
                $_arOptions[<span class="stringliteral">&#39;class&#39;</span>] = <a class="code" href="controller_2controller_8php.html#a7d53885feef470ba528847a3f2f1f93a">$_sClass</a>;
                
                $_sOut .= PS::tag( <span class="stringliteral">&#39;tr&#39;</span>, $_arOptions, $_sTD );
                
                <span class="comment">//  Add subrows...</span>
                <span class="keywordflow">if</span> ( ! empty( $_oModel-&gt;subRows ) )
                {
                    <span class="keywordflow">foreach</span> ( $_oModel-&gt;subRows as $_oRow )
                    {
                        $_arInnerOptions = PS::smart_array_merge( PS::o( $_oRow, <span class="stringliteral">&#39;_innerHtmlOptions&#39;</span>, <a class="code" href="admin_8php.html#a2394bd91cde70158acb50a4a7f860ab5">array</a>(), <span class="keyword">true</span> ), <a class="code" href="admin_8php.html#a2394bd91cde70158acb50a4a7f860ab5">array</a>( <span class="stringliteral">&#39;encode&#39;</span> =&gt; <span class="keyword">false</span> ) );
                        $_arOuterOptions = PS::smart_array_merge( <a class="code" href="admin_8php.html#a2394bd91cde70158acb50a4a7f860ab5">array</a>( <span class="stringliteral">&#39;class&#39;</span> =&gt; <span class="stringliteral">&#39;ps-sub-row&#39;</span> ), PS::o( $_oRow, <span class="stringliteral">&#39;_outerHtmlOptions&#39;</span>, <a class="code" href="admin_8php.html#a2394bd91cde70158acb50a4a7f860ab5">array</a>(), <span class="keyword">true</span> ) );
                        
                        $_sRow = <a class="code" href="classCPSTransform.html#aeabce54d5af0d17071617701b870308f">CPSTransform::column</a>( $_oRow, array_keys( $_oRow ), null, <span class="stringliteral">&#39;td&#39;</span>, $_arInnerOptions );

                        <span class="keywordflow">if</span> ( ! empty( $arActions ) )
                        {
                            $_sRow .= PS::tag( <span class="stringliteral">&#39;td&#39;</span>, PS::smart_array_merge( $_arInnerOptions, <a class="code" href="admin_8php.html#a2394bd91cde70158acb50a4a7f860ab5">array</a>( <span class="stringliteral">&#39;class&#39;</span> =&gt; <span class="stringliteral">&#39;grid-actions&#39;</span> ) ), <span class="stringliteral">&#39;&lt;div class=&quot;_grid_actions&quot;&gt;&amp;nbsp;&lt;hr /&gt;&lt;/div&gt;&#39;</span> );
                        }
                            
                        $_sOut .= PS::tag( <span class="stringliteral">&#39;tr&#39;</span>, $_arOuterOptions, $_sRow );
                    }
                }
                
                $_iRow++;
            }
        }
        
        <span class="keywordflow">return</span> $_sOut;
    }
</pre></div></p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classCPSDataGrid_a0ae5d625361f41ef35ce201e37dc7041_cgraph.png" border="0" usemap="#classCPSDataGrid_a0ae5d625361f41ef35ce201e37dc7041_cgraph" alt=""/></div>
<map name="classCPSDataGrid_a0ae5d625361f41ef35ce201e37dc7041_cgraph" id="classCPSDataGrid_a0ae5d625361f41ef35ce201e37dc7041_cgraph">
<area shape="rect" id="node3" href="classCPSTransform.html#aeabce54d5af0d17071617701b870308f" title="CPSTransform::column" alt="" coords="185,5,351,35"/></map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classCPSDataGrid_a0ae5d625361f41ef35ce201e37dc7041_icgraph.png" border="0" usemap="#classCPSDataGrid_a0ae5d625361f41ef35ce201e37dc7041_icgraph" alt=""/></div>
<map name="classCPSDataGrid_a0ae5d625361f41ef35ce201e37dc7041_icgraph" id="classCPSDataGrid_a0ae5d625361f41ef35ce201e37dc7041_icgraph">
<area shape="rect" id="node3" href="classCPSDataGrid.html#aea971c9c726d0e1a6f345c986cca7ded" title="createEx" alt="" coords="185,5,263,35"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a714d703744491d6a840be72c0bbc4bdc"></a><!-- doxytag: member="CPSDataGrid::getGridOptions" ref="a714d703744491d6a840be72c0bbc4bdc" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">getGridOptions </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="CPSDataGrid_8php_source.html#l00041">41</a> of file <a class="el" href="CPSDataGrid_8php_source.html">CPSDataGrid.php</a>.</p>

<p><div class="fragment"><pre class="fragment">{ <span class="keywordflow">return</span> $this-&gt;m_arGridOptions; }
</pre></div></p>

</div>
</div>
<a class="anchor" id="acd9b2a44c8b6b5aac349c4577bb0c00c"></a><!-- doxytag: member="CPSDataGrid::getMenuButtonType" ref="acd9b2a44c8b6b5aac349c4577bb0c00c" args="($sButton)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static getMenuButtonType </td>
          <td>(</td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>sButton</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Converts a string action to its corresponding enum </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>string</em>&nbsp;</td><td>$sAction </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>integer </dd></dl>

<p>Definition at line <a class="el" href="CPSDataGrid_8php_source.html#l00083">83</a> of file <a class="el" href="CPSDataGrid_8php_source.html">CPSDataGrid.php</a>.</p>

<p><div class="fragment"><pre class="fragment">{ <span class="keywordflow">return</span> is_numeric( $sButton ) ? intval( $sButton ) : <a class="code" href="classPS.html">PS</a>::o( self::<a class="code" href="classCPSDataGrid.html#a36b298be9109a11d6fc986b36831f96f">$m_arMenuButtonMap</a>, $sButton ); }
</pre></div></p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classCPSDataGrid_acd9b2a44c8b6b5aac349c4577bb0c00c_icgraph.png" border="0" usemap="#classCPSDataGrid_acd9b2a44c8b6b5aac349c4577bb0c00c_icgraph" alt=""/></div>
<map name="classCPSDataGrid_acd9b2a44c8b6b5aac349c4577bb0c00c_icgraph" id="classCPSDataGrid_acd9b2a44c8b6b5aac349c4577bb0c00c_icgraph">
<area shape="rect" id="node3" href="classCPSForm.html#ac2b4267a947155171acc31b8d70a798b" title="CPSForm::createMenuButtons" alt="" coords="204,5,417,35"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a9d4cb8e1eb461643829da0b608ee73ed"></a><!-- doxytag: member="CPSDataGrid::setGridOptions" ref="a9d4cb8e1eb461643829da0b608ee73ed" args="($arValue)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">setGridOptions </td>
          <td>(</td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>arValue</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="CPSDataGrid_8php_source.html#l00042">42</a> of file <a class="el" href="CPSDataGrid_8php_source.html">CPSDataGrid.php</a>.</p>

<p><div class="fragment"><pre class="fragment">{ $this-&gt;m_arGridOptions = $arValue; }
</pre></div></p>

</div>
</div>
<hr/><h2>Field Documentation</h2>
<a class="anchor" id="aca9359f1c287f1fdc37313507050fe58"></a><!-- doxytag: member="CPSDataGrid::$m_arActionMap" ref="aca9359f1c287f1fdc37313507050fe58" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">$m_arActionMap<code> [static, protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<b>Initial value:</b><div class="fragment"><pre class="fragment"> <a class="code" href="admin_8php.html#a2394bd91cde70158acb50a4a7f860ab5">array</a>(
        PS::ACTION_CREATE =&gt; <span class="stringliteral">&#39;create&#39;</span>,
        PS::ACTION_VIEW =&gt; <span class="stringliteral">&#39;show&#39;</span>,
        PS::ACTION_EDIT =&gt; <span class="stringliteral">&#39;edit&#39;</span>,
        PS::ACTION_SAVE =&gt; <span class="stringliteral">&#39;save&#39;</span>,
        PS::ACTION_DELETE =&gt; <span class="stringliteral">&#39;delete&#39;</span>,
        PS::ACTION_LOCK =&gt; <span class="stringliteral">&#39;lock&#39;</span>,
        PS::ACTION_UNLOCK =&gt; <span class="stringliteral">&#39;unlock&#39;</span>,
        PS::ACTION_PREVIEW =&gt; <span class="stringliteral">&#39;preview&#39;</span>,
    )
</pre></div><p>Map of predefined row-level actions to names </p>

<p>Definition at line <a class="el" href="CPSDataGrid_8php_source.html#l00067">67</a> of file <a class="el" href="CPSDataGrid_8php_source.html">CPSDataGrid.php</a>.</p>

</div>
</div>
<a class="anchor" id="acd4ff83641d8c0eac7c449802d557a21"></a><!-- doxytag: member="CPSDataGrid::$m_arGridOptions" ref="acd4ff83641d8c0eac7c449802d557a21" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">$m_arGridOptions = <a class="el" href="list_8php.html#aa3205d038c7f8feb5c9f01ac4dfadc88">array</a>()<code> [static, protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="CPSDataGrid_8php_source.html#l00040">40</a> of file <a class="el" href="CPSDataGrid_8php_source.html">CPSDataGrid.php</a>.</p>

</div>
</div>
<a class="anchor" id="a36b298be9109a11d6fc986b36831f96f"></a><!-- doxytag: member="CPSDataGrid::$m_arMenuButtonMap" ref="a36b298be9109a11d6fc986b36831f96f" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">$m_arMenuButtonMap<code> [static, protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<b>Initial value:</b><div class="fragment"><pre class="fragment"> <a class="code" href="admin_8php.html#a2394bd91cde70158acb50a4a7f860ab5">array</a>(
        <span class="stringliteral">&#39;none&#39;</span>      =&gt; null,
        <span class="stringliteral">&#39;new&#39;</span>       =&gt; PS::ACTION_CREATE,
        <span class="stringliteral">&#39;create&#39;</span>    =&gt; PS::ACTION_CREATE,
        <span class="stringliteral">&#39;view&#39;</span>      =&gt; PS::ACTION_VIEW,
        <span class="stringliteral">&#39;edit&#39;</span>      =&gt; PS::ACTION_EDIT,
        <span class="stringliteral">&#39;update&#39;</span>    =&gt; PS::ACTION_EDIT,
        <span class="stringliteral">&#39;save&#39;</span>      =&gt; PS::ACTION_SAVE,
        <span class="stringliteral">&#39;delete&#39;</span>    =&gt; PS::ACTION_DELETE,
        <span class="stringliteral">&#39;lock&#39;</span>      =&gt; PS::ACTION_LOCK,
        <span class="stringliteral">&#39;unlock&#39;</span>    =&gt; PS::ACTION_UNLOCK,
        <span class="stringliteral">&#39;admin&#39;</span>     =&gt; PS::ACTION_ADMIN,
        <span class="stringliteral">&#39;cancel&#39;</span>    =&gt; PS::ACTION_CANCEL,
        <span class="stringliteral">&#39;return&#39;</span>    =&gt; PS::ACTION_CANCEL,
        <span class="stringliteral">&#39;preview&#39;</span>   =&gt; PS::ACTION_PREVIEW,
    )
</pre></div><p>Map of predefined menuButton names to types </p>

<p>Definition at line <a class="el" href="CPSDataGrid_8php_source.html#l00047">47</a> of file <a class="el" href="CPSDataGrid_8php_source.html">CPSDataGrid.php</a>.</p>

</div>
</div>
<a class="anchor" id="a1ee8c98e418359687d96dff41468fa61"></a><!-- doxytag: member="CPSDataGrid::$m_iColumnCount" ref="a1ee8c98e418359687d96dff41468fa61" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">$m_iColumnCount<code> [static, protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="CPSDataGrid_8php_source.html#l00033">33</a> of file <a class="el" href="CPSDataGrid_8php_source.html">CPSDataGrid.php</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>/usr/local/yiixl/lib/original/widgets/<a class="el" href="CPSDataGrid_8php_source.html">CPSDataGrid.php</a></li>
</ul>
</div>
<hr class="footer"/><address class="footer"><small>Generated on Thu Mar 24 2011 20:11:40 for "The Yii Extension Library Of Doom!" by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.1 </small></address>
</body>
</html>
