<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>&quot;The Yii Extension Library Of Doom!&quot;: CPSOptionHelper Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.7.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul class="tablist">
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li><a href="classes.html"><span>Data&nbsp;Structure&nbsp;Index</span></a></li>
      <li><a href="hierarchy.html"><span>Class&nbsp;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Data&nbsp;Fields</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="#pub-attribs">Data Fields</a> &#124;
<a href="#pro-static-methods">Static Protected Member Functions</a>  </div>
  <div class="headertitle">
<h1>CPSOptionHelper Class Reference</h1>  </div>
</div>
<div class="contents">
<!-- doxytag: class="CPSOptionHelper" --><!-- doxytag: inherits="IPSBase" --><div class="dynheader">
Inheritance diagram for CPSOptionHelper:</div>
<div class="dyncontent">
<div class="center"><img src="classCPSOptionHelper__inherit__graph.png" border="0" usemap="#CPSOptionHelper_inherit__map" alt="Inheritance graph"/></div>
<map name="CPSOptionHelper_inherit__map" id="CPSOptionHelper_inherit__map">
<area shape="rect" id="node2" href="interfaceIPSBase.html" title="IPSBase" alt="" coords="33,5,108,35"/></map>
<center><span class="legend">[<a target="top" href="graph_legend.html">legend</a>]</span></center></div>
<div class="dynheader">
Collaboration diagram for CPSOptionHelper:</div>
<div class="dyncontent">
<div class="center"><img src="classCPSOptionHelper__coll__graph.png" border="0" usemap="#CPSOptionHelper_coll__map" alt="Collaboration graph"/></div>
<map name="CPSOptionHelper_coll__map" id="CPSOptionHelper_coll__map">
<area shape="rect" id="node2" href="interfaceIPSBase.html" title="IPSBase" alt="" coords="33,5,108,35"/></map>
<center><span class="legend">[<a target="top" href="graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCPSOptionHelper.html#a015734d78f16cca14cad5df110e13715">isScriptCallback</a> ($sValue)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCPSOptionHelper.html#af245193a05c6d9de1d9fec6239b9b14b">parseRulePattern</a> ($oPattern, $bPrivate=false)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCPSOptionHelper.html#aa50035c5f1b103bc39bb60b4a1be1dae">defaultRuleSet</a> ($bPrivate=false)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCPSOptionHelper.html#a1196dfb53b5a9c5b1865efd2678c0bb5">validateOptions</a> (<a class="el" href="interfaceIPSOptionContainer.html">IPSOptionContainer</a> &amp;$oContainer)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCPSOptionHelper.html#af1ecea04b9292bde2418a4608ed30197">validateOption</a> (<a class="el" href="classCPSOption.html">CPSOption</a> &amp;$oOption, $oValue=null)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCPSOptionHelper.html#a40877d061316ed1f0bca467b4e86a1b5">makeOptions</a> (<a class="el" href="interfaceIPSOptionContainer.html">IPSOptionContainer</a> $oContainer, $bPublicOnly=true, $iFormat=<a class="el" href="classCPSHelperBase.html#ae216f8dc124162fce9c831581cccad38">CPSHelperBase::OF_JSON</a>, $bNoCheck=false)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCPSOptionHelper.html#aea8660a7b4f4ad32037ce9660855bfec">checkOption</a> (<a class="el" href="classCPSOption.html">CPSOption</a> $oOption)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCPSOptionHelper.html#a9a9fdad1deff93bf05246049e7c06869">checkOptions</a> (<a class="el" href="interfaceIPSOptionContainer.html">IPSOptionContainer</a> $oContainer)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCPSOptionHelper.html#a82708c833182535dc89664ea66c54f1a">checkCallbacks</a> (<a class="el" href="interfaceIPSComponent.html">IPSComponent</a> $oComponent)</td></tr>
<tr><td colspan="2"><h2><a name="pub-attribs"></a>
Data Fields</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">const&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCPSOptionHelper.html#a4652b705dc90fe7d967eecbf10901364">CB_KEY</a> = '__pscb_'</td></tr>
<tr><td colspan="2"><h2><a name="pro-static-methods"></a>
Static Protected Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCPSOptionHelper.html#ac9639ee4d88b873aa04c7f41627387e1">fixCallbacks</a> ($sOutput, $arCallbacks)</td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>

<p>Definition at line <a class="el" href="CPSOptionHelper_8php_source.html#l00023">23</a> of file <a class="el" href="CPSOptionHelper_8php_source.html">CPSOptionHelper.php</a>.</p>
<hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="a82708c833182535dc89664ea66c54f1a"></a><!-- doxytag: member="CPSOptionHelper::checkCallbacks" ref="a82708c833182535dc89664ea66c54f1a" args="(IPSComponent $oComponent)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static checkCallbacks </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="interfaceIPSComponent.html">IPSComponent</a> $&nbsp;</td>
          <td class="paramname"> <em>oComponent</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Checks the callback array to see if they're valid.</p>
<dl><dt><b>Exceptions:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>CException</em>&nbsp;</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>true If all is good. </dd></dl>

<p>Definition at line <a class="el" href="CPSOptionHelper_8php_source.html#l00375">375</a> of file <a class="el" href="CPSOptionHelper_8php_source.html">CPSOptionHelper.php</a>.</p>

<p><div class="fragment"><pre class="fragment">    {
        $_arCallbacks = $oComponent-&gt;callbacks;
        $_arValidCallbacks = $oComponent-&gt;validCallbacks;

        <span class="keywordflow">if</span> ( ! empty( $_arCallbacks ) &amp;&amp; ! empty( $_arValidCallbacks ) )
        {
            <span class="keywordflow">foreach</span> ( $_arCallbacks as $_sKey =&gt; $_oValue )
            {
                <span class="keywordflow">if</span> ( ! in_array( $_sKey, $_arValidCallbacks ) )
                    <span class="keywordflow">throw</span> <span class="keyword">new</span> CException( Yii::t( __CLASS__, <span class="stringliteral">&#39;&quot;{x}&quot; must be one of: {y}&#39;</span>, <a class="code" href="admin_8php.html#a2394bd91cde70158acb50a4a7f860ab5">array</a>( <span class="stringliteral">&#39;{x}&#39;</span> =&gt; $_sKey, <span class="stringliteral">&#39;{y}&#39;</span> =&gt; implode( <span class="stringliteral">&#39;, &#39;</span>, $_arValidCallbacks ) ) ) );
            }
        }

        <span class="comment">//  Clean...</span>
        <span class="keywordflow">return</span> <span class="keyword">true</span>;
    }
</pre></div></p>

</div>
</div>
<a class="anchor" id="aea8660a7b4f4ad32037ce9660855bfec"></a><!-- doxytag: member="CPSOptionHelper::checkOption" ref="aea8660a7b4f4ad32037ce9660855bfec" args="(CPSOption $oOption)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static checkOption </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCPSOption.html">CPSOption</a> $&nbsp;</td>
          <td class="paramname"> <em>oOption</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Checks a single option against its pattern.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>string</em>&nbsp;</td><td>$sKey </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>mixed</em>&nbsp;</td><td>$oValue </td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Exceptions:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>CException</em>&nbsp;</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>bool </dd></dl>

<p>Definition at line <a class="el" href="CPSOptionHelper_8php_source.html#l00334">334</a> of file <a class="el" href="CPSOptionHelper_8php_source.html">CPSOptionHelper.php</a>.</p>

<p><div class="fragment"><pre class="fragment">    {
        <span class="comment">//  Required and missing? Bail</span>
        <span class="keywordflow">if</span> ( null === ( $_oValue = $oOption-&gt;getValue() ) &amp;&amp; $oOption-&gt;isRequired )
            <span class="keywordflow">throw</span> <span class="keyword">new</span> <a class="code" href="classCPSOptionException.html">CPSOptionException</a>( Yii::t( __CLASS__, <span class="stringliteral">&#39;&quot;{x}&quot; is a required option&#39;</span>, <a class="code" href="admin_8php.html#a2394bd91cde70158acb50a4a7f860ab5">array</a>( <span class="stringliteral">&#39;{x}&#39;</span> =&gt; $oOption-&gt;name ) ), 1 );

        <span class="comment">//  Check if this is a valid value for this option</span>
        <span class="keywordflow">if</span> ( null !== ( $_arValid = $oOption-&gt;getAllowed() ) )
        {
            <span class="keywordflow">if</span> ( null !== $oValue &amp;&amp; ! in_array( $_oValue, $_arValid ) )
                <span class="keywordflow">throw</span> <span class="keyword">new</span> CException( Yii::t( __CLASS__, <span class="stringliteral">&#39;&quot;{x}&quot; must be one of: &quot;{y}&quot;&#39;</span>, <a class="code" href="admin_8php.html#a2394bd91cde70158acb50a4a7f860ab5">array</a>( <span class="stringliteral">&#39;{x}&#39;</span> =&gt; $sKey, <span class="stringliteral">&#39;{y}&#39;</span> =&gt; implode( <span class="stringliteral">&#39;, &#39;</span>, $_arValid ) ) ), 1  );
        }

        <span class="comment">//  Looks clean....</span>
        <span class="keywordflow">return</span> <span class="keyword">true</span>;
    }
</pre></div></p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classCPSOptionHelper_aea8660a7b4f4ad32037ce9660855bfec_cgraph.png" border="0" usemap="#classCPSOptionHelper_aea8660a7b4f4ad32037ce9660855bfec_cgraph" alt=""/></div>
<map name="classCPSOptionHelper_aea8660a7b4f4ad32037ce9660855bfec_cgraph" id="classCPSOptionHelper_aea8660a7b4f4ad32037ce9660855bfec_cgraph">
<area shape="rect" id="node3" href="classCPSOption.html#adf60de89939a47330ff3273b62a7d60c" title="CPSOption::getAllowed" alt="" coords="156,5,321,35"/><area shape="rect" id="node9" href="classCPSOption.html#aabb9562c82b18321ed0510932298be7c" title="CPSOption::getValue" alt="" coords="161,59,316,88"/><area shape="rect" id="node5" href="classCPSOption.html#a8803b9be3676330a9791b823d0d3f5f6" title="CPSOption::getRule" alt="" coords="620,32,764,61"/><area shape="rect" id="node7" href="classCPSHelperBase.html#a557243d020090bff2b3cb6cdb03d31aa" title="CPSHelperBase::o" alt="" coords="813,32,952,61"/><area shape="rect" id="node11" href="classCPSOption.html#af9b9401c63918169457fe8516324950f" title="CPSOption::getDefaultValue" alt="" coords="371,57,571,87"/><area shape="rect" id="node14" href="classCPSHelperBase.html#a666bf0c7e9a3320e2e1ca2d9b65301e6" title="CPSHelperBase::nvl" alt="" coords="397,111,544,140"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a9a9fdad1deff93bf05246049e7c06869"></a><!-- doxytag: member="CPSOptionHelper::checkOptions" ref="a9a9fdad1deff93bf05246049e7c06869" args="(IPSOptionContainer $oContainer)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static checkOptions </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="interfaceIPSOptionContainer.html">IPSOptionContainer</a> $&nbsp;</td>
          <td class="paramname"> <em>oContainer</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Checks the options array or a passed in array for validity checking...</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>array</em>&nbsp;</td><td>$arOptions </td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Exceptions:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>CException</em>&nbsp;</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>bool </dd></dl>

<p>Definition at line <a class="el" href="CPSOptionHelper_8php_source.html#l00358">358</a> of file <a class="el" href="CPSOptionHelper_8php_source.html">CPSOptionHelper.php</a>.</p>

<p><div class="fragment"><pre class="fragment">    {
        <span class="comment">//  One at a time...</span>
        <span class="keywordflow">foreach</span> ( $oContainer-&gt;getRawOptions() as $_oOption )
            self::checkOption( $_oOption );

        <span class="comment">//  We made it here? We cool baby!</span>
        <span class="keywordflow">return</span> <span class="keyword">true</span>;
    }
</pre></div></p>

</div>
</div>
<a class="anchor" id="aa50035c5f1b103bc39bb60b4a1be1dae"></a><!-- doxytag: member="CPSOptionHelper::defaultRuleSet" ref="aa50035c5f1b103bc39bb60b4a1be1dae" args="($bPrivate=false)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static defaultRuleSet </td>
          <td>(</td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>bPrivate</em> = <code>false</code></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>This is the default rule set for an option </p>

<p>Definition at line <a class="el" href="CPSOptionHelper_8php_source.html#l00120">120</a> of file <a class="el" href="CPSOptionHelper_8php_source.html">CPSOptionHelper.php</a>.</p>

<p><div class="fragment"><pre class="fragment">    {
        <span class="keywordflow">return</span> <a class="code" href="admin_8php.html#a2394bd91cde70158acb50a4a7f860ab5">array</a>(
            <a class="code" href="classCPSOption.html#aa978b1a784800b7a941c6a5871f77e2b">CPSOption::RPT_TYPE</a> =&gt; <span class="stringliteral">&#39;string&#39;</span>,
            <a class="code" href="classCPSOption.html#a269e636bbdcfa28179f931679d48643f">CPSOption::RPT_DEFAULT</a> =&gt; null,
            <a class="code" href="classCPSOption.html#ac03762b40afa4745a976b2fd4b5cba8c">CPSOption::RPT_EXTERNAL_NAME</a> =&gt; null,
            <a class="code" href="classCPSOption.html#a16a4aecf79ed0a222f179f0e44404099">CPSOption::RPT_REQUIRED</a> =&gt; <span class="keyword">false</span>,
            <a class="code" href="classCPSOption.html#a15957bc41386cbb54751a774d2154721">CPSOption::RPT_ALLOWED</a> =&gt; null,
            <a class="code" href="classCPSOption.html#a1269232ea10c2579723e52653047616c">CPSOption::RPT_PRIVATE</a> =&gt; $bPrivate,
        );
    }
</pre></div></p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classCPSOptionHelper_aa50035c5f1b103bc39bb60b4a1be1dae_icgraph.png" border="0" usemap="#classCPSOptionHelper_aa50035c5f1b103bc39bb60b4a1be1dae_icgraph" alt=""/></div>
<map name="classCPSOptionHelper_aa50035c5f1b103bc39bb60b4a1be1dae_icgraph" id="classCPSOptionHelper_aa50035c5f1b103bc39bb60b4a1be1dae_icgraph">
<area shape="rect" id="node3" href="classCPSOptionHelper.html#af245193a05c6d9de1d9fec6239b9b14b" title="parseRulePattern" alt="" coords="168,5,299,35"/><area shape="rect" id="node5" href="classCPSOption.html#af26f441186ec53723e892616baec1c73" title="CPSOption::setRules" alt="" coords="348,5,497,35"/><area shape="rect" id="node7" href="classCPSOption.html#acadb0b05b1c434157e21e0551c2ca725" title="CPSOption::__construct" alt="" coords="548,5,719,35"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ac9639ee4d88b873aa04c7f41627387e1"></a><!-- doxytag: member="CPSOptionHelper::fixCallbacks" ref="ac9639ee4d88b873aa04c7f41627387e1" args="($sOutput, $arCallbacks)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static fixCallbacks </td>
          <td>(</td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>sOutput</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>arCallbacks</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static, protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Fix up the callbacks </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>mixed</em>&nbsp;</td><td>$oValue </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>mixed</em>&nbsp;</td><td>$arCallbacks </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="CPSOptionHelper_8php_source.html#l00398">398</a> of file <a class="el" href="CPSOptionHelper_8php_source.html">CPSOptionHelper.php</a>.</p>

<p><div class="fragment"><pre class="fragment">    {
        $_sOut = $sOutput;

        <span class="keywordflow">foreach</span> ( $arCallbacks as $_sKey =&gt; $_oValue )
        {
            $_sQuote = <span class="charliteral">&#39;&quot;&#39;</span>;

            <span class="comment">//  Indicator to quote key...</span>
            <span class="keywordflow">if</span> ( <span class="stringliteral">&#39;!!!&#39;</span> == substr( $_sKey, 0, 3 ) )
            {
                $_sQuote = <span class="charliteral">&#39;\&#39;&#39;</span>;
                $_sKey = substr( $_sKey, 3 );
            }

            $_sSearch = <span class="charliteral">&#39;&quot;&#39;</span> . self::CB_KEY . $_sKey . <span class="stringliteral">&#39;&quot;:&quot;&#39;</span> . $_sKey . <span class="charliteral">&#39;&quot;&#39;</span>;

            <span class="keywordflow">if</span> ( self::isScriptCallback( $_oValue ) )
                $_sReplace = $_sQuote . $_sKey . $_sQuote . <span class="stringliteral">&#39; : &#39;</span> . $_oValue;
            <span class="keywordflow">else</span>
                $_sReplace = $_sKey . <span class="stringliteral">&#39; : \&#39;&#39;</span> . $_oValue . <span class="charliteral">&#39;\&#39;&#39;</span>;

            $_sOut = str_replace( $_sSearch, $_sReplace, $_sOut );
        }

        <span class="keywordflow">return</span> $_sOut;
    }
</pre></div></p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classCPSOptionHelper_ac9639ee4d88b873aa04c7f41627387e1_icgraph.png" border="0" usemap="#classCPSOptionHelper_ac9639ee4d88b873aa04c7f41627387e1_icgraph" alt=""/></div>
<map name="classCPSOptionHelper_ac9639ee4d88b873aa04c7f41627387e1_icgraph" id="classCPSOptionHelper_ac9639ee4d88b873aa04c7f41627387e1_icgraph">
<area shape="rect" id="node3" href="classCPSOptionHelper.html#a40877d061316ed1f0bca467b4e86a1b5" title="makeOptions" alt="" coords="149,5,256,35"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a015734d78f16cca14cad5df110e13715"></a><!-- doxytag: member="CPSOptionHelper::isScriptCallback" ref="a015734d78f16cca14cad5df110e13715" args="($sValue)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static isScriptCallback </td>
          <td>(</td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>sValue</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Check to see if the value follows a callback function pattern. Basically we want to check for values that should *NOT* be quoted.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>string</em>&nbsp;</td><td>$sValue </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>boolean </dd></dl>

<p>Definition at line <a class="el" href="CPSOptionHelper_8php_source.html#l00045">45</a> of file <a class="el" href="CPSOptionHelper_8php_source.html">CPSOptionHelper.php</a>.</p>

<p><div class="fragment"><pre class="fragment">    {
        <span class="keywordflow">return</span> is_string( $sValue ) &amp;&amp;
            (
                $sValue === <span class="stringliteral">&#39;true&#39;</span> ||
                $sValue === <span class="stringliteral">&#39;false&#39;</span> ||
                0 == strncasecmp( $sValue, <span class="stringliteral">&#39;function(&#39;</span>, 9 ) ||
                0 == strncasecmp( $sValue, <span class="stringliteral">&#39;new Date(&#39;</span>, 9 ) ||
                0 == strncasecmp( $sValue, <span class="stringliteral">&#39;jQuery(&#39;</span>, 7 ) ||
                0 == strncasecmp( $sValue, <span class="stringliteral">&#39;$(&#39;</span>, 2 )
            );
    }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a40877d061316ed1f0bca467b4e86a1b5"></a><!-- doxytag: member="CPSOptionHelper::makeOptions" ref="a40877d061316ed1f0bca467b4e86a1b5" args="(IPSOptionContainer $oContainer, $bPublicOnly=true, $iFormat=CPSHelperBase::OF_JSON, $bNoCheck=false)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static makeOptions </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="interfaceIPSOptionContainer.html">IPSOptionContainer</a> $&nbsp;</td>
          <td class="paramname"> <em>oContainer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>bPublicOnly</em> = <code>true</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>iFormat</em> = <code><a class="el" href="classCPSHelperBase.html#ae216f8dc124162fce9c831581cccad38">CPSHelperBase::OF_JSON</a></code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>bNoCheck</em> = <code>false</code></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="CPSOptionHelper_8php_source.html#l00230">230</a> of file <a class="el" href="CPSOptionHelper_8php_source.html">CPSOptionHelper.php</a>.</p>

<p><div class="fragment"><pre class="fragment">    {
        <span class="comment">//  Check them first...</span>
        <span class="keywordflow">if</span> ( ! $bNoCheck ) <a class="code" href="classCPSOptionHelper.html#a1196dfb53b5a9c5b1865efd2678c0bb5">self::validateOptions</a>( $oContainer );

        <span class="comment">//  Get our public callbacks...</span>
        $_arCallbacks = $oContainer-&gt;getValue( <span class="stringliteral">&#39;callbacks&#39;</span>, <a class="code" href="admin_8php.html#a2394bd91cde70158acb50a4a7f860ab5">array</a>() );

        <span class="comment">//  Remove it</span>
        $oContainer-&gt;unsetOption( <span class="stringliteral">&#39;callbacks&#39;</span> );

        <span class="comment">//  Our output array</span>
        $_arOut = <a class="code" href="admin_8php.html#a2394bd91cde70158acb50a4a7f860ab5">array</a>();
        $_sEncodedOptions = null;

        <span class="comment">//  Tag callbacks for special processing afterwards</span>
        <span class="keywordflow">foreach</span> ( $_arCallbacks as $_sKey =&gt; $_oValue )
        {
            <span class="keywordflow">if</span> ( ! empty( $_oValue ) )
                $_arOut[ <span class="stringliteral">&quot;__pscb_{$_sKey}&quot;</span> ] = $_sKey;
        }

        <span class="comment">//  Now build our final array...</span>
        $_arRaw = $oContainer-&gt;getRawOptions( <span class="keyword">true</span> );

        <span class="keywordflow">foreach</span>( $_arRaw as $_sKey =&gt; $_oOption )
        {
            <span class="comment">//  Skip nulls...</span>
            $_oValue = $_oOption-&gt;getValue();

            <span class="keywordflow">if</span> ( ! empty( $_oValue ) || <span class="charliteral">&#39;0&#39;</span> === $_oValue )
            {
                $_sExtName = $_oOption-&gt;getExternalName();

                <span class="comment">//  Check for callbacks in the inner array (.i.e. &quot;buttons&quot; from jqUI dialog)</span>
                <span class="keywordflow">if</span> ( is_array( $_oValue ) )
                {
                    <span class="keywordflow">foreach</span> ( $_oValue as $_sSubKey =&gt; $_oSubValue )
                    {
                        <span class="keywordflow">if</span> ( self::isScriptCallback( $_oSubValue ) )
                        {
                            $_arCallbacks[ $_sSubKey ] = $_oSubValue;
                            $_arOut[ $_sKey ][ <span class="stringliteral">&quot;__pscb_{$_sSubKey}&quot;</span> ] = $_sSubKey;
                        }
                        <span class="keywordflow">else</span>
                        {
                            <span class="keywordflow">if</span> ( ! isset( $_arOut[ $_sExtName ] ) || ! is_array( $_arOut[ $_sExtName ] ) ) $_arOut[ $_sExtName ] = <a class="code" href="admin_8php.html#a2394bd91cde70158acb50a4a7f860ab5">array</a>();
                            $_arOut[ $_sExtName ][ $_sSubKey ] = $_oSubValue;
                        }
                    }
                }
                <span class="keywordflow">else</span>
                {
                    <span class="keywordflow">if</span> ( self::isScriptCallback( $_oValue ) )
                    {
                        $_arCallbacks[ $_sKey ] = $_oValue;
                        $_arOut[ <span class="stringliteral">&quot;__pscb_{$_sKey}&quot;</span> ] = $_sKey;
                    }
                    <span class="keywordflow">else</span>
                        $_arOut[ $_sExtName ] = $_oValue;
                }
            }
        }

        <span class="keywordflow">if</span> ( count( $_arOut ) )
        {
            <span class="keywordflow">switch</span> ( $iFormat )
            {
                <span class="keywordflow">case</span> <a class="code" href="classCPSHelperBase.html#ae216f8dc124162fce9c831581cccad38">CPSHelperBase::OF_JSON</a>:
                    $_sEncodedOptions = CJSON::encode( $_arOut );
                    <span class="keywordflow">break</span>;

                <span class="keywordflow">case</span> <a class="code" href="classCPSHelperBase.html#ad861d7e1882caed33177c62354962537">CPSHelperBase::OF_HTTP</a>:
                    <span class="keywordflow">foreach</span> ( $_arOut as $_sKey =&gt; $_sValue )
                    {
                        <span class="keywordflow">if</span> ( ! empty( $_sValue ) )
                            $_sEncodedOptions .= <span class="charliteral">&#39;&amp;&#39;</span> . $_sKey . <span class="charliteral">&#39;=&#39;</span> . urlencode( $_sValue );
                    }
                    <span class="keywordflow">break</span>;

                <span class="keywordflow">case</span> <a class="code" href="classCPSHelperBase.html#a9976081cc6341d651113d98adf880a7c">CPSHelperBase::OF_ASSOC_ARRAY</a>:
<span class="comment">//                  if ( ! empty( $_arCallbacks ) )</span>
<span class="comment">//                      throw new CPSOptionException( &#39;Cannot use type &quot;ASSOC_ARRAY&quot; when callbacks are present.&#39; );</span>

                    $_sEncodedOptions = $_arOut;
                    <span class="keywordflow">break</span>;
            }

            <span class="comment">//  Fix up the callbacks and return...</span>
            <span class="keywordflow">return</span> <a class="code" href="classCPSOptionHelper.html#ac9639ee4d88b873aa04c7f41627387e1">self::fixCallbacks</a>( $_sEncodedOptions, $_arCallbacks );
        }

        <span class="comment">//  Nada</span>
        <span class="keywordflow">return</span> null;
    }
</pre></div></p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classCPSOptionHelper_a40877d061316ed1f0bca467b4e86a1b5_cgraph.png" border="0" usemap="#classCPSOptionHelper_a40877d061316ed1f0bca467b4e86a1b5_cgraph" alt=""/></div>
<map name="classCPSOptionHelper_a40877d061316ed1f0bca467b4e86a1b5_cgraph" id="classCPSOptionHelper_a40877d061316ed1f0bca467b4e86a1b5_cgraph">
<area shape="rect" id="node3" href="classCPSOptionHelper.html#ac9639ee4d88b873aa04c7f41627387e1" title="fixCallbacks" alt="" coords="228,31,324,60"/><area shape="rect" id="node5" href="interfaceIPSOptionContainer.html#a83519c09446eca599235b20a2cdcd094" title="IPSOptionContainer::unsetOption" alt="" coords="160,84,392,113"/><area shape="rect" id="node7" href="classCPSOptionHelper.html#a1196dfb53b5a9c5b1865efd2678c0bb5" title="validateOptions" alt="" coords="216,137,336,167"/><area shape="rect" id="node9" href="classCPSOptionHelper.html#af1ecea04b9292bde2418a4608ed30197" title="validateOption" alt="" coords="440,137,555,167"/><area shape="rect" id="node11" href="classCPSOption.html#ad21b6f2377a3af9fcacb3bd31451db2d" title="CPSOption::getIsRequired" alt="" coords="848,5,1032,35"/><area shape="rect" id="node17" href="classCPSOption.html#a2f1e46cc33a0f8eb5075dd312c3a189b" title="CPSOption::getOptionType" alt="" coords="603,57,792,87"/><area shape="rect" id="node20" href="classCPSOption.html#aabb9562c82b18321ed0510932298be7c" title="CPSOption::getValue" alt="" coords="620,111,775,140"/><area shape="rect" id="node25" href="classCPSHelperBase.html#a666bf0c7e9a3320e2e1ca2d9b65301e6" title="CPSHelperBase::nvl" alt="" coords="867,163,1013,192"/><area shape="rect" id="node27" href="classCPSOption.html#af95d42816651ce87c91ac3df15b2cc63" title="CPSOption::isValidType" alt="" coords="615,215,780,244"/><area shape="rect" id="node32" href="classCPSOption.html#a7449ef6f7e3fed98d2b777570d25a11c" title="CPSOption::setRule" alt="" coords="625,268,769,297"/><area shape="rect" id="node13" href="classCPSOption.html#a8803b9be3676330a9791b823d0d3f5f6" title="CPSOption::getRule" alt="" coords="1089,84,1233,113"/><area shape="rect" id="node15" href="classCPSHelperBase.html#a557243d020090bff2b3cb6cdb03d31aa" title="CPSHelperBase::o" alt="" coords="1283,84,1421,113"/><area shape="rect" id="node22" href="classCPSOption.html#af9b9401c63918169457fe8516324950f" title="CPSOption::getDefaultValue" alt="" coords="840,109,1040,139"/><area shape="rect" id="node34" href="classCPSHelperBase.html#a68ffb34193bb1fc4e9ba07af567b1641" title="CPSHelperBase::so" alt="" coords="868,268,1012,297"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="af245193a05c6d9de1d9fec6239b9b14b"></a><!-- doxytag: member="CPSOptionHelper::parseRulePattern" ref="af245193a05c6d9de1d9fec6239b9b14b" args="($oPattern, $bPrivate=false)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static parseRulePattern </td>
          <td>(</td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>oPattern</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>bPrivate</em> = <code>false</code></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Parses a rule pattern string</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>string</em>&nbsp;</td><td>$sKey The key </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>mixed</em>&nbsp;</td><td>$oPattern The pattern string or array </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>boolean</em>&nbsp;</td><td>$bPrivate Forces this option to be private </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>array </dd></dl>

<p>Definition at line <a class="el" href="CPSOptionHelper_8php_source.html#l00067">67</a> of file <a class="el" href="CPSOptionHelper_8php_source.html">CPSOptionHelper.php</a>.</p>

<p><div class="fragment"><pre class="fragment">    {
        <span class="comment">//  Seed our rules array...</span>
        $_arRules = <a class="code" href="classCPSOptionHelper.html#aa50035c5f1b103bc39bb60b4a1be1dae">self::defaultRuleSet</a>( $bPrivate );

        <span class="keywordflow">if</span> ( null !== $oPattern )
        {
            <span class="comment">//  Split up pattern (type{:defaultValue{:externalName{:isRequired{:allowedValue(s)}}}})</span>
            $_arPattern = ( ! is_array( $oPattern ) ) ? explode( <span class="charliteral">&#39;:&#39;</span>, $oPattern ) : $oPattern;

            <span class="comment">//  Type is required, but we can default to string.</span>
            $_arRules[ <a class="code" href="classCPSOption.html#aa978b1a784800b7a941c6a5871f77e2b">CPSOption::RPT_TYPE</a> ] = <a class="code" href="classCPSHelperBase.html#a557243d020090bff2b3cb6cdb03d31aa">CPSHelperBase::o</a>( $_arPattern, 0, <a class="code" href="classCPSHelperBase.html#a557243d020090bff2b3cb6cdb03d31aa">CPSHelperBase::o</a>( $_arRules, <a class="code" href="classCPSOption.html#aa978b1a784800b7a941c6a5871f77e2b">CPSOption::RPT_TYPE</a>, <span class="stringliteral">&#39;string&#39;</span> ) );

            <span class="comment">//  Fix up types...</span>
            <span class="keywordflow">switch</span> ( $_arRules[ <a class="code" href="classCPSOption.html#aa978b1a784800b7a941c6a5871f77e2b">CPSOption::RPT_TYPE</a> ] )
            {
                <span class="keywordflow">case</span> <span class="stringliteral">&#39;int&#39;</span>:
                    $_arRules[ CPSOption::RPT_TYPE ] = <span class="stringliteral">&#39;integer&#39;</span>;
                    <span class="keywordflow">break</span>;

                <span class="keywordflow">case</span> <span class="stringliteral">&#39;bool&#39;</span>:
                    $_arRules[ CPSOption::RPT_TYPE ] = <span class="stringliteral">&#39;boolean&#39;</span>;
                    <span class="keywordflow">break</span>;
            }

            <span class="comment">//  Default value (default default value is null)</span>
            <span class="keywordflow">if</span> ( $_arRules[ <a class="code" href="classCPSOption.html#a269e636bbdcfa28179f931679d48643f">CPSOption::RPT_DEFAULT</a> ] = <a class="code" href="classCPSHelperBase.html#a557243d020090bff2b3cb6cdb03d31aa">CPSHelperBase::o</a>( $_arPattern, 1, <a class="code" href="classCPSHelperBase.html#a557243d020090bff2b3cb6cdb03d31aa">CPSHelperBase::o</a>( $_arRules, <a class="code" href="classCPSOption.html#a269e636bbdcfa28179f931679d48643f">CPSOption::RPT_DEFAULT</a> ) ) )
            {
                <span class="comment">//  Evalute default if we have one...</span>
                <span class="keywordflow">if</span> ( $_arRules[ CPSOption::RPT_TYPE ] !== <span class="stringliteral">&#39;string&#39;</span> &amp;&amp; ! empty( $_arRules[ <a class="code" href="classCPSOption.html#a269e636bbdcfa28179f931679d48643f">CPSOption::RPT_DEFAULT</a> ] ) )
                    $_arRules[ CPSOption::RPT_DEFAULT ] = eval( <span class="stringliteral">&#39;return &#39;</span> . $_arRules[ CPSOption::RPT_DEFAULT ] . <span class="charliteral">&#39;;&#39;</span> );
            }

            <span class="comment">//  Different name for external use?</span>
            $_arRules[ <a class="code" href="classCPSOption.html#ac03762b40afa4745a976b2fd4b5cba8c">CPSOption::RPT_EXTERNAL_NAME</a> ] = <a class="code" href="classCPSHelperBase.html#a557243d020090bff2b3cb6cdb03d31aa">CPSHelperBase::o</a>( $_arPattern, 2, <a class="code" href="classCPSHelperBase.html#a557243d020090bff2b3cb6cdb03d31aa">CPSHelperBase::o</a>( $_arRules, <a class="code" href="classCPSOption.html#ac03762b40afa4745a976b2fd4b5cba8c">CPSOption::RPT_EXTERNAL_NAME</a> ) );

            <span class="comment">//  Required value? Must eval to bool(true)</span>
            $_arRules[ <a class="code" href="classCPSOption.html#a16a4aecf79ed0a222f179f0e44404099">CPSOption::RPT_REQUIRED</a> ] = ( bool )( eval( <span class="stringliteral">&#39;return &#39;</span> . <a class="code" href="classCPSHelperBase.html#a557243d020090bff2b3cb6cdb03d31aa">CPSHelperBase::o</a>( $_arPattern, 3, <a class="code" href="classCPSHelperBase.html#a557243d020090bff2b3cb6cdb03d31aa">CPSHelperBase::o</a>( $_arRules, <a class="code" href="classCPSOption.html#a16a4aecf79ed0a222f179f0e44404099">CPSOption::RPT_REQUIRED</a>, <span class="keyword">false</span> ) ) . <span class="charliteral">&#39;;&#39;</span> ) === true );

            <span class="comment">//  And finally the allowed values. If string contains &#39;|&#39;, will be transformed to an array</span>
            $_arRules[ <a class="code" href="classCPSOption.html#a15957bc41386cbb54751a774d2154721">CPSOption::RPT_ALLOWED</a> ] = ( is_string( $_oAllowed = <a class="code" href="classCPSHelperBase.html#a557243d020090bff2b3cb6cdb03d31aa">CPSHelperBase::o</a>( $_arPattern, 4, <a class="code" href="classCPSHelperBase.html#a557243d020090bff2b3cb6cdb03d31aa">CPSHelperBase::o</a>( $_arRules, <a class="code" href="classCPSOption.html#a15957bc41386cbb54751a774d2154721">CPSOption::RPT_ALLOWED</a> ) ) ) &amp;&amp; <span class="keyword">false</span> !== strpos( $_oAllowed, <span class="charliteral">&#39;|&#39;</span> ) ) ? explode( <span class="charliteral">&#39;|&#39;</span>, $_oAllowed ) : $_oAllowed;

            <span class="comment">//  Clean rules</span>
            <span class="keywordflow">foreach</span> ( $_arRules as $_sKey =&gt; $_oValue ) <span class="keywordflow">if</span> ( null === $_arRules[ $_sKey ] ) unset( $_arRules[ $_sKey ] );
        }

        <span class="comment">//  and return...</span>
        <span class="keywordflow">return</span> $_arRules;
    }
</pre></div></p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classCPSOptionHelper_af245193a05c6d9de1d9fec6239b9b14b_cgraph.png" border="0" usemap="#classCPSOptionHelper_af245193a05c6d9de1d9fec6239b9b14b_cgraph" alt=""/></div>
<map name="classCPSOptionHelper_af245193a05c6d9de1d9fec6239b9b14b_cgraph" id="classCPSOptionHelper_af245193a05c6d9de1d9fec6239b9b14b_cgraph">
<area shape="rect" id="node3" href="classCPSOptionHelper.html#aa50035c5f1b103bc39bb60b4a1be1dae" title="defaultRuleSet" alt="" coords="196,5,311,35"/><area shape="rect" id="node5" href="classCPSHelperBase.html#a557243d020090bff2b3cb6cdb03d31aa" title="CPSHelperBase::o" alt="" coords="184,59,323,88"/></map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classCPSOptionHelper_af245193a05c6d9de1d9fec6239b9b14b_icgraph.png" border="0" usemap="#classCPSOptionHelper_af245193a05c6d9de1d9fec6239b9b14b_icgraph" alt=""/></div>
<map name="classCPSOptionHelper_af245193a05c6d9de1d9fec6239b9b14b_icgraph" id="classCPSOptionHelper_af245193a05c6d9de1d9fec6239b9b14b_icgraph">
<area shape="rect" id="node3" href="classCPSOption.html#af26f441186ec53723e892616baec1c73" title="CPSOption::setRules" alt="" coords="185,5,335,35"/><area shape="rect" id="node5" href="classCPSOption.html#acadb0b05b1c434157e21e0551c2ca725" title="CPSOption::__construct" alt="" coords="385,5,556,35"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="af1ecea04b9292bde2418a4608ed30197"></a><!-- doxytag: member="CPSOptionHelper::validateOption" ref="af1ecea04b9292bde2418a4608ed30197" args="(CPSOption &amp;$oOption, $oValue=null)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static validateOption </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCPSOption.html">CPSOption</a> &amp;$&nbsp;</td>
          <td class="paramname"> <em>oOption</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>oValue</em> = <code>null</code></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Validates an option value against its rules. If $oValue is null, stored value is used. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em><a class="el" href="classCPSOption.html">CPSOption</a></em>&nbsp;</td><td>$oOption </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>mixed</em>&nbsp;</td><td>$oValue Optional value to use for validation purposes </td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Exceptions:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em><a class="el" href="classCPSOptionException.html">CPSOptionException</a></em>&nbsp;</td><td></td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="CPSOptionHelper_8php_source.html#l00149">149</a> of file <a class="el" href="CPSOptionHelper_8php_source.html">CPSOptionHelper.php</a>.</p>

<p><div class="fragment"><pre class="fragment">    {
        <span class="comment">//  We all start innocent</span>
        $_bPassed = <span class="keyword">true</span>;

        <span class="comment">//  Get the value to test</span>
        $_oValue = <a class="code" href="classCPSHelperBase.html#a666bf0c7e9a3320e2e1ca2d9b65301e6">CPSHelperBase::nvl</a>( $oValue, $oOption-&gt;getValue( <span class="keyword">true</span> ) );

        <span class="comment">//  Check required values...</span>
        <span class="keywordflow">if</span> ( ! $_bPassed = ( $oOption-&gt;getIsRequired() &amp;&amp; null === $_oValue ) )
            <span class="keywordflow">throw</span> <span class="keyword">new</span> <a class="code" href="classCPSOptionException.html">CPSOptionException</a>( <span class="stringliteral">&quot;Option \&quot;{$oOption-&gt;getName()}\&quot; is required.&quot;</span> );

        <span class="comment">//  Fix up types...</span>
        $_arType = $oOption-&gt;getOptionType();
        <span class="keywordflow">if</span> ( ! is_array( $_arType ) ) $_arType = <a class="code" href="admin_8php.html#a2394bd91cde70158acb50a4a7f860ab5">array</a>( $_arType );

        <span class="comment">//  Allowed type?</span>
        <span class="keywordflow">foreach</span> ( $_arType as $_sKey =&gt; $_sType )
        {
            <span class="comment">//  Check type...</span>
            <span class="keywordflow">switch</span> ( $_sType )
            {
                <span class="keywordflow">case</span> <span class="stringliteral">&#39;bool&#39;</span>:
                <span class="keywordflow">case</span> <span class="stringliteral">&#39;boolean&#39;</span>:
                    $_bPassed = is_bool( $_oValue );
                    $_sType = <span class="stringliteral">&#39;boolean&#39;</span>;
                    <span class="keywordflow">break</span>;

                <span class="keywordflow">case</span> <span class="stringliteral">&#39;int&#39;</span>:
                <span class="keywordflow">case</span> <span class="stringliteral">&#39;integer&#39;</span>:
                    $_bPassed = is_int( $_oValue );
                    $_sType = <span class="stringliteral">&#39;integer&#39;</span>;
                    <span class="keywordflow">break</span>;

                <span class="keywordflow">case</span> <span class="stringliteral">&#39;float&#39;</span>:
                    $_bPassed = is_float( $_oValue );
                    <span class="keywordflow">break</span>;

                <span class="keywordflow">case</span> <span class="stringliteral">&#39;double&#39;</span>:
                    $_bPassed = is_double( $_oValue );
                    <span class="keywordflow">break</span>;

                <span class="keywordflow">case</span> <span class="stringliteral">&#39;array&#39;</span>:
                    $_bPassed = is_array( $_oValue );
                    <span class="keywordflow">break</span>;

                <span class="keywordflow">case</span> <span class="stringliteral">&#39;object&#39;</span>:
                    $_bPassed = is_object( $_oValue ) || $_oValue === null;
                    <span class="keywordflow">break</span>;

                <span class="keywordflow">case</span> <span class="stringliteral">&#39;string&#39;</span>:
                    $_bPassed = is_string( $_oValue ) || $_oValue === null;
                    <span class="keywordflow">break</span>;

                <span class="keywordflow">default</span>:
                    <span class="comment">//  If we get here, we have unknown or user-defined type. If not null, test it.</span>
                    <span class="keywordflow">if</span> ( null !== $_sType &amp;&amp; <span class="stringliteral">&#39;NULL&#39;</span> !== $_sType ) $_bPassed = ( $_oValue instanceof $_sType );
                    <span class="keywordflow">break</span>;
            }

            <span class="keywordflow">if</span> ( ! $oOption-&gt;isValidType( $_sType ) )
                <span class="keywordflow">throw</span> <span class="keyword">new</span> <a class="code" href="classCPSOptionException.html">CPSOptionException</a>( Yii::t( __CLASS__, <span class="stringliteral">&#39;Invalid type &quot;{y}&quot; specified for &quot;{x}&quot;&#39;</span>, <a class="code" href="admin_8php.html#a2394bd91cde70158acb50a4a7f860ab5">array</a>( <span class="stringliteral">&#39;{y}&#39;</span> =&gt; $_sType, <span class="stringliteral">&#39;{x}&#39;</span> =&gt; $_sKey ) ), 1  );

            <span class="keywordflow">if</span> ( ! $_bPassed )
            {
                $_sValType = gettype( $_oValue );
                <span class="keywordflow">throw</span> <span class="keyword">new</span> <a class="code" href="classCPSOptionException.html">CPSOptionException</a>( <span class="stringliteral">&quot;Option \&quot;{$oOption-&gt;getName()}\&quot; expects values to be of type \&quot;{$_sType}\&quot;. \&quot;{$_sValType}\&quot; given.&quot;</span> );
            }

            $oOption-&gt;setRule( <a class="code" href="classCPSOption.html#aa978b1a784800b7a941c6a5871f77e2b">CPSOption::RPT_TYPE</a>, $_sType );
        }
    }
</pre></div></p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classCPSOptionHelper_af1ecea04b9292bde2418a4608ed30197_cgraph.png" border="0" usemap="#classCPSOptionHelper_af1ecea04b9292bde2418a4608ed30197_cgraph" alt=""/></div>
<map name="classCPSOptionHelper_af1ecea04b9292bde2418a4608ed30197_cgraph" id="classCPSOptionHelper_af1ecea04b9292bde2418a4608ed30197_cgraph">
<area shape="rect" id="node3" href="classCPSOption.html#ad21b6f2377a3af9fcacb3bd31451db2d" title="CPSOption::getIsRequired" alt="" coords="413,5,597,35"/><area shape="rect" id="node9" href="classCPSOption.html#a2f1e46cc33a0f8eb5075dd312c3a189b" title="CPSOption::getOptionType" alt="" coords="168,57,357,87"/><area shape="rect" id="node12" href="classCPSOption.html#aabb9562c82b18321ed0510932298be7c" title="CPSOption::getValue" alt="" coords="185,111,340,140"/><area shape="rect" id="node17" href="classCPSHelperBase.html#a666bf0c7e9a3320e2e1ca2d9b65301e6" title="CPSHelperBase::nvl" alt="" coords="432,163,579,192"/><area shape="rect" id="node19" href="classCPSOption.html#af95d42816651ce87c91ac3df15b2cc63" title="CPSOption::isValidType" alt="" coords="180,215,345,244"/><area shape="rect" id="node24" href="classCPSOption.html#a7449ef6f7e3fed98d2b777570d25a11c" title="CPSOption::setRule" alt="" coords="191,268,335,297"/><area shape="rect" id="node5" href="classCPSOption.html#a8803b9be3676330a9791b823d0d3f5f6" title="CPSOption::getRule" alt="" coords="655,84,799,113"/><area shape="rect" id="node7" href="classCPSHelperBase.html#a557243d020090bff2b3cb6cdb03d31aa" title="CPSHelperBase::o" alt="" coords="848,84,987,113"/><area shape="rect" id="node14" href="classCPSOption.html#af9b9401c63918169457fe8516324950f" title="CPSOption::getDefaultValue" alt="" coords="405,109,605,139"/><area shape="rect" id="node26" href="classCPSHelperBase.html#a68ffb34193bb1fc4e9ba07af567b1641" title="CPSHelperBase::so" alt="" coords="433,268,577,297"/></map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classCPSOptionHelper_af1ecea04b9292bde2418a4608ed30197_icgraph.png" border="0" usemap="#classCPSOptionHelper_af1ecea04b9292bde2418a4608ed30197_icgraph" alt=""/></div>
<map name="classCPSOptionHelper_af1ecea04b9292bde2418a4608ed30197_icgraph" id="classCPSOptionHelper_af1ecea04b9292bde2418a4608ed30197_icgraph">
<area shape="rect" id="node3" href="classCPSOptionHelper.html#a1196dfb53b5a9c5b1865efd2678c0bb5" title="validateOptions" alt="" coords="169,5,289,35"/><area shape="rect" id="node5" href="classCPSOptionHelper.html#a40877d061316ed1f0bca467b4e86a1b5" title="makeOptions" alt="" coords="339,5,445,35"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a1196dfb53b5a9c5b1865efd2678c0bb5"></a><!-- doxytag: member="CPSOptionHelper::validateOptions" ref="a1196dfb53b5a9c5b1865efd2678c0bb5" args="(IPSOptionContainer &amp;$oContainer)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static validateOptions </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="interfaceIPSOptionContainer.html">IPSOptionContainer</a> &amp;$&nbsp;</td>
          <td class="paramname"> <em>oContainer</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="CPSOptionHelper_8php_source.html#l00136">136</a> of file <a class="el" href="CPSOptionHelper_8php_source.html">CPSOptionHelper.php</a>.</p>

<p><div class="fragment"><pre class="fragment">    {
        <span class="comment">//  Get the option collection and validate</span>
        <span class="keywordflow">foreach</span> ( $oContainer as $_oOption )
            <a class="code" href="classCPSOptionHelper.html#af1ecea04b9292bde2418a4608ed30197">self::validateOption</a>( $_oOption );
    }
</pre></div></p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classCPSOptionHelper_a1196dfb53b5a9c5b1865efd2678c0bb5_cgraph.png" border="0" usemap="#classCPSOptionHelper_a1196dfb53b5a9c5b1865efd2678c0bb5_cgraph" alt=""/></div>
<map name="classCPSOptionHelper_a1196dfb53b5a9c5b1865efd2678c0bb5_cgraph" id="classCPSOptionHelper_a1196dfb53b5a9c5b1865efd2678c0bb5_cgraph">
<area shape="rect" id="node3" href="classCPSOptionHelper.html#af1ecea04b9292bde2418a4608ed30197" title="validateOption" alt="" coords="176,137,291,167"/><area shape="rect" id="node5" href="classCPSOption.html#ad21b6f2377a3af9fcacb3bd31451db2d" title="CPSOption::getIsRequired" alt="" coords="584,5,768,35"/><area shape="rect" id="node11" href="classCPSOption.html#a2f1e46cc33a0f8eb5075dd312c3a189b" title="CPSOption::getOptionType" alt="" coords="339,57,528,87"/><area shape="rect" id="node14" href="classCPSOption.html#aabb9562c82b18321ed0510932298be7c" title="CPSOption::getValue" alt="" coords="356,111,511,140"/><area shape="rect" id="node19" href="classCPSHelperBase.html#a666bf0c7e9a3320e2e1ca2d9b65301e6" title="CPSHelperBase::nvl" alt="" coords="603,163,749,192"/><area shape="rect" id="node21" href="classCPSOption.html#af95d42816651ce87c91ac3df15b2cc63" title="CPSOption::isValidType" alt="" coords="351,215,516,244"/><area shape="rect" id="node26" href="classCPSOption.html#a7449ef6f7e3fed98d2b777570d25a11c" title="CPSOption::setRule" alt="" coords="361,268,505,297"/><area shape="rect" id="node7" href="classCPSOption.html#a8803b9be3676330a9791b823d0d3f5f6" title="CPSOption::getRule" alt="" coords="825,84,969,113"/><area shape="rect" id="node9" href="classCPSHelperBase.html#a557243d020090bff2b3cb6cdb03d31aa" title="CPSHelperBase::o" alt="" coords="1019,84,1157,113"/><area shape="rect" id="node16" href="classCPSOption.html#af9b9401c63918169457fe8516324950f" title="CPSOption::getDefaultValue" alt="" coords="576,109,776,139"/><area shape="rect" id="node28" href="classCPSHelperBase.html#a68ffb34193bb1fc4e9ba07af567b1641" title="CPSHelperBase::so" alt="" coords="604,268,748,297"/></map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classCPSOptionHelper_a1196dfb53b5a9c5b1865efd2678c0bb5_icgraph.png" border="0" usemap="#classCPSOptionHelper_a1196dfb53b5a9c5b1865efd2678c0bb5_icgraph" alt=""/></div>
<map name="classCPSOptionHelper_a1196dfb53b5a9c5b1865efd2678c0bb5_icgraph" id="classCPSOptionHelper_a1196dfb53b5a9c5b1865efd2678c0bb5_icgraph">
<area shape="rect" id="node3" href="classCPSOptionHelper.html#a40877d061316ed1f0bca467b4e86a1b5" title="makeOptions" alt="" coords="176,5,283,35"/></map>
</div>
</p>

</div>
</div>
<hr/><h2>Field Documentation</h2>
<a class="anchor" id="a4652b705dc90fe7d967eecbf10901364"></a><!-- doxytag: member="CPSOptionHelper::CB_KEY" ref="a4652b705dc90fe7d967eecbf10901364" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="classCPSOptionHelper.html#a4652b705dc90fe7d967eecbf10901364">CB_KEY</a> = '__pscb_'</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>A key for use when mapping callbacks </p>

<p>Definition at line <a class="el" href="CPSOptionHelper_8php_source.html#l00032">32</a> of file <a class="el" href="CPSOptionHelper_8php_source.html">CPSOptionHelper.php</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>/usr/local/yiixl/lib/original/helpers/<a class="el" href="CPSOptionHelper_8php_source.html">CPSOptionHelper.php</a></li>
</ul>
</div>
<hr class="footer"/><address class="footer"><small>Generated on Thu Mar 24 2011 20:11:42 for "The Yii Extension Library Of Doom!" by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.1 </small></address>
</body>
</html>
