<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>&quot;The Yii Extension Library Of Doom!&quot;: /usr/local/yiixl/lib/original/helpers/CPSWidgetHelper.php Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.7.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul class="tablist">
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
<div class="header">
  <div class="headertitle">
<h1>/usr/local/yiixl/lib/original/helpers/CPSWidgetHelper.php</h1>  </div>
</div>
<div class="contents">
<a href="CPSWidgetHelper_8php.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 &lt;?php
<a name="l00031"></a>00031 <span class="keyword">class </span>CPSWidgetHelper <span class="keyword">extends</span> <a class="code" href="classCPSHelperBase.html">CPSHelperBase</a>
<a name="l00032"></a>00032 {
<a name="l00033"></a>00033     <span class="comment">//********************************************************************************</span>
<a name="l00034"></a>00034     <span class="comment">//* Constants</span>
<a name="l00035"></a>00035     <span class="comment">//********************************************************************************</span>
<a name="l00036"></a>00036 
<a name="l00040"></a>00040     <span class="keyword">const</span> ID_PREFIX = <span class="stringliteral">&#39;pye&#39;</span>;
<a name="l00041"></a>00041     <span class="keyword">const</span> STD_JQUI_FORM_CONTAINER_CLASS = <span class="stringliteral">&#39;ui-edit-container ui-widget&#39;</span>;
<a name="l00042"></a>00042     <span class="keyword">const</span> STD_FORM_CONTAINER_CLASS = <span class="stringliteral">&#39;ps-edit-form&#39;</span>;
<a name="l00043"></a>00043     <span class="keyword">const</span> STD_FORM_CLASS = <span class="stringliteral">&#39;yiiForm&#39;</span>;
<a name="l00044"></a>00044 
<a name="l00048"></a>00048     <span class="keyword">const</span>   TEXTAREA        = <span class="stringliteral">&#39;activeTextArea&#39;</span>;
<a name="l00049"></a>00049     <span class="keyword">const</span>   TEXT            = <span class="stringliteral">&#39;activeTextField&#39;</span>;
<a name="l00050"></a>00050     <span class="keyword">const</span>   HIDDEN          = <span class="stringliteral">&#39;activeHiddenField&#39;</span>;
<a name="l00051"></a>00051     <span class="keyword">const</span>   PASSWORD        = <span class="stringliteral">&#39;activePasswordField&#39;</span>;
<a name="l00052"></a>00052     <span class="keyword">const</span>   FILE            = <span class="stringliteral">&#39;activeFileField&#39;</span>;
<a name="l00053"></a>00053     <span class="keyword">const</span>   RADIO           = <span class="stringliteral">&#39;activeRadioButton&#39;</span>;
<a name="l00054"></a>00054     <span class="keyword">const</span>   CHECK           = <span class="stringliteral">&#39;activeCheckBox&#39;</span>;
<a name="l00055"></a>00055     <span class="keyword">const</span>   DROPDOWN        = <span class="stringliteral">&#39;activeDropDownList&#39;</span>;
<a name="l00056"></a>00056     <span class="keyword">const</span>   LISTBOX         = <span class="stringliteral">&#39;activeListBox&#39;</span>;
<a name="l00057"></a>00057     <span class="keyword">const</span>   CHECKLIST       = <span class="stringliteral">&#39;activeCheckBoxList&#39;</span>;
<a name="l00058"></a>00058     <span class="keyword">const</span>   RADIOLIST       = <span class="stringliteral">&#39;activeRadioButtonList&#39;</span>;
<a name="l00059"></a>00059     <span class="keyword">const</span>   WYSIWYG         = <span class="stringliteral">&#39;wysiwyg&#39;</span>;
<a name="l00060"></a>00060     <span class="keyword">const</span>   CKEDITOR        = <span class="stringliteral">&#39;CPSCKEditorWidget&#39;</span>;
<a name="l00061"></a>00061     <span class="keyword">const</span>   MARKITUP        = <span class="stringliteral">&#39;markItUp&#39;</span>;
<a name="l00062"></a>00062     <span class="keyword">const</span>   CODEDD          = <span class="stringliteral">&#39;activeCodeDropDownList&#39;</span>;
<a name="l00063"></a>00063     <span class="keyword">const</span>   DATADD          = <span class="stringliteral">&#39;activeDataDropDownList&#39;</span>;
<a name="l00064"></a>00064     <span class="keyword">const</span>   JQUI            = <span class="stringliteral">&#39;CPSjqUIWrapper&#39;</span>;
<a name="l00065"></a>00065     <span class="keyword">const</span>   FG_MENU         = <span class="stringliteral">&#39;CPSfgMenu&#39;</span>;
<a name="l00066"></a>00066     <span class="keyword">const</span>   CAPTCHA         = <span class="stringliteral">&#39;CCaptcha&#39;</span>;
<a name="l00067"></a>00067     <span class="keyword">const</span>   LABEL           = <span class="stringliteral">&#39;label&#39;</span>;
<a name="l00068"></a>00068     <span class="keyword">const</span>   LABEL_ACTIVE    = <span class="stringliteral">&#39;activeLabel&#39;</span>;
<a name="l00069"></a>00069     <span class="keyword">const</span>   MULTISELECT     = <span class="stringliteral">&#39;jqMultiselect&#39;</span>;
<a name="l00070"></a>00070     <span class="keyword">const</span>   MCDROPDOWN      = <span class="stringliteral">&#39;mcDropdown&#39;</span>;
<a name="l00071"></a>00071 
<a name="l00075"></a>00075     <span class="keyword">const</span>   CODE_DISPLAY    = <span class="stringliteral">&#39;inactiveCodeDisplay&#39;</span>;        <span class="comment">//  Not a real method, just a placeholder</span>
<a name="l00076"></a>00076     <span class="keyword">const</span>   TEXT_DISPLAY    = <span class="stringliteral">&#39;inactiveTextDisplay&#39;</span>;        <span class="comment">//  Not a real method, just a placeholder</span>
<a name="l00077"></a>00077 
<a name="l00081"></a>00081     <span class="keyword">const</span>   UI_DEFAULT = 0;
<a name="l00082"></a>00082     <span class="keyword">const</span>   UI_JQUERY = 1;
<a name="l00083"></a>00083 
<a name="l00087"></a>00087     <span class="keyword">const</span>   DD_GENERIC = 9999;
<a name="l00088"></a>00088     <span class="keyword">const</span>   DD_US_STATES = 1000;
<a name="l00089"></a>00089     <span class="keyword">const</span>   DD_MONTH_NUMBERS = 1001;
<a name="l00090"></a>00090     <span class="keyword">const</span>   DD_MONTH_NAMES = 1002;
<a name="l00091"></a>00091     <span class="keyword">const</span>   DD_YEARS = 1003;
<a name="l00092"></a>00092     <span class="keyword">const</span>   DD_CC_TYPES = 1004;
<a name="l00093"></a>00093     <span class="keyword">const</span>   DD_DAY_NUMBERS = 1005;
<a name="l00094"></a>00094     <span class="keyword">const</span>   DD_YES_NO = 1006;
<a name="l00095"></a>00095     <span class="keyword">const</span>   DD_TIME_ZONES = 1007;
<a name="l00096"></a>00096     <span class="keyword">const</span>   DD_YES_NO_ALL = 1008;
<a name="l00097"></a>00097     <span class="keyword">const</span>   DD_JQUI_THEMES = 1009;
<a name="l00098"></a>00098 
<a name="l00102"></a>00102     <span class="keyword">const</span>   DD_CODE_TABLE = <span class="stringliteral">&#39;activeCodeDropDownList&#39;</span>;
<a name="l00103"></a>00103     <span class="keyword">const</span>   DD_DATA_LOOKUP = <span class="stringliteral">&#39;activeDataDropDownList&#39;</span>;
<a name="l00104"></a>00104 
<a name="l00108"></a>00108     <span class="keyword">const</span>   <a class="code" href="gii_2model_2templates_2default_2model_8php.html#a41b069b7c63debb335b91e1dcda99046">HTML</a> = 0;
<a name="l00109"></a>00109     <span class="keyword">const</span>   XHTML = 1;
<a name="l00110"></a>00110     <span class="keyword">const</span>   STRICT = 2;
<a name="l00111"></a>00111     <span class="keyword">const</span>   FRAMESET = 4;
<a name="l00112"></a>00112     <span class="keyword">const</span>   TRANSITIONAL = 8;
<a name="l00113"></a>00113     <span class="keyword">const</span>   HTML32 = -1;
<a name="l00114"></a>00114     <span class="keyword">const</span>   HTML20 = -2;
<a name="l00115"></a>00115     <span class="keyword">const</span>   LOOSE = -3;
<a name="l00116"></a>00116 
<a name="l00117"></a>00117     <span class="comment">//********************************************************************************</span>
<a name="l00118"></a>00118     <span class="comment">//* Member Variables</span>
<a name="l00119"></a>00119     <span class="comment">//********************************************************************************</span>
<a name="l00120"></a>00120 
<a name="l00121"></a>00121     <span class="keyword">protected</span> <span class="keyword">static</span> $_showRequiredLabel = <span class="keyword">true</span>;
<a name="l00122"></a>00122     <span class="keyword">public</span> <span class="keyword">static</span> function getShowRequiredLabel() { <span class="keywordflow">return</span> self::$_showRequiredLabel; }
<a name="l00123"></a>00123     <span class="keyword">public</span> <span class="keyword">static</span> function setShowRequiredLabel( $value ) { self::$_showRequiredLabel = $value; }
<a name="l00124"></a>00124     <span class="keyword">public</span> <span class="keyword">static</span> function getRequiredLabel() { <span class="keywordflow">return</span> self::$_showRequiredLabel ? self::$afterRequiredLabel : null; }
<a name="l00125"></a>00125 
<a name="l00130"></a>00130     <span class="keyword">protected</span> <span class="keyword">static</span> $m_iIdCount = 0;
<a name="l00131"></a>00131     <span class="keyword">public</span> <span class="keyword">static</span> function getNextIdCount() { <span class="keywordflow">return</span> self::$m_iIdCount++; }
<a name="l00132"></a>00132 
<a name="l00137"></a>00137     <span class="keyword">protected</span> <span class="keyword">static</span> $m_arInputMap = <a class="code" href="admin_8php.html#a2394bd91cde70158acb50a4a7f860ab5">array</a>(
<a name="l00138"></a>00138         self::TEXTAREA      =&gt; <span class="stringliteral">&#39;textarea&#39;</span>,
<a name="l00139"></a>00139         self::TEXT          =&gt; <span class="stringliteral">&#39;text&#39;</span>,
<a name="l00140"></a>00140         self::HIDDEN        =&gt; <span class="stringliteral">&#39;hidden&#39;</span>,
<a name="l00141"></a>00141         self::PASSWORD      =&gt; <span class="stringliteral">&#39;password&#39;</span>,
<a name="l00142"></a>00142         self::FILE          =&gt; <span class="stringliteral">&#39;file&#39;</span>,
<a name="l00143"></a>00143         self::RADIO         =&gt; <span class="stringliteral">&#39;radio&#39;</span>,
<a name="l00144"></a>00144         self::CHECK         =&gt; <span class="stringliteral">&#39;checkbox&#39;</span>,
<a name="l00145"></a>00145     );
<a name="l00146"></a>00146 
<a name="l00151"></a>00151     <span class="keyword">protected</span> <span class="keyword">static</span> $m_bValidating = <span class="keyword">false</span>;
<a name="l00152"></a>00152 
<a name="l00157"></a>00157     <span class="keyword">protected</span> <span class="keyword">static</span> $m_bInForm = <span class="keyword">false</span>;
<a name="l00158"></a>00158 
<a name="l00163"></a>00163     <span class="keyword">protected</span> <span class="keyword">static</span> $m_sOnClass = null;
<a name="l00164"></a>00164 
<a name="l00169"></a>00169     <span class="keyword">protected</span> <span class="keyword">static</span> $m_sOffClass = null;
<a name="l00170"></a>00170 
<a name="l00175"></a>00175     <span class="keyword">protected</span> <span class="keyword">static</span> $m_sCurrentFormId = null;
<a name="l00176"></a>00176     <span class="keyword">public</span> <span class="keyword">static</span> function getCurrentFormId() { <span class="keywordflow">return</span> self::$m_sCurrentFormId; }
<a name="l00177"></a>00177 
<a name="l00182"></a>00182     <span class="keyword">protected</span> <span class="keyword">static</span> $m_sLastFieldId = null;
<a name="l00183"></a>00183     <span class="keyword">public</span> <span class="keyword">static</span> function getLastFieldId() { <span class="keywordflow">return</span> self::$m_sLastFieldId; }
<a name="l00184"></a>00184 
<a name="l00189"></a>00189     <span class="keyword">protected</span> <span class="keyword">static</span> $m_sLastFieldName = null;
<a name="l00190"></a>00190     <span class="keyword">public</span> <span class="keyword">static</span> function getLastFieldName() { <span class="keywordflow">return</span> self::$m_sLastFieldName; }
<a name="l00191"></a>00191 
<a name="l00196"></a>00196     <span class="keyword">protected</span> <span class="keyword">static</span> $m_bCssLoaded = <span class="keyword">false</span>;
<a name="l00197"></a>00197 
<a name="l00198"></a>00198     <span class="comment">//********************************************************************************</span>
<a name="l00199"></a>00199     <span class="comment">//* Properties</span>
<a name="l00200"></a>00200     <span class="comment">//********************************************************************************</span>
<a name="l00201"></a>00201 
<a name="l00206"></a>00206     <span class="keyword">protected</span> <span class="keyword">static</span> $m_sCodeModel = null;
<a name="l00207"></a>00207     <span class="keyword">public</span> <span class="keyword">static</span> function getCodeModel() { <span class="keywordflow">return</span> self::$m_sCodeModel; }
<a name="l00208"></a>00208     <span class="keyword">public</span> <span class="keyword">static</span> function setCodeModel( $sValue ) { self::$m_sCodeModel = $sValue; }
<a name="l00209"></a>00209 
<a name="l00215"></a>00215     <span class="keyword">protected</span> <span class="keyword">static</span> $m_sHintTemplate = <span class="stringliteral">&#39;&lt;p class=&quot;hint&quot;&gt;%%HINT%%&lt;/p&gt;&#39;</span>;
<a name="l00216"></a>00216     <span class="keyword">public</span> <span class="keyword">static</span> function getHintTemplate() { <span class="keywordflow">return</span> self::$m_sHintTemplate; }
<a name="l00217"></a>00217     <span class="keyword">public</span> <span class="keyword">static</span> function setHintTemplate( $sValue ) { self::$m_sHintTemplate = $sValue; }
<a name="l00218"></a>00218 
<a name="l00223"></a>00223     <span class="keyword">public</span> <span class="keyword">static</span> $m_bUseIdPrefixes = <span class="keyword">false</span>;
<a name="l00224"></a>00224     <span class="keyword">public</span> <span class="keyword">static</span> function getUseIdPrefixes() { <span class="keywordflow">return</span> self::$m_bUseIdPrefixes; }
<a name="l00225"></a>00225     <span class="keyword">public</span> <span class="keyword">static</span> function setUseIdPrefixes( $bValue ) { self::$m_bUseIdPrefixes = $bValue; }
<a name="l00226"></a>00226 
<a name="l00231"></a>00231     <span class="keyword">public</span> <span class="keyword">static</span> $m_arIdPrefixes = <a class="code" href="admin_8php.html#a2394bd91cde70158acb50a4a7f860ab5">array</a>(
<a name="l00232"></a>00232         <span class="stringliteral">&#39;text&#39;</span> =&gt; <span class="stringliteral">&#39;txt_&#39;</span>,
<a name="l00233"></a>00233         <span class="stringliteral">&#39;password&#39;</span> =&gt; <span class="stringliteral">&#39;txt_&#39;</span>,
<a name="l00234"></a>00234         <span class="stringliteral">&#39;textarea&#39;</span> =&gt; <span class="stringliteral">&#39;txt_&#39;</span>,
<a name="l00235"></a>00235         <span class="stringliteral">&#39;radio&#39;</span> =&gt; <span class="stringliteral">&#39;radio_&#39;</span>,
<a name="l00236"></a>00236         <span class="stringliteral">&#39;check&#39;</span> =&gt; <span class="stringliteral">&#39;check_&#39;</span>,
<a name="l00237"></a>00237         <span class="stringliteral">&#39;label&#39;</span> =&gt; <span class="stringliteral">&#39;label_&#39;</span>,
<a name="l00238"></a>00238         <span class="stringliteral">&#39;select&#39;</span> =&gt; <span class="stringliteral">&#39;slt_&#39;</span>,
<a name="l00239"></a>00239         <span class="stringliteral">&#39;file&#39;</span> =&gt; <span class="stringliteral">&#39;file_&#39;</span>,
<a name="l00240"></a>00240     );
<a name="l00241"></a>00241     <span class="keyword">public</span> <span class="keyword">static</span> function getIdPrefix() { <span class="keywordflow">return</span> self::$m_bUseIdPrefixes ? PS::o( self::$m_arIdPrefixes, $sType ) : null; }
<a name="l00242"></a>00242 
<a name="l00247"></a>00247     <span class="keyword">public</span> <span class="keyword">static</span> $m_bUseNamePrefixes = <span class="keyword">false</span>;
<a name="l00248"></a>00248     <span class="keyword">public</span> <span class="keyword">static</span> function getUseNamePrefixes() { <span class="keywordflow">return</span> self::$m_bUseNamePrefixes; }
<a name="l00249"></a>00249     <span class="keyword">public</span> <span class="keyword">static</span> function setUseNamePrefixes( $bValue ) { self::$m_bUseNamePrefixes = $bValue; }
<a name="l00250"></a>00250 
<a name="l00255"></a>00255     <span class="keyword">public</span> <span class="keyword">static</span> $m_arNamePrefixes = <a class="code" href="admin_8php.html#a2394bd91cde70158acb50a4a7f860ab5">array</a>();
<a name="l00256"></a>00256     <span class="keyword">public</span> <span class="keyword">static</span> function getNamePrefix( $eType ) { <span class="keywordflow">return</span> self::$m_bUseNamePrefixes ? PS::o( self::$m_arNamePrefixes, $eType ) : null; }
<a name="l00257"></a>00257     <span class="keyword">public</span> <span class="keyword">static</span> function setNamePrefix( $eType, $sValue ) { self::$m_arNamePrefixes[ $eType ] = $sValue; }
<a name="l00258"></a>00258 
<a name="l00263"></a>00263     <span class="keyword">protected</span> <span class="keyword">static</span> $m_sRequiredHtml = null;
<a name="l00264"></a>00264     <span class="keyword">public</span> <span class="keyword">static</span> function getRequiredHtml() { <span class="keywordflow">return</span> self::$m_sRequiredHtml; }
<a name="l00265"></a>00265     <span class="keyword">public</span> <span class="keyword">static</span> function setRequiredHtml( $sValue ) { self::$m_sRequiredHtml = $sValue; }
<a name="l00266"></a>00266 
<a name="l00271"></a>00271     <span class="keyword">protected</span> <span class="keyword">static</span> $m_sLabelSuffix = <span class="charliteral">&#39;:&#39;</span>;
<a name="l00272"></a>00272     <span class="keyword">public</span> <span class="keyword">static</span> function getLabelSuffix() { <span class="keywordflow">return</span> self::$m_sLabelSuffix; }
<a name="l00273"></a>00273     <span class="keyword">public</span> <span class="keyword">static</span> function setLabelSuffix( $sValue ) { self::$m_sLabelSuffix = $sValue; }
<a name="l00274"></a>00274 
<a name="l00279"></a>00279     <span class="keyword">protected</span> <span class="keyword">static</span> $m_sFormFieldContainer = <span class="stringliteral">&#39;div&#39;</span>;
<a name="l00280"></a>00280     <span class="keyword">public</span> <span class="keyword">static</span> function getFormFieldContainer() { <span class="keywordflow">return</span> self::$m_sFormFieldContainer; }
<a name="l00281"></a>00281     <span class="keyword">public</span> <span class="keyword">static</span> function setFormFieldContainer( $sValue ) { self::$m_sFormFieldContainer = $sValue; }
<a name="l00282"></a>00282 
<a name="l00287"></a>00287     <span class="keyword">protected</span> <span class="keyword">static</span> $m_sFormFieldContainerClass = <span class="stringliteral">&#39;simple&#39;</span>;
<a name="l00288"></a>00288     <span class="keyword">public</span> <span class="keyword">static</span> function getFormFieldContainerClass() { <span class="keywordflow">return</span> self::$m_sFormFieldContainerClass; }
<a name="l00289"></a>00289     <span class="keyword">public</span> <span class="keyword">static</span> function setFormFieldContainerClass( $sValue ) { self::$m_sFormFieldContainerClass = $sValue; }
<a name="l00290"></a>00290 
<a name="l00295"></a>00295     <span class="keyword">protected</span> <span class="keyword">static</span> $m_sFormFieldContainerPrefix = <span class="stringliteral">&#39;PIF&#39;</span>;
<a name="l00296"></a>00296     <span class="keyword">public</span> <span class="keyword">static</span> function getFormFieldContainerPrefix() { <span class="keywordflow">return</span> self::$m_sFormFieldContainerPrefix; }
<a name="l00297"></a>00297     <span class="keyword">public</span> <span class="keyword">static</span> function setFormFieldContainerPrefix( $sValue ) { self::$m_sFormFieldContainerPrefix = $sValue; }
<a name="l00298"></a>00298 
<a name="l00299"></a>00299     <span class="comment">//********************************************************************************</span>
<a name="l00300"></a>00300     <span class="comment">//* Public methods</span>
<a name="l00301"></a>00301     <span class="comment">//********************************************************************************</span>
<a name="l00302"></a>00302 
<a name="l00307"></a>00307     <span class="keyword">public</span> <span class="keyword">static</span> function getWidgetId( $sPrefix = self::ID_PREFIX )
<a name="l00308"></a>00308     {
<a name="l00309"></a>00309         <span class="keywordflow">return</span> $sPrefix . self::getNextIdCount();
<a name="l00310"></a>00310     }
<a name="l00311"></a>00311 
<a name="l00331"></a>00331     <span class="keyword">public</span> <span class="keyword">static</span> function field( $inputFieldType, CModel $model, $attributeName, $arOptions = <a class="code" href="admin_8php.html#a2394bd91cde70158acb50a4a7f860ab5">array</a>() )
<a name="l00332"></a>00332     {
<a name="l00333"></a>00333         $_arDivOpts = PS::o( $arOptions, <span class="stringliteral">&#39;_divOpts&#39;</span>, <a class="code" href="admin_8php.html#a2394bd91cde70158acb50a4a7f860ab5">array</a>(), <span class="keyword">true</span> );
<a name="l00334"></a>00334         $_sHint = PS::o( $arOptions, <span class="stringliteral">&#39;hint&#39;</span>, null, <span class="keyword">true</span> );
<a name="l00335"></a>00335 
<a name="l00336"></a>00336         <span class="comment">//  A little switcheroo...</span>
<a name="l00337"></a>00337         <span class="keywordflow">if</span> ( $inputFieldType == PS::CODE_DISPLAY )
<a name="l00338"></a>00338         {
<a name="l00339"></a>00339             $inputFieldType = PS::TEXT_DISPLAY;
<a name="l00340"></a>00340             $arOptions[<span class="stringliteral">&#39;transform&#39;</span>] = <span class="charliteral">&#39;*&#39;</span>;
<a name="l00341"></a>00341             $arOptions[<span class="stringliteral">&#39;name&#39;</span>] = $arOptions[<span class="stringliteral">&#39;id&#39;</span>] = <span class="stringliteral">&#39;disp_&#39;</span> . self::getNextIdCount() . <span class="charliteral">&#39;_&#39;</span> . $attributeName;
<a name="l00342"></a>00342             $arOptions[<span class="stringliteral">&#39;class&#39;</span>] = PS::addClass( $arOptions[<span class="stringliteral">&#39;class&#39;</span>], <span class="stringliteral">&#39;ps-text-display&#39;</span> );
<a name="l00343"></a>00343             $_output = PS::activeHiddenField( $model, $attributeName );
<a name="l00344"></a>00344             $_output .= PS::field( $inputFieldType, $model, $attributeName, $arOptions );
<a name="l00345"></a>00345         }
<a name="l00346"></a>00346         <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( $inputFieldType == PS::MULTISELECT )
<a name="l00347"></a>00347         {
<a name="l00348"></a>00348             <span class="comment">//  Another special dealio</span>
<a name="l00349"></a>00349             $widgetOptions = PS::o( $arOptions, <span class="stringliteral">&#39;widgetOptions&#39;</span>, <a class="code" href="admin_8php.html#a2394bd91cde70158acb50a4a7f860ab5">array</a>(), <span class="keyword">true</span> );
<a name="l00350"></a>00350             $widgetOptions[<span class="stringliteral">&#39;name&#39;</span>] = PS::o( $arOptions, <span class="stringliteral">&#39;name&#39;</span>, $attributeName, <span class="keyword">true</span> );
<a name="l00351"></a>00351             $widgetOptions[<span class="stringliteral">&#39;id&#39;</span>] = PS::o( $arOptions, <span class="stringliteral">&#39;id&#39;</span>, $widgetOptions[<span class="stringliteral">&#39;name&#39;</span>], <span class="keyword">true</span> );
<a name="l00352"></a>00352             $widgetOptions[<span class="stringliteral">&#39;naked&#39;</span>] = <span class="keyword">true</span>;
<a name="l00353"></a>00353             $widgetOptions[<span class="stringliteral">&#39;extraScriptFiles&#39;</span>] = <a class="code" href="admin_8php.html#a2394bd91cde70158acb50a4a7f860ab5">array</a>( <span class="stringliteral">&#39;js/plugins/blockUI/jquery.blockUI.js&#39;</span>, <span class="stringliteral">&#39;js/plugins/localisation/jquery.localisation-min.js&#39;</span>, <span class="stringliteral">&#39;js/plugins/tmpl/jquery.tmpl.1.1.1.js&#39;</span> );
<a name="l00354"></a>00354 
<a name="l00355"></a>00355             $_selectedItem = PS::o( $arOptions, <span class="stringliteral">&#39;selected&#39;</span>, null, <span class="keyword">true</span> );
<a name="l00356"></a>00356 
<a name="l00357"></a>00357             <a class="code" href="classCPSjQueryWidget.html#af09cbabc6ce2c1d9d9efb7ae308ea0f3">CPSjQueryWidget::create</a>( <span class="stringliteral">&#39;multiselect&#39;</span>, $widgetOptions );
<a name="l00358"></a>00358             $arOptions[<span class="stringliteral">&#39;class&#39;</span>] = PS::addClass( PS::o( $arOptions, <span class="stringliteral">&#39;class&#39;</span>, null ), <span class="stringliteral">&#39;multiselect&#39;</span> );
<a name="l00359"></a>00359             $arOptions[<span class="stringliteral">&#39;multiple&#39;</span>] = <span class="stringliteral">&#39;multiple&#39;</span>;
<a name="l00360"></a>00360 
<a name="l00361"></a>00361             <span class="keywordflow">return</span> self::dropDownList( $attributeName, $_selectedItem, PS::o( $arOptions, <span class="stringliteral">&#39;data&#39;</span>, null, <span class="keyword">true</span> ), $arOptions );
<a name="l00362"></a>00362         }
<a name="l00363"></a>00363         <span class="keywordflow">else</span>
<a name="l00364"></a>00364         {
<a name="l00365"></a>00365             <span class="comment">//  Get our operating parameters</span>
<a name="l00366"></a>00366             $_label = PS::o( $arOptions, <span class="stringliteral">&#39;label&#39;</span>, null, <span class="keyword">true</span> );
<a name="l00367"></a>00367             $_labelOptions = PS::o( $arOptions, <span class="stringliteral">&#39;labelOptions&#39;</span>, <a class="code" href="admin_8php.html#a2394bd91cde70158acb50a4a7f860ab5">array</a>(), <span class="keyword">true</span> );
<a name="l00368"></a>00368 
<a name="l00369"></a>00369             <span class="keywordflow">if</span> ( $inputFieldType == PS::TEXTAREA ) $_labelOptions[<span class="stringliteral">&#39;style&#39;</span>] = PS::o( $_labelOptions, <span class="stringliteral">&#39;style&#39;</span> ) . <span class="stringliteral">&#39;vertical-align:top;&#39;</span>;
<a name="l00370"></a>00370 
<a name="l00371"></a>00371             $_suffixToUse = PS::o( $_labelOptions, <span class="stringliteral">&#39;noSuffix&#39;</span>, <span class="keyword">false</span>, <span class="keyword">true</span> ) ? <span class="stringliteral">&#39;&#39;</span> : self::$m_sLabelSuffix;
<a name="l00372"></a>00372             $_widgetOptions = PS::o( $arOptions, <span class="stringliteral">&#39;widgetOptions&#39;</span>, <a class="code" href="admin_8php.html#a2394bd91cde70158acb50a4a7f860ab5">array</a>(), <span class="keyword">true</span> );
<a name="l00373"></a>00373             $_arData = PS::o( $arOptions, <span class="stringliteral">&#39;data&#39;</span>, <a class="code" href="admin_8php.html#a2394bd91cde70158acb50a4a7f860ab5">array</a>(), <span class="keyword">true</span> );
<a name="l00374"></a>00374             $_sHtml = PS::o( $arOptions, <span class="stringliteral">&#39;_appendHtml&#39;</span>, null, <span class="keyword">true</span> );
<a name="l00375"></a>00375             $_prependHtml = PS::o( $arOptions, <span class="stringliteral">&#39;_prependHtml&#39;</span>, null, <span class="keyword">true</span> );
<a name="l00376"></a>00376             $_divClass = PS::o( $arOptions, <span class="stringliteral">&#39;_divClass&#39;</span>, null, <span class="keyword">true</span> );
<a name="l00377"></a>00377             $_transform = PS::o( $arOptions, <span class="stringliteral">&#39;transform&#39;</span>, null, <span class="keyword">true</span> );
<a name="l00378"></a>00378             $_title = PS::o( $arOptions, <span class="stringliteral">&#39;title&#39;</span>, null );
<a name="l00379"></a>00379             $_valueMap = PS::o( $arOptions, <span class="stringliteral">&#39;valueMap&#39;</span>, <a class="code" href="admin_8php.html#a2394bd91cde70158acb50a4a7f860ab5">array</a>(), <span class="keyword">true</span> );
<a name="l00380"></a>00380             $_content = PS::o( $arOptions, <span class="stringliteral">&#39;content&#39;</span>, null, <span class="keyword">true</span> );
<a name="l00381"></a>00381 
<a name="l00382"></a>00382             <span class="comment">//  Value map...</span>
<a name="l00383"></a>00383             <span class="keywordflow">if</span> ( in_array( $model-&gt;{$attributeName}, array_keys( $_valueMap ) ) &amp;&amp; isset( $_valueMap[$model-&gt;{$attributeName}] ) )
<a name="l00384"></a>00384                 $arOptions[<span class="stringliteral">&#39;value&#39;</span>] = $_valueMap[$model-&gt;{$attributeName}];
<a name="l00385"></a>00385 
<a name="l00386"></a>00386             <span class="comment">//  Do auto-tooltipping...</span>
<a name="l00387"></a>00387             <span class="keywordflow">if</span> ( ! $_title &amp;&amp; $model &amp;&amp; method_exists( $model, <span class="stringliteral">&#39;attributeTooltips&#39;</span> ) )
<a name="l00388"></a>00388             {
<a name="l00389"></a>00389                 <span class="keywordflow">if</span> ( $_arTemp = $model-&gt;attributeTooltips() )
<a name="l00390"></a>00390                 {
<a name="l00391"></a>00391                     <span class="keywordflow">if</span> ( isset( $_arTemp[$attributeName] ) )
<a name="l00392"></a>00392                         $arOptions[<span class="stringliteral">&#39;title&#39;</span>] = self::encode( $_arTemp[ $attributeName ] );
<a name="l00393"></a>00393                 }
<a name="l00394"></a>00394             }
<a name="l00395"></a>00395 
<a name="l00396"></a>00396             <span class="comment">//  Denote checkbox/radiobutton labels</span>
<a name="l00397"></a>00397             <span class="keywordflow">if</span> ( ! $_divClass &amp; ( $inputFieldType == self::CHECK || $inputFieldType == self::RADIO || $inputFieldType == self::CHECKLIST || $inputFieldType == self::RADIOLIST ) )
<a name="l00398"></a>00398                 $_divClass = <span class="stringliteral">&#39;chk_label&#39;</span>;
<a name="l00399"></a>00399 
<a name="l00400"></a>00400             <span class="comment">//  Need an id for div tag</span>
<a name="l00401"></a>00401             <span class="keywordflow">if</span> ( ! isset( $arOptions[ <span class="stringliteral">&#39;id&#39;</span> ] ) ) $arOptions[ <span class="stringliteral">&#39;id&#39;</span> ] = self::getIdByName( self::resolveName( $model, $attributeName ) );
<a name="l00402"></a>00402 
<a name="l00403"></a>00403             <span class="comment">//  Preset class for hover effects if enabled...</span>
<a name="l00404"></a>00404             <span class="keywordflow">if</span> ( isset( self::$m_sOffClass ) &amp;&amp; ! isset( $arOptions[ <span class="stringliteral">&#39;class&#39;</span> ] ) )
<a name="l00405"></a>00405                 $arOptions[ <span class="stringliteral">&#39;class&#39;</span> ] = self::$m_sOffClass;
<a name="l00406"></a>00406 
<a name="l00407"></a>00407             <span class="keywordflow">if</span> ( null == $model )
<a name="l00408"></a>00408                 $_output = self::label( $_label, $arOptions[ <span class="stringliteral">&#39;id&#39;</span> ], $_labelOptions );
<a name="l00409"></a>00409             <span class="keywordflow">else</span>
<a name="l00410"></a>00410             {
<a name="l00411"></a>00411                 <span class="comment">//  Set label name</span>
<a name="l00412"></a>00412                 <span class="keywordflow">if</span> ( $_label === <span class="keyword">false</span> )
<a name="l00413"></a>00413                     $_labelOptions[<span class="stringliteral">&#39;label&#39;</span>] = <span class="keyword">false</span>;
<a name="l00414"></a>00414                 <span class="keywordflow">else</span>
<a name="l00415"></a>00415                     $_labelOptions[<span class="stringliteral">&#39;label&#39;</span>] = PS::nvl( $_label, PS::nvl( $model-&gt;getAttributeLabel( $attributeName ), $attributeName ) ) . $_suffixToUse;
<a name="l00416"></a>00416 
<a name="l00417"></a>00417                 $_output = ( $inputFieldType == PS::TEXT_DISPLAY ? self::activeLabel( $model, $attributeName, $_labelOptions ) : self::activeLabelEx( $model, $attributeName, $_labelOptions ) );
<a name="l00418"></a>00418             }
<a name="l00419"></a>00419 
<a name="l00420"></a>00420             <span class="comment">//  Do a value transform if requested</span>
<a name="l00421"></a>00421             <span class="keywordflow">if</span> ( $_transform &amp;&amp; $model ) $model-&gt;{$attributeName} = <a class="code" href="classCPSTransform.html#adaa9f9a55104660a4b1eb1cd4a7516fa">CPSTransform::valueOf</a>( $_transform, $model-&gt;$attributeName );
<a name="l00422"></a>00422 
<a name="l00423"></a>00423             <span class="comment">//  Build our field</span>
<a name="l00424"></a>00424             $_output .= $_prependHtml;
<a name="l00425"></a>00425             $_output .= ( null !== $_content ) ? $_content : self::activeField( $inputFieldType, $model, $attributeName, $arOptions, $_widgetOptions, $_arData );
<a name="l00426"></a>00426             $_output .= $_sHtml;
<a name="l00427"></a>00427 
<a name="l00428"></a>00428             $_arDivOpts[<span class="stringliteral">&#39;id&#39;</span>] = self::$m_sFormFieldContainerPrefix . <span class="charliteral">&#39;_&#39;</span> . PS::nvl( PS::o( $_arDivOpts, <span class="stringliteral">&#39;id&#39;</span> ), $arOptions[<span class="stringliteral">&#39;id&#39;</span>] );
<a name="l00429"></a>00429             $_arDivOpts[<span class="stringliteral">&#39;class&#39;</span>] = PS::addClass( $_divClass, PS::$m_sFormFieldContainerClass . <span class="charliteral">&#39; &#39;</span> . PS::o( $_arDivOpts, <span class="stringliteral">&#39;class&#39;</span> ) );
<a name="l00430"></a>00430         }
<a name="l00431"></a>00431 
<a name="l00432"></a>00432         <span class="comment">//  Any hints?</span>
<a name="l00433"></a>00433         <span class="keywordflow">if</span> ( $_sHint ) $_sHint = str_ireplace( <span class="stringliteral">&#39;%%HINT%%&#39;</span>, $_sHint, self::$m_sHintTemplate );
<a name="l00434"></a>00434 
<a name="l00435"></a>00435         <span class="keywordflow">return</span> PS::tag( self::$m_sFormFieldContainer, $_arDivOpts, $_output . $_sHint );
<a name="l00436"></a>00436     }
<a name="l00437"></a>00437 
<a name="l00453"></a>00453     <span class="keyword">public</span> <span class="keyword">static</span> function simpleActiveBlock( $inputFieldType, $model, $attributeName, $arOptions = <a class="code" href="admin_8php.html#a2394bd91cde70158acb50a4a7f860ab5">array</a>(), $sLabel = null, $arLabelOptions = <a class="code" href="admin_8php.html#a2394bd91cde70158acb50a4a7f860ab5">array</a>(), $listData = null, $widgetOptions = <a class="code" href="admin_8php.html#a2394bd91cde70158acb50a4a7f860ab5">array</a>() )
<a name="l00454"></a>00454     {
<a name="l00455"></a>00455         <span class="keywordflow">return</span> self::field( $inputFieldType, $model, $attributeName,
<a name="l00456"></a>00456             array_merge(
<a name="l00457"></a>00457                 $arOptions,
<a name="l00458"></a>00458                 <a class="code" href="admin_8php.html#a2394bd91cde70158acb50a4a7f860ab5">array</a>(
<a name="l00459"></a>00459                     <span class="stringliteral">&#39;label&#39;</span> =&gt; $sLabel,
<a name="l00460"></a>00460                     <span class="stringliteral">&#39;labelOptions&#39;</span> =&gt; $arLabelOptions,
<a name="l00461"></a>00461                     <span class="stringliteral">&#39;data&#39;</span> =&gt; $listData,
<a name="l00462"></a>00462                     <span class="stringliteral">&#39;widgetOptions&#39;</span> =&gt; $widgetOptions,
<a name="l00463"></a>00463                 )
<a name="l00464"></a>00464             )
<a name="l00465"></a>00465         );
<a name="l00466"></a>00466     }
<a name="l00467"></a>00467 
<a name="l00484"></a>00484     <span class="keyword">public</span> <span class="keyword">static</span> function activeField( $inputFieldType, $model, $attributeName, $htmlOptions = <a class="code" href="admin_8php.html#a2394bd91cde70158acb50a4a7f860ab5">array</a>(), $widgetOptions = <a class="code" href="admin_8php.html#a2394bd91cde70158acb50a4a7f860ab5">array</a>(), $listData = null )
<a name="l00485"></a>00485     {
<a name="l00486"></a>00486         <span class="comment">//  Auto set id and name if they aren&#39;t already...</span>
<a name="l00487"></a>00487         <span class="keywordflow">if</span> ( ! isset( $htmlOptions[ <span class="stringliteral">&#39;name&#39;</span> ] ) ) $htmlOptions[ <span class="stringliteral">&#39;name&#39;</span> ] = ( null != $model ) ? self::resolveName( $model, $attributeName ) : $attributeName;
<a name="l00488"></a>00488         <span class="keywordflow">if</span> ( ! isset( $htmlOptions[ <span class="stringliteral">&#39;id&#39;</span> ] ) ) $htmlOptions[ <span class="stringliteral">&#39;id&#39;</span> ] = self::getIdByName( $htmlOptions[ <span class="stringliteral">&#39;name&#39;</span> ] );
<a name="l00489"></a>00489 
<a name="l00490"></a>00490         <span class="comment">//  Save for callers...</span>
<a name="l00491"></a>00491         self::$m_sLastFieldName = $htmlOptions[<span class="stringliteral">&#39;name&#39;</span>];
<a name="l00492"></a>00492         self::$m_sLastFieldId = $htmlOptions[<span class="stringliteral">&#39;id&#39;</span>];
<a name="l00493"></a>00493 
<a name="l00494"></a>00494         <span class="comment">//  Non-model field?</span>
<a name="l00495"></a>00495         <span class="keywordflow">if</span> ( null === $model )
<a name="l00496"></a>00496             <span class="keywordflow">return</span> self::inactiveField( $inputFieldType, $attributeName, $htmlOptions, $widgetOptions, $listData );
<a name="l00497"></a>00497 
<a name="l00498"></a>00498         <span class="comment">//  Stuff to put after widget</span>
<a name="l00499"></a>00499         $_beforeHtml = null;
<a name="l00500"></a>00500         $_appendHtml = PS::o( $htmlOptions, <span class="stringliteral">&#39;_appendHtml&#39;</span>, <span class="stringliteral">&#39;&#39;</span>, <span class="keyword">true</span> );
<a name="l00501"></a>00501 
<a name="l00502"></a>00502         <span class="comment">//  Are we validating this form? Add required tags automagically</span>
<a name="l00503"></a>00503         <span class="keywordflow">if</span> ( self::$m_bValidating )
<a name="l00504"></a>00504         {
<a name="l00505"></a>00505             <span class="comment">//  Get any additional params for validation</span>
<a name="l00506"></a>00506             <a class="code" href="controller_2controller_8php.html#a7d53885feef470ba528847a3f2f1f93a">$_sClass</a> = PS::o( $htmlOptions, <span class="stringliteral">&#39;_validate&#39;</span>, null, <span class="keyword">true</span> );
<a name="l00507"></a>00507             $_isRequired = ( <span class="keyword">false</span> !== stripos( PS::o( $htmlOptions, <span class="stringliteral">&#39;class&#39;</span> ), <span class="stringliteral">&#39;required&#39;</span> ) );
<a name="l00508"></a>00508 
<a name="l00509"></a>00509             <span class="keywordflow">if</span> ( ! $_isRequired &amp;&amp; $model-&gt;isAttributeRequired( $attributeName ) ) PS::addClass( <a class="code" href="controller_2controller_8php.html#a7d53885feef470ba528847a3f2f1f93a">$_sClass</a>, <span class="stringliteral">&#39;required&#39;</span> );
<a name="l00510"></a>00510 
<a name="l00511"></a>00511             <span class="keywordflow">if</span> ( ! $_isRequired &amp;&amp; $model-&gt;isAttributeRequired( $attributeName ) )
<a name="l00512"></a>00512             {
<a name="l00513"></a>00513                 PS::addClass( <a class="code" href="controller_2controller_8php.html#a7d53885feef470ba528847a3f2f1f93a">$_sClass</a>, <span class="stringliteral">&#39;required&#39;</span> );
<a name="l00514"></a>00514 <span class="comment">//              PS::addClass( $htmlOptions[&#39;labelOptions&#39;][&#39;class&#39;], &#39;required&#39; );</span>
<a name="l00515"></a>00515 <span class="comment">//              $htmlOptions[&#39;required&#39;] = true;</span>
<a name="l00516"></a>00516 <span class="comment">//              $htmlOptions[&#39;labelOptions&#39;][&#39;required&#39;] = true;</span>
<a name="l00517"></a>00517             }
<a name="l00518"></a>00518             $htmlOptions[<span class="stringliteral">&#39;class&#39;</span>] = trim( PS::addClass( <a class="code" href="controller_2controller_8php.html#a7d53885feef470ba528847a3f2f1f93a">$_sClass</a>, PS::o( $htmlOptions, <span class="stringliteral">&#39;class&#39;</span> ) ) );
<a name="l00519"></a>00519         }
<a name="l00520"></a>00520 
<a name="l00521"></a>00521         <span class="comment">//  Get our value...</span>
<a name="l00522"></a>00522         <span class="keywordflow">if</span> ( $attributeName != ( $_cleanedAttribute = <a class="code" href="classCPSTransform.html#aa255554fc788af56211439af1c7d537f">CPSTransform::cleanColumn</a>( $attributeName ) ) )
<a name="l00523"></a>00523         {
<a name="l00524"></a>00524             <span class="comment">//  Use our handy transformer...</span>
<a name="l00525"></a>00525             $attributeName = $_cleanedAttribute;
<a name="l00526"></a>00526             $_value = <a class="code" href="classCPSTransform.html#a9fde2db64e7ddc0307fe950ab660a9cf">CPSTransform::getValue</a>( $model, $attributeName );
<a name="l00527"></a>00527         }
<a name="l00528"></a>00528         <span class="keywordflow">else</span>
<a name="l00529"></a>00529             $_value = PS::o( $htmlOptions, <span class="stringliteral">&#39;value&#39;</span>, $model-&gt;{$attributeName}, true );
<a name="l00530"></a>00530 
<a name="l00531"></a>00531         <span class="comment">//  Handle custom drop downs...</span>
<a name="l00532"></a>00532         <span class="keywordflow">if</span> ( self::setDropDownValues( $inputFieldType, $htmlOptions, $listData, PS::nvl( $model-&gt;{$attributeName} ) ) )
<a name="l00533"></a>00533             $inputFieldType = self::DROPDOWN;
<a name="l00534"></a>00534 
<a name="l00535"></a>00535         <span class="comment">//  Handle special types...</span>
<a name="l00536"></a>00536         <span class="keywordflow">switch</span> ( $inputFieldType )
<a name="l00537"></a>00537         {
<a name="l00538"></a>00538             <span class="keywordflow">case</span> self::TEXT_DISPLAY:
<a name="l00539"></a>00539                 $htmlOptions[<span class="stringliteral">&#39;style&#39;</span>] = PS::o( $htmlOptions, <span class="stringliteral">&#39;style&#39;</span> ) . <span class="stringliteral">&#39; border:none; background-color: transparent;&#39;</span>;
<a name="l00540"></a>00540                 $htmlOptions[<span class="stringliteral">&#39;class&#39;</span>] = PS::addClass( $htmlOptions[<span class="stringliteral">&#39;class&#39;</span>], <span class="stringliteral">&#39;ps-text-display&#39;</span> );
<a name="l00541"></a>00541                 $htmlOptions[<span class="stringliteral">&#39;readonly&#39;</span>] = <span class="stringliteral">&#39;readonly&#39;</span>;
<a name="l00542"></a>00542                 $htmlOptions[<span class="stringliteral">&#39;content&#39;</span>] = PS::tag( <span class="stringliteral">&#39;label&#39;</span>, <a class="code" href="admin_8php.html#a2394bd91cde70158acb50a4a7f860ab5">array</a>( <span class="stringliteral">&#39;class&#39;</span> =&gt; <span class="stringliteral">&#39;ps-text-display&#39;</span>, <a class="code" href="classCPSTransform.html#adaa9f9a55104660a4b1eb1cd4a7516fa">CPSTransform::valueOf</a>( <span class="charliteral">&#39;*&#39;</span>, $model-&gt;$attributeName ) ) );
<a name="l00543"></a>00543                 $inputFieldType = self::TEXT;
<a name="l00544"></a>00544                 <span class="keywordflow">break</span>;
<a name="l00545"></a>00545 
<a name="l00546"></a>00546             <span class="comment">//  Build a jQuery UI widget</span>
<a name="l00547"></a>00547             <span class="keywordflow">case</span> self::JQUI:
<a name="l00548"></a>00548                 <span class="keywordflow">if</span> ( isset( $htmlOptions[ <span class="stringliteral">&#39;_widget&#39;</span> ] ) )
<a name="l00549"></a>00549                 {
<a name="l00550"></a>00550                     $widgetOptions[ <span class="stringliteral">&#39;name&#39;</span> ] = $htmlOptions[ <span class="stringliteral">&#39;name&#39;</span> ];
<a name="l00551"></a>00551                     $widgetOptions[ <span class="stringliteral">&#39;id&#39;</span> ] = $htmlOptions[ <span class="stringliteral">&#39;id&#39;</span> ];
<a name="l00552"></a>00552                     $_sWidget = $htmlOptions[ <span class="stringliteral">&#39;_widget&#39;</span> ];
<a name="l00553"></a>00553                     unset( $htmlOptions[ <span class="stringliteral">&#39;_widget&#39;</span> ] );
<a name="l00554"></a>00554                     <a class="code" href="classCPSjqUIWrapper.html#a0ffc269a208148ade57c7eb608a4562a">CPSjqUIWrapper::create</a>( $_sWidget, $widgetOptions );
<a name="l00555"></a>00555                     $inputFieldType = self::TEXT;
<a name="l00556"></a>00556                 }
<a name="l00557"></a>00557                 <span class="keywordflow">break</span>;
<a name="l00558"></a>00558 
<a name="l00559"></a>00559             <span class="comment">//  Build a McDropdown</span>
<a name="l00560"></a>00560             <span class="keywordflow">case</span> self::MCDROPDOWN:
<a name="l00561"></a>00561                 $widgetOptions[ <span class="stringliteral">&#39;linkText&#39;</span> ] = <span class="keyword">false</span>;
<a name="l00562"></a>00562                 $_sTarget = PS::o( $widgetOptions, <span class="stringliteral">&#39;target&#39;</span>, $htmlOptions[<span class="stringliteral">&#39;id&#39;</span>] );
<a name="l00563"></a>00563                 $_sTargetMenu = PS::o( $widgetOptions, <span class="stringliteral">&#39;targetMenu&#39;</span>, $htmlOptions[<span class="stringliteral">&#39;id&#39;</span>] . <span class="stringliteral">&#39;_menu&#39;</span> );
<a name="l00564"></a>00564                 $_sValueColumn = PS::o( $htmlOptions, <span class="stringliteral">&#39;valueColumn&#39;</span> );
<a name="l00565"></a>00565 
<a name="l00566"></a>00566                 <span class="comment">//  Insert text field...</span>
<a name="l00567"></a>00567                 $_output = PS::textField( $htmlOptions[<span class="stringliteral">&#39;name&#39;</span>], $_value, <a class="code" href="admin_8php.html#a2394bd91cde70158acb50a4a7f860ab5">array</a>( <span class="stringliteral">&#39;id&#39;</span> =&gt; $htmlOptions[<span class="stringliteral">&#39;id&#39;</span>] ) );
<a name="l00568"></a>00568 
<a name="l00569"></a>00569                 <span class="comment">//  Create menu...</span>
<a name="l00570"></a>00570                 $_output .= <a class="code" href="classCPSTransform.html#adccbddee16965574f2d40fdd059a9d00">CPSTransform::asUnorderedList</a>( $listData, <a class="code" href="admin_8php.html#a2394bd91cde70158acb50a4a7f860ab5">array</a>( <span class="stringliteral">&#39;class&#39;</span> =&gt; <span class="stringliteral">&#39;mcdropdown_menu&#39;</span>, <span class="stringliteral">&#39;valueColumn&#39;</span> =&gt; $_sValueColumn, <span class="stringliteral">&#39;linkText&#39;</span> =&gt; <span class="keyword">false</span>, <span class="stringliteral">&#39;id&#39;</span> =&gt; $_sTargetMenu ) );
<a name="l00571"></a>00571 
<a name="l00572"></a>00572                 $widgetOptions[<span class="stringliteral">&#39;target&#39;</span>] = $_sTarget;
<a name="l00573"></a>00573                 $widgetOptions[<span class="stringliteral">&#39;targetMenu&#39;</span>] = $_sTargetMenu;
<a name="l00574"></a>00574 
<a name="l00575"></a>00575                 <a class="code" href="classCPSMcDropdownWidget.html#a0ffc269a208148ade57c7eb608a4562a">CPSMcDropdownWidget::create</a>( null, $widgetOptions );
<a name="l00576"></a>00576                 <span class="keywordflow">return</span> $_beforeHtml . $_output . $_appendHtml;
<a name="l00577"></a>00577 
<a name="l00578"></a>00578             <span class="comment">//  Build a Filament Group menu</span>
<a name="l00579"></a>00579             <span class="keywordflow">case</span> self::FG_MENU:
<a name="l00580"></a>00580                 ob_start();
<a name="l00581"></a>00581                 $widgetOptions[ <span class="stringliteral">&#39;prompt&#39;</span> ] = PS::o( $htmlOptions, <span class="stringliteral">&#39;prompt&#39;</span>, <span class="stringliteral">&#39;Select One...&#39;</span>, <span class="keyword">true</span> );
<a name="l00582"></a>00582                 <a class="code" href="classCPSfgMenu.html#a0ffc269a208148ade57c7eb608a4562a">CPSfgMenu::create</a>( null, $widgetOptions );
<a name="l00583"></a>00583                 $_output = ob_get_contents();
<a name="l00584"></a>00584                 ob_end_clean();
<a name="l00585"></a>00585                 <span class="keywordflow">return</span> $_beforeHtml . $_output . $_appendHtml;
<a name="l00586"></a>00586 
<a name="l00587"></a>00587             <span class="comment">//  Default for text field</span>
<a name="l00588"></a>00588             <span class="keywordflow">case</span> self::TEXT:
<a name="l00589"></a>00589                 <span class="comment">//  Masked input?</span>
<a name="l00590"></a>00590                 $_sMask = PS::o( $htmlOptions, <span class="stringliteral">&#39;mask&#39;</span>, null, <span class="keyword">true</span> );
<a name="l00591"></a>00591                 <span class="keywordflow">if</span> ( ! empty( $_sMask ) ) $_oMask = <a class="code" href="classCPSjqMaskedInputWrapper.html#a0ffc269a208148ade57c7eb608a4562a">CPSjqMaskedInputWrapper::create</a>( null, <a class="code" href="admin_8php.html#a2394bd91cde70158acb50a4a7f860ab5">array</a>( <span class="stringliteral">&#39;target&#39;</span> =&gt; <span class="charliteral">&#39;#&#39;</span> . $htmlOptions[ <span class="stringliteral">&#39;id&#39;</span> ], <span class="stringliteral">&#39;mask&#39;</span> =&gt; $_sMask ) );
<a name="l00592"></a>00592 
<a name="l00593"></a>00593                 <span class="keywordflow">if</span> ( ! isset( $htmlOptions[ <span class="stringliteral">&#39;size&#39;</span> ] ) )
<a name="l00594"></a>00594                     $htmlOptions[ <span class="stringliteral">&#39;size&#39;</span> ] = 60;
<a name="l00595"></a>00595                 <span class="keywordflow">break</span>;
<a name="l00596"></a>00596 
<a name="l00597"></a>00597             <span class="comment">//  WYSIWYG Plug-in</span>
<a name="l00598"></a>00598             <span class="keywordflow">case</span> self::WYSIWYG:
<a name="l00599"></a>00599                 <a class="code" href="classCPSWysiwygWidget.html#a0ffc269a208148ade57c7eb608a4562a">CPSWysiwygWidget::create</a>( null, array_merge( $widgetOptions, <a class="code" href="admin_8php.html#a2394bd91cde70158acb50a4a7f860ab5">array</a>( <span class="stringliteral">&#39;autoRun&#39;</span> =&gt; <span class="keyword">true</span>, <span class="stringliteral">&#39;id&#39;</span> =&gt; $_sId, <span class="stringliteral">&#39;name&#39;</span> =&gt; $_sName ) ) );
<a name="l00600"></a>00600                 $inputFieldType = self::TEXTAREA;
<a name="l00601"></a>00601                 <span class="keywordflow">break</span>;
<a name="l00602"></a>00602 
<a name="l00603"></a>00603             <span class="comment">//  CKEditor Plug-in</span>
<a name="l00604"></a>00604             <span class="keywordflow">case</span> self::CKEDITOR:
<a name="l00605"></a>00605                 <a class="code" href="classCPSCKEditorWidget.html#a0ffc269a208148ade57c7eb608a4562a">CPSCKEditorWidget::create</a>( null, array_merge( $widgetOptions, <a class="code" href="admin_8php.html#a2394bd91cde70158acb50a4a7f860ab5">array</a>( <span class="stringliteral">&#39;autoRun&#39;</span> =&gt; <span class="keyword">true</span>, <span class="stringliteral">&#39;target&#39;</span> =&gt; $htmlOptions[ <span class="stringliteral">&#39;id&#39;</span> ] ) ) );
<a name="l00606"></a>00606                 $inputFieldType = self::TEXTAREA;
<a name="l00607"></a>00607                 <span class="keywordflow">break</span>;
<a name="l00608"></a>00608 
<a name="l00609"></a>00609             <span class="comment">//  markItUp! Plug-in</span>
<a name="l00610"></a>00610             <span class="keywordflow">case</span> self::MARKITUP:
<a name="l00611"></a>00611                 $widgetOptions[ <span class="stringliteral">&#39;name&#39;</span> ] = $htmlOptions[ <span class="stringliteral">&#39;name&#39;</span> ];
<a name="l00612"></a>00612                 $widgetOptions[ <span class="stringliteral">&#39;id&#39;</span> ] = $htmlOptions[ <span class="stringliteral">&#39;id&#39;</span> ];
<a name="l00613"></a>00613                 <a class="code" href="classCPSMarkItUpWidget.html#a0ffc269a208148ade57c7eb608a4562a">CPSMarkItUpWidget::create</a>( null, $widgetOptions );
<a name="l00614"></a>00614                 $inputFieldType = self::TEXTAREA;
<a name="l00615"></a>00615                 <span class="keywordflow">break</span>;
<a name="l00616"></a>00616 
<a name="l00617"></a>00617             <span class="keywordflow">case</span> self::CAPTCHA:
<a name="l00618"></a>00618                 $htmlOptions[<span class="stringliteral">&#39;hint&#39;</span>] = <span class="stringliteral">&#39;Please enter the letters as they are shown in the image above.&lt;br /&gt;Letters are not case-sensitive.&#39;</span>;
<a name="l00619"></a>00619                 ob_start();
<a name="l00620"></a>00620                 echo PS::openTag( <span class="stringliteral">&#39;div&#39;</span>, <a class="code" href="admin_8php.html#a2394bd91cde70158acb50a4a7f860ab5">array</a>( <span class="stringliteral">&#39;class&#39;</span> =&gt; <span class="stringliteral">&#39;ps-captcha-container&#39;</span> ) );
<a name="l00621"></a>00621                 Yii::app()-&gt;getController()-&gt;widget( self::CAPTCHA, $widgetOptions );
<a name="l00622"></a>00622                 echo PS::closeTag( <span class="stringliteral">&#39;div&#39;</span> );
<a name="l00623"></a>00623                 $_beforeHtml = ob_get_contents();
<a name="l00624"></a>00624                 ob_end_clean();
<a name="l00625"></a>00625                 $inputFieldType = self::TEXT;
<a name="l00626"></a>00626                 <span class="keywordflow">break</span>;
<a name="l00627"></a>00627 
<a name="l00628"></a>00628             <span class="comment">//  These guys need data in third parameter</span>
<a name="l00629"></a>00629             <span class="keywordflow">case</span> self::DROPDOWN:
<a name="l00630"></a>00630                 <span class="comment">//  Auto-set prompt if not there...</span>
<a name="l00631"></a>00631                 <span class="keywordflow">if</span> ( ! isset( $htmlOptions[ <span class="stringliteral">&#39;noprompt&#39;</span> ] ) ) $htmlOptions[ <span class="stringliteral">&#39;prompt&#39;</span> ] = PS::o( $htmlOptions, <span class="stringliteral">&#39;prompt&#39;</span>, <span class="stringliteral">&#39;Select One...&#39;</span>, <span class="keyword">true</span> );
<a name="l00632"></a>00632                 <span class="comment">//  Intentionally fall through to next block...</span>
<a name="l00633"></a>00633 
<a name="l00634"></a>00634             <span class="keywordflow">case</span> self::CHECKLIST:
<a name="l00635"></a>00635             <span class="keywordflow">case</span> self::RADIOLIST:
<a name="l00636"></a>00636             <span class="keywordflow">case</span> self::LISTBOX:
<a name="l00637"></a>00637                 <span class="keywordflow">return</span> self::$inputFieldType( $model, $attributeName, $listData, $htmlOptions );
<a name="l00638"></a>00638         }
<a name="l00639"></a>00639 
<a name="l00640"></a>00640         $_fieldOutput = null;
<a name="l00641"></a>00641 
<a name="l00642"></a>00642         <span class="keywordflow">try</span>
<a name="l00643"></a>00643         {
<a name="l00644"></a>00644             <span class="keywordflow">if</span> ( defined( <span class="stringliteral">&#39;PYE_TRACE_LEVEL&#39;</span> ) &amp;&amp; PYE_TRACE_LEVEL &gt; 3 )
<a name="l00645"></a>00645                 <a class="code" href="classCPSLog.html#ab8a624f93a0bfc699dd00c01af886955">CPSLog::trace</a>( __METHOD__, <span class="stringliteral">&#39;Rendering field &quot;&#39;</span> . $attributeName . <span class="stringliteral">&#39;&quot; of type &quot;&#39;</span> . $inputFieldType . <span class="charliteral">&#39;&quot;&#39;</span> );
<a name="l00646"></a>00646 
<a name="l00647"></a>00647             <span class="keywordflow">if</span> ( method_exists( <span class="stringliteral">&#39;CPSWidgetHelper&#39;</span>, $inputFieldType ) )
<a name="l00648"></a>00648                 $_fieldOutput = self::$inputFieldType( $model, $attributeName, $htmlOptions );
<a name="l00649"></a>00649             <span class="keywordflow">else</span>
<a name="l00650"></a>00650                 <span class="keywordflow">throw</span> <span class="keyword">new</span> Exception( <span class="stringliteral">&#39;Unknown input field type: &#39;</span> . $inputFieldType );
<a name="l00651"></a>00651         }
<a name="l00652"></a>00652         <span class="keywordflow">catch</span> ( Exception $_ex )
<a name="l00653"></a>00653         {
<a name="l00654"></a>00654             <a class="code" href="classCPSLog.html#a99034739d5e469b037364bf2f5694e11">CPSLog::error</a>( __METHOD__, <span class="stringliteral">&#39;Error rendering field &quot;&#39;</span> . $attributeName . <span class="stringliteral">&#39;&quot; of type &quot;&#39;</span> . $inputFieldType . <span class="stringliteral">&#39;&quot;: &#39;</span> . $_ex-&gt;getMessage() );
<a name="l00655"></a>00655         }
<a name="l00656"></a>00656 
<a name="l00657"></a>00657         <span class="keywordflow">return</span> $_beforeHtml . $_fieldOutput . $_appendHtml;
<a name="l00658"></a>00658     }
<a name="l00659"></a>00659 
<a name="l00675"></a>00675     <span class="keyword">public</span> <span class="keyword">static</span> function inactiveField( $inputFieldType, $attributeName, $htmlOptions = <a class="code" href="admin_8php.html#a2394bd91cde70158acb50a4a7f860ab5">array</a>(), $widgetOptions = <a class="code" href="admin_8php.html#a2394bd91cde70158acb50a4a7f860ab5">array</a>(), $listData = null )
<a name="l00676"></a>00676     {
<a name="l00677"></a>00677         <span class="comment">//  Settings</span>
<a name="l00678"></a>00678         $_beforeHtml = null;
<a name="l00679"></a>00679         $_appendHtml = PS::o( $htmlOptions, <span class="stringliteral">&#39;_appendHtml&#39;</span>, <span class="stringliteral">&#39;&#39;</span>, <span class="keyword">true</span> );
<a name="l00680"></a>00680         $_value = PS::o( $htmlOptions, <span class="stringliteral">&#39;value&#39;</span>, null, <span class="keyword">true</span> );
<a name="l00681"></a>00681 
<a name="l00682"></a>00682         <span class="comment">//  Handle special types...</span>
<a name="l00683"></a>00683         <span class="keywordflow">switch</span> ( $inputFieldType )
<a name="l00684"></a>00684         {
<a name="l00685"></a>00685             <span class="comment">//  Build a jQuery UI widget</span>
<a name="l00686"></a>00686             <span class="keywordflow">case</span> self::JQUI:
<a name="l00687"></a>00687                 <span class="keywordflow">if</span> ( isset( $htmlOptions[ <span class="stringliteral">&#39;_widget&#39;</span> ] ) )
<a name="l00688"></a>00688                 {
<a name="l00689"></a>00689                     $widgetOptions[ <span class="stringliteral">&#39;name&#39;</span> ] = $htmlOptions[ <span class="stringliteral">&#39;name&#39;</span> ];
<a name="l00690"></a>00690                     $widgetOptions[ <span class="stringliteral">&#39;id&#39;</span> ] = $htmlOptions[ <span class="stringliteral">&#39;id&#39;</span> ];
<a name="l00691"></a>00691                     $_sWidget = $htmlOptions[ <span class="stringliteral">&#39;_widget&#39;</span> ];
<a name="l00692"></a>00692                     unset( $htmlOptions[ <span class="stringliteral">&#39;_widget&#39;</span> ] );
<a name="l00693"></a>00693                     <a class="code" href="classCPSjqUIWrapper.html#a0ffc269a208148ade57c7eb608a4562a">CPSjqUIWrapper::create</a>( $_sWidget, $widgetOptions );
<a name="l00694"></a>00694                     $_sType = <span class="stringliteral">&#39;text&#39;</span>;
<a name="l00695"></a>00695                 }
<a name="l00696"></a>00696                 <span class="keywordflow">break</span>;
<a name="l00697"></a>00697 
<a name="l00698"></a>00698             <span class="comment">//  WYSIWYG Plug-in</span>
<a name="l00699"></a>00699             <span class="keywordflow">case</span> self::WYSIWYG:
<a name="l00700"></a>00700                 <a class="code" href="classCPSWysiwygWidget.html#a0ffc269a208148ade57c7eb608a4562a">CPSWysiwygWidget::create</a>( null, array_merge( $widgetOptions, <a class="code" href="admin_8php.html#a2394bd91cde70158acb50a4a7f860ab5">array</a>( <span class="stringliteral">&#39;autoRun&#39;</span> =&gt; <span class="keyword">true</span>, <span class="stringliteral">&#39;id&#39;</span> =&gt; $_sId, <span class="stringliteral">&#39;name&#39;</span> =&gt; $_sName ) ) );
<a name="l00701"></a>00701                 $_sType = <span class="stringliteral">&#39;textarea&#39;</span>;
<a name="l00702"></a>00702                 <span class="keywordflow">break</span>;
<a name="l00703"></a>00703 
<a name="l00704"></a>00704             <span class="comment">//  markItUp! Plug-in</span>
<a name="l00705"></a>00705             <span class="keywordflow">case</span> self::MARKITUP:
<a name="l00706"></a>00706                 $widgetOptions[ <span class="stringliteral">&#39;name&#39;</span> ] = $htmlOptions[ <span class="stringliteral">&#39;name&#39;</span> ];
<a name="l00707"></a>00707                 $widgetOptions[ <span class="stringliteral">&#39;id&#39;</span> ] = $htmlOptions[ <span class="stringliteral">&#39;id&#39;</span> ];
<a name="l00708"></a>00708                 <a class="code" href="classCPSMarkItUpWidget.html#a0ffc269a208148ade57c7eb608a4562a">CPSMarkItUpWidget::create</a>( null, $widgetOptions );
<a name="l00709"></a>00709                 $_sType = <span class="stringliteral">&#39;textarea&#39;</span>;
<a name="l00710"></a>00710                 <span class="keywordflow">break</span>;
<a name="l00711"></a>00711 
<a name="l00712"></a>00712             <span class="keywordflow">case</span> self::TEXT_DISPLAY:
<a name="l00713"></a>00713                 $htmlOptions[<span class="stringliteral">&#39;style&#39;</span>] = PS::o( $htmlOptions, <span class="stringliteral">&#39;style&#39;</span> ) . <span class="stringliteral">&#39; border:none; background-color: transparent;&#39;</span>;
<a name="l00714"></a>00714                 $htmlOptions[<span class="stringliteral">&#39;readonly&#39;</span>] = <span class="stringliteral">&#39;readonly&#39;</span>;
<a name="l00715"></a>00715                 $_sType = <span class="stringliteral">&#39;text&#39;</span>;
<a name="l00716"></a>00716                 <span class="keywordflow">break</span>;
<a name="l00717"></a>00717 
<a name="l00718"></a>00718             <span class="keywordflow">default</span>:
<a name="l00719"></a>00719                 $_sType = PS::o( self::$m_arInputMap, $inputFieldType );
<a name="l00720"></a>00720                 <span class="keywordflow">break</span>;
<a name="l00721"></a>00721         }
<a name="l00722"></a>00722 
<a name="l00723"></a>00723         <span class="comment">//  Do drop downs...</span>
<a name="l00724"></a>00724         <span class="keywordflow">if</span> ( null != ( $listData = self::setDropDownValues( $inputFieldType, $htmlOptions, $listData, $_value ) ) )
<a name="l00725"></a>00725             <span class="keywordflow">return</span> parent::dropDownList( $attributeName, $_value, $listData, $htmlOptions );
<a name="l00726"></a>00726 
<a name="l00727"></a>00727         <span class="comment">//  Otherwise output the field if we have a type</span>
<a name="l00728"></a>00728         <span class="keywordflow">if</span> ( null != $_sType ) <span class="keywordflow">return</span> self::inputField( $_sType, $attributeName, $_value, $htmlOptions );
<a name="l00729"></a>00729 
<a name="l00730"></a>00730         <span class="comment">//  No clue...</span>
<a name="l00731"></a>00731         <span class="keywordflow">return</span>;
<a name="l00732"></a>00732 
<a name="l00733"></a>00733         <span class="comment">//  Are we validating this form? Add required tags automagically</span>
<a name="l00734"></a>00734         <span class="keywordflow">if</span> ( self::$m_bValidating )
<a name="l00735"></a>00735         {
<a name="l00736"></a>00736             <span class="comment">//  Get any additional params for validation</span>
<a name="l00737"></a>00737             <a class="code" href="controller_2controller_8php.html#a7d53885feef470ba528847a3f2f1f93a">$_sClass</a> = PS::o( $htmlOptions, <span class="stringliteral">&#39;_validate&#39;</span>, null, <span class="keyword">true</span> );
<a name="l00738"></a>00738             <span class="keywordflow">if</span> ( $model-&gt;isAttributeRequired( $attributeName ) ) PS::addClass( <a class="code" href="controller_2controller_8php.html#a7d53885feef470ba528847a3f2f1f93a">$_sClass</a>, <span class="stringliteral">&#39;required&#39;</span> );
<a name="l00739"></a>00739             <a class="code" href="controller_2controller_8php.html#a7d53885feef470ba528847a3f2f1f93a">$_sClass</a> = <span class="charliteral">&#39; &#39;</span> . PS::o( $htmlOptions, <span class="stringliteral">&#39;class&#39;</span>, null );
<a name="l00740"></a>00740             $htmlOptions[<span class="stringliteral">&#39;class&#39;</span>] = trim( <a class="code" href="controller_2controller_8php.html#a7d53885feef470ba528847a3f2f1f93a">$_sClass</a> );
<a name="l00741"></a>00741         }
<a name="l00742"></a>00742 
<a name="l00743"></a>00743         <span class="comment">//  Get our value...</span>
<a name="l00744"></a>00744         <span class="keywordflow">if</span> ( $attributeName != ( $_cleanedAttribute = <a class="code" href="classCPSTransform.html#aa255554fc788af56211439af1c7d537f">CPSTransform::cleanColumn</a>( $attributeName ) ) )
<a name="l00745"></a>00745         {
<a name="l00746"></a>00746             <span class="comment">//  Use our handy transformer...</span>
<a name="l00747"></a>00747             $attributeName = $_cleanedAttribute;
<a name="l00748"></a>00748             $_value = <a class="code" href="classCPSTransform.html#a9fde2db64e7ddc0307fe950ab660a9cf">CPSTransform::getValue</a>( $model, $attributeName );
<a name="l00749"></a>00749         }
<a name="l00750"></a>00750         <span class="keywordflow">else</span>
<a name="l00751"></a>00751             $_value = PS::o( $htmlOptions, <span class="stringliteral">&#39;value&#39;</span>, $model-&gt;{$attributeName}, true );
<a name="l00752"></a>00752 
<a name="l00753"></a>00753         <span class="comment">//  Handle custom drop downs...</span>
<a name="l00754"></a>00754         <span class="keywordflow">if</span> ( null !== self::setDropDownValues( $inputFieldType, $htmlOptions, $listData, PS::nvl( $model-&gt;{$attributeName} ) ) )
<a name="l00755"></a>00755             $inputFieldType = self::DROPDOWN;
<a name="l00756"></a>00756 
<a name="l00757"></a>00757         <span class="comment">//  Handle special types...</span>
<a name="l00758"></a>00758         <span class="keywordflow">switch</span> ( $inputFieldType )
<a name="l00759"></a>00759         {
<a name="l00760"></a>00760             <span class="keywordflow">case</span> self::TEXT_DISPLAY:
<a name="l00761"></a>00761                 $htmlOptions[<span class="stringliteral">&#39;style&#39;</span>] = PS::o( $htmlOptions, <span class="stringliteral">&#39;style&#39;</span> ) . <span class="stringliteral">&#39; border:none; background-color: transparent;&#39;</span>;
<a name="l00762"></a>00762                 $inputFieldType = self::TEXT;
<a name="l00763"></a>00763                 <span class="keywordflow">break</span>;
<a name="l00764"></a>00764 
<a name="l00765"></a>00765             <span class="comment">//  Build a jQuery UI widget</span>
<a name="l00766"></a>00766             <span class="keywordflow">case</span> self::JQUI:
<a name="l00767"></a>00767                 <span class="keywordflow">if</span> ( isset( $htmlOptions[ <span class="stringliteral">&#39;_widget&#39;</span> ] ) )
<a name="l00768"></a>00768                 {
<a name="l00769"></a>00769                     $widgetOptions[ <span class="stringliteral">&#39;name&#39;</span> ] = $htmlOptions[ <span class="stringliteral">&#39;name&#39;</span> ];
<a name="l00770"></a>00770                     $widgetOptions[ <span class="stringliteral">&#39;id&#39;</span> ] = $htmlOptions[ <span class="stringliteral">&#39;id&#39;</span> ];
<a name="l00771"></a>00771                     $_sWidget = $htmlOptions[ <span class="stringliteral">&#39;_widget&#39;</span> ];
<a name="l00772"></a>00772                     unset( $htmlOptions[ <span class="stringliteral">&#39;_widget&#39;</span> ] );
<a name="l00773"></a>00773                     <a class="code" href="classCPSjqUIWrapper.html#a0ffc269a208148ade57c7eb608a4562a">CPSjqUIWrapper::create</a>( $_sWidget, $widgetOptions );
<a name="l00774"></a>00774                     $inputFieldType = self::TEXT;
<a name="l00775"></a>00775                 }
<a name="l00776"></a>00776                 <span class="keywordflow">break</span>;
<a name="l00777"></a>00777 
<a name="l00778"></a>00778             <span class="comment">//  Build a Filament Group menu</span>
<a name="l00779"></a>00779             <span class="keywordflow">case</span> self::FG_MENU:
<a name="l00780"></a>00780                 ob_start();
<a name="l00781"></a>00781                 $widgetOptions[ <span class="stringliteral">&#39;prompt&#39;</span> ] = PS::o( $htmlOptions, <span class="stringliteral">&#39;prompt&#39;</span>, <span class="stringliteral">&#39;Select One...&#39;</span>, <span class="keyword">true</span> );
<a name="l00782"></a>00782                 <a class="code" href="classCPSfgMenu.html#a0ffc269a208148ade57c7eb608a4562a">CPSfgMenu::create</a>( null, $widgetOptions );
<a name="l00783"></a>00783                 $_output = ob_get_contents();
<a name="l00784"></a>00784                 ob_end_clean();
<a name="l00785"></a>00785                 <span class="keywordflow">return</span> $_beforeHtml . $_output . $_appendHtml;
<a name="l00786"></a>00786 
<a name="l00787"></a>00787             <span class="comment">//  Default for text field</span>
<a name="l00788"></a>00788             <span class="keywordflow">case</span> self::TEXT:
<a name="l00789"></a>00789                 <span class="comment">//  Masked input?</span>
<a name="l00790"></a>00790                 $_sMask = PS::o( $htmlOptions, <span class="stringliteral">&#39;mask&#39;</span>, null, <span class="keyword">true</span> );
<a name="l00791"></a>00791                 <span class="keywordflow">if</span> ( ! empty( $_sMask ) ) $_oMask = <a class="code" href="classCPSjqMaskedInputWrapper.html#a0ffc269a208148ade57c7eb608a4562a">CPSjqMaskedInputWrapper::create</a>( null, <a class="code" href="admin_8php.html#a2394bd91cde70158acb50a4a7f860ab5">array</a>( <span class="stringliteral">&#39;target&#39;</span> =&gt; <span class="charliteral">&#39;#&#39;</span> . $htmlOptions[ <span class="stringliteral">&#39;id&#39;</span> ], <span class="stringliteral">&#39;mask&#39;</span> =&gt; $_sMask ) );
<a name="l00792"></a>00792 
<a name="l00793"></a>00793                 <span class="keywordflow">if</span> ( ! isset( $htmlOptions[ <span class="stringliteral">&#39;size&#39;</span> ] ) )
<a name="l00794"></a>00794                     $htmlOptions[ <span class="stringliteral">&#39;size&#39;</span> ] = 60;
<a name="l00795"></a>00795                 <span class="keywordflow">break</span>;
<a name="l00796"></a>00796 
<a name="l00797"></a>00797             <span class="comment">//  WYSIWYG Plug-in</span>
<a name="l00798"></a>00798             <span class="keywordflow">case</span> self::WYSIWYG:
<a name="l00799"></a>00799                 <a class="code" href="classCPSWysiwygWidget.html#a0ffc269a208148ade57c7eb608a4562a">CPSWysiwygWidget::create</a>( null, array_merge( $widgetOptions, <a class="code" href="admin_8php.html#a2394bd91cde70158acb50a4a7f860ab5">array</a>( <span class="stringliteral">&#39;autoRun&#39;</span> =&gt; <span class="keyword">true</span>, <span class="stringliteral">&#39;id&#39;</span> =&gt; $_sId, <span class="stringliteral">&#39;name&#39;</span> =&gt; $_sName ) ) );
<a name="l00800"></a>00800                 $inputFieldType = self::TEXTAREA;
<a name="l00801"></a>00801                 <span class="keywordflow">break</span>;
<a name="l00802"></a>00802 
<a name="l00803"></a>00803             <span class="comment">//  CKEditor Plug-in</span>
<a name="l00804"></a>00804             <span class="keywordflow">case</span> self::CKEDITOR:
<a name="l00805"></a>00805                 <a class="code" href="classCPSCKEditorWidget.html#a0ffc269a208148ade57c7eb608a4562a">CPSCKEditorWidget::create</a>( null, array_merge( $widgetOptions, <a class="code" href="admin_8php.html#a2394bd91cde70158acb50a4a7f860ab5">array</a>( <span class="stringliteral">&#39;autoRun&#39;</span> =&gt; <span class="keyword">true</span>, <span class="stringliteral">&#39;target&#39;</span> =&gt; $htmlOptions[ <span class="stringliteral">&#39;id&#39;</span> ] ) ) );
<a name="l00806"></a>00806                 $inputFieldType = self::TEXTAREA;
<a name="l00807"></a>00807                 <span class="keywordflow">break</span>;
<a name="l00808"></a>00808 
<a name="l00809"></a>00809             <span class="comment">//  markItUp! Plug-in</span>
<a name="l00810"></a>00810             <span class="keywordflow">case</span> self::MARKITUP:
<a name="l00811"></a>00811                 $widgetOptions[ <span class="stringliteral">&#39;name&#39;</span> ] = $htmlOptions[ <span class="stringliteral">&#39;name&#39;</span> ];
<a name="l00812"></a>00812                 $widgetOptions[ <span class="stringliteral">&#39;id&#39;</span> ] = $htmlOptions[ <span class="stringliteral">&#39;id&#39;</span> ];
<a name="l00813"></a>00813                 <a class="code" href="classCPSMarkItUpWidget.html#a0ffc269a208148ade57c7eb608a4562a">CPSMarkItUpWidget::create</a>( null, $widgetOptions );
<a name="l00814"></a>00814                 $inputFieldType = self::TEXTAREA;
<a name="l00815"></a>00815                 <span class="keywordflow">break</span>;
<a name="l00816"></a>00816 
<a name="l00817"></a>00817             <span class="keywordflow">case</span> self::CAPTCHA:
<a name="l00818"></a>00818                 $arOptions[<span class="stringliteral">&#39;hint&#39;</span>] = <span class="stringliteral">&#39;Please enter the letters as they are shown in the image above.&lt;br /&gt;Letters are not case-sensitive.&#39;</span>;
<a name="l00819"></a>00819                 ob_start();
<a name="l00820"></a>00820                 echo PS::openTag( <span class="stringliteral">&#39;div&#39;</span>, <a class="code" href="admin_8php.html#a2394bd91cde70158acb50a4a7f860ab5">array</a>( <span class="stringliteral">&#39;class&#39;</span> =&gt; <span class="stringliteral">&#39;ps-captcha-container&#39;</span> ) );
<a name="l00821"></a>00821                 Yii::app()-&gt;getController()-&gt;widget( self::CAPTCHA, $widgetOptions );
<a name="l00822"></a>00822                 echo PS::closeTag( <span class="stringliteral">&#39;div&#39;</span> );
<a name="l00823"></a>00823                 $_beforeHtml = ob_get_contents();
<a name="l00824"></a>00824                 ob_end_clean();
<a name="l00825"></a>00825                 $inputFieldType = self::TEXT;
<a name="l00826"></a>00826                 <span class="keywordflow">break</span>;
<a name="l00827"></a>00827 
<a name="l00828"></a>00828             <span class="comment">//  These guys need data in third parameter</span>
<a name="l00829"></a>00829             <span class="keywordflow">case</span> self::DROPDOWN:
<a name="l00830"></a>00830                 <span class="comment">//  Auto-set prompt if not there...</span>
<a name="l00831"></a>00831                 <span class="keywordflow">if</span> ( ! isset( $htmlOptions[ <span class="stringliteral">&#39;noprompt&#39;</span> ] ) ) $htmlOptions[ <span class="stringliteral">&#39;prompt&#39;</span> ] = PS::o( $htmlOptions, <span class="stringliteral">&#39;prompt&#39;</span>, <span class="stringliteral">&#39;Select One...&#39;</span>, <span class="keyword">true</span> );
<a name="l00832"></a>00832                 <span class="comment">//  Intentionally fall through to next block...</span>
<a name="l00833"></a>00833 
<a name="l00834"></a>00834             <span class="keywordflow">case</span> self::CHECKLIST:
<a name="l00835"></a>00835             <span class="keywordflow">case</span> self::RADIOLIST:
<a name="l00836"></a>00836             <span class="keywordflow">case</span> self::LISTBOX:
<a name="l00837"></a>00837                 <span class="keywordflow">return</span> self::$inputFieldType( $model, $attributeName, $listData, $htmlOptions );
<a name="l00838"></a>00838         }
<a name="l00839"></a>00839 
<a name="l00840"></a>00840         <span class="keywordflow">return</span> $_beforeHtml . self::$inputFieldType( $model, $attributeName, $htmlOptions ) . $_appendHtml;
<a name="l00841"></a>00841     }
<a name="l00842"></a>00842 
<a name="l00852"></a>00852     <span class="keyword">public</span> <span class="keyword">static</span> function activeCodeDropDownList( $model, $sAttribute, &amp;$htmlOptions = <a class="code" href="admin_8php.html#a2394bd91cde70158acb50a4a7f860ab5">array</a>(), $iDefaultUID = 0 )
<a name="l00853"></a>00853     {
<a name="l00854"></a>00854         <span class="keywordflow">if</span> ( null != ( $_sCodeModel = PS::o( $htmlOptions, <span class="stringliteral">&#39;codeModel&#39;</span>, self::$m_sCodeModel, <span class="keyword">true</span> ) ) )
<a name="l00855"></a>00855         {
<a name="l00856"></a>00856             $_model = <span class="keyword">new</span> $_sCodeModel;
<a name="l00857"></a>00857 
<a name="l00858"></a>00858             <span class="keywordflow">if</span> ( $_model instanceof <a class="code" href="classCPSCodeTableModel.html">CPSCodeTableModel</a> )
<a name="l00859"></a>00859             {
<a name="l00860"></a>00860                 $_sValType = strtoupper( PS::o( $htmlOptions, <span class="stringliteral">&#39;codeType&#39;</span>, $sAttribute, <span class="keyword">true</span> ) );
<a name="l00861"></a>00861                 $_sValAbbr = strtoupper( PS::o( $htmlOptions, <span class="stringliteral">&#39;codeAbbr&#39;</span>, null, <span class="keyword">true</span> ) );
<a name="l00862"></a>00862                 $_valueFilter = PS::o( $htmlOptions, <span class="stringliteral">&#39;valueFilter&#39;</span>, null, <span class="keyword">true</span> );
<a name="l00863"></a>00863                 $_model-&gt;setValueFilter( $_valueFilter );
<a name="l00864"></a>00864                 <span class="keywordflow">if</span> ( ! $_sValAbbr ) $_sValAbbr = PS::o( $htmlOptions, <span class="stringliteral">&#39;codeAbbreviation&#39;</span>, null, <span class="keyword">true</span> );
<a name="l00865"></a>00865                 $_sValId = PS::o( $htmlOptions, <span class="stringliteral">&#39;codeId&#39;</span>, null, <span class="keyword">true</span> );
<a name="l00866"></a>00866                 $_sSort = PS::o( $htmlOptions, <span class="stringliteral">&#39;sortOrder&#39;</span>, <span class="stringliteral">&#39;code_desc_text&#39;</span>, <span class="keyword">true</span> );
<a name="l00867"></a>00867                 $_arOptions = <a class="code" href="admin_8php.html#a2394bd91cde70158acb50a4a7f860ab5">array</a>();
<a name="l00868"></a>00868 
<a name="l00869"></a>00869                 <span class="keywordflow">if</span> ( $_sValId )
<a name="l00870"></a>00870                     $_arOptions = self::listData( $_model-&gt;findById( $_sValId ), <span class="stringliteral">&#39;id&#39;</span>, <span class="stringliteral">&#39;code_desc_text&#39;</span> );
<a name="l00871"></a>00871                 elseif ( ! $_sValAbbr )
<a name="l00872"></a>00872                     $_arOptions = self::listData( $_model-&gt;findAllByType( $_sValType, $_sSort, $_valueFilter ), &#39;<span class="keywordtype">id</span>&#39;, &#39;code_desc_text&#39; );
<a name="l00873"></a>00873                 elseif ( $_sValAbbr )
<a name="l00874"></a>00874                     $_arOptions = self::listData( $_model-&gt;findAllByAbbreviation( $_sValAbbr, $_sValType, $_sSort ), &#39;<span class="keywordtype">id</span>&#39;, &#39;code_desc_text&#39; );
<a name="l00875"></a>00875 
<a name="l00876"></a>00876                 <a class="code" href="source_8php.html#aeb89c9ba506f3ad9fef3bf49a5f5e252">if</a> ( isset( $htmlOptions[ &#39;multiple&#39; ] ) )
<a name="l00877"></a>00877                 {
<a name="l00878"></a>00878                     <span class="keywordflow">if</span> ( substr( $htmlOptions[ <span class="stringliteral">&#39;name&#39;</span> ], -2 ) !== <span class="stringliteral">&#39;[]&#39;</span> )
<a name="l00879"></a>00879                         $htmlOptions[ <span class="stringliteral">&#39;name&#39;</span> ] .= <span class="stringliteral">&#39;[]&#39;</span>;
<a name="l00880"></a>00880                 }
<a name="l00881"></a>00881 
<a name="l00882"></a>00882                 <span class="keywordflow">return</span> self::activeDropDownList( $model, $sAttribute, $_arOptions, $htmlOptions );
<a name="l00883"></a>00883             }
<a name="l00884"></a>00884         }
<a name="l00885"></a>00885     }
<a name="l00886"></a>00886 
<a name="l00896"></a>00896     <span class="keyword">public</span> <span class="keyword">static</span> function activeDataDropDownList( $model, $sAttribute, &amp;$htmlOptions = <a class="code" href="admin_8php.html#a2394bd91cde70158acb50a4a7f860ab5">array</a>(), $iDefaultUID = 0 )
<a name="l00897"></a>00897     {
<a name="l00898"></a>00898         <span class="keywordflow">if</span> ( null != ( $_sModel = PS::o( $htmlOptions, <span class="stringliteral">&#39;dataModel&#39;</span>, null, <span class="keyword">true</span> ) ) )
<a name="l00899"></a>00899         {
<a name="l00900"></a>00900             $_oModel = <span class="keyword">new</span> $_sModel;
<a name="l00901"></a>00901 
<a name="l00902"></a>00902             $_sId = PS::o( $htmlOptions, <span class="stringliteral">&#39;dataId&#39;</span>, <span class="stringliteral">&#39;id&#39;</span>, <span class="keyword">true</span> );
<a name="l00903"></a>00903             $_sName = PS::o( $htmlOptions, <span class="stringliteral">&#39;dataName&#39;</span>, null, <span class="keyword">true</span> );
<a name="l00904"></a>00904             $_condition = PS::o( $htmlOptions, <span class="stringliteral">&#39;dataCondition&#39;</span>, null, <span class="keyword">true</span> );
<a name="l00905"></a>00905             $_order = PS::o( $htmlOptions, <span class="stringliteral">&#39;dataOrder&#39;</span>, null, <span class="keyword">true</span> );
<a name="l00906"></a>00906 
<a name="l00907"></a>00907             <span class="keywordflow">if</span> ( $_sId &amp;&amp; $_sName )
<a name="l00908"></a>00908             {
<a name="l00909"></a>00909                 $_arOptions = self::listData( $_oModel-&gt;findAll( <a class="code" href="admin_8php.html#a2394bd91cde70158acb50a4a7f860ab5">array</a>( <span class="stringliteral">&#39;select&#39;</span> =&gt; $_sId . <span class="stringliteral">&#39;, &#39;</span> . $_sName, <span class="stringliteral">&#39;order&#39;</span> =&gt; PS::nvl( $_order, $_sName ), <span class="stringliteral">&#39;condition&#39;</span> =&gt; $_condition ) ), $_sId, $_sName );
<a name="l00910"></a>00910 
<a name="l00911"></a>00911                 <span class="keywordflow">if</span> ( isset( $htmlOptions[ <span class="stringliteral">&#39;multiple&#39;</span> ] ) )
<a name="l00912"></a>00912                 {
<a name="l00913"></a>00913                     <span class="keywordflow">if</span> ( substr( $htmlOptions[ <span class="stringliteral">&#39;name&#39;</span> ], -2 ) !== <span class="stringliteral">&#39;[]&#39;</span> )
<a name="l00914"></a>00914                         $htmlOptions[ <span class="stringliteral">&#39;name&#39;</span> ] .= <span class="stringliteral">&#39;[]&#39;</span>;
<a name="l00915"></a>00915                 }
<a name="l00916"></a>00916 
<a name="l00917"></a>00917                 <span class="keywordflow">return</span> self::activeDropDownList( $model, $sAttribute, $_arOptions, $htmlOptions );
<a name="l00918"></a>00918             }
<a name="l00919"></a>00919         }
<a name="l00920"></a>00920 
<a name="l00921"></a>00921         <span class="keywordflow">return</span> null;
<a name="l00922"></a>00922     }
<a name="l00923"></a>00923 
<a name="l00929"></a>00929     <span class="keyword">public</span> <span class="keyword">static</span> function googleAnalytics( $sId )
<a name="l00930"></a>00930     {
<a name="l00931"></a>00931         echo&lt;&lt;&lt;<a class="code" href="gii_2model_2templates_2default_2model_8php.html#a41b069b7c63debb335b91e1dcda99046">HTML</a>
<a name="l00932"></a>00932 &lt;script type=<span class="stringliteral">&quot;text/javascript&quot;</span>&gt;
<a name="l00933"></a>00933 var gaJsHost = ((<span class="stringliteral">&quot;https:&quot;</span> == document.location.protocol) ? <span class="stringliteral">&quot;https://ssl.&quot;</span> : <span class="stringliteral">&quot;http://www.&quot;</span>);
<a name="l00934"></a>00934 document.write(unescape(<span class="stringliteral">&quot;%3Cscript src=&#39;&quot;</span> + gaJsHost + <span class="stringliteral">&quot;google-analytics.com/ga.js&#39; type=&#39;text/javascript&#39;%3E%3C/script%3E&quot;</span>));
<a name="l00935"></a>00935 &lt;/script&gt;
<a name="l00936"></a>00936 &lt;script type=<span class="stringliteral">&quot;text/javascript&quot;</span>&gt;
<a name="l00937"></a>00937 <span class="keywordflow">try</span> {
<a name="l00938"></a>00938 var pageTracker = _gat._getTracker(<span class="stringliteral">&quot;{$sId}&quot;</span>);
<a name="l00939"></a>00939 pageTracker._trackPageview();
<a name="l00940"></a>00940 } <span class="keywordflow">catch</span>(err) {}&lt;/script&gt;
<a name="l00941"></a>00941 <a class="code" href="gii_2model_2templates_2default_2model_8php.html#a41b069b7c63debb335b91e1dcda99046">HTML</a>;
<a name="l00942"></a>00942     }
<a name="l00943"></a>00943 
<a name="l00953"></a>00953     <span class="keyword">public</span> <span class="keyword">static</span> function enableInputHover( $sSelector, $arOptions = <a class="code" href="admin_8php.html#a2394bd91cde70158acb50a4a7f860ab5">array</a>() )
<a name="l00954"></a>00954     {
<a name="l00955"></a>00955         $_sTempCss = <span class="stringliteral">&#39;&#39;</span>;
<a name="l00956"></a>00956 
<a name="l00957"></a>00957         <span class="comment">//  Basic options...</span>
<a name="l00958"></a>00958         $_sOffClass = self::$m_sOffClass = PS::o( $arOptions, <span class="stringliteral">&#39;offClass&#39;</span>, <span class="stringliteral">&#39;idle&#39;</span> );
<a name="l00959"></a>00959         $_sOnClass = self::$m_sOnClass = PS::o( $arOptions, <span class="stringliteral">&#39;onClass&#39;</span>, <span class="stringliteral">&#39;activeField&#39;</span> );
<a name="l00960"></a>00960         $_sOffBGColor = PS::o( $arOptions, <span class="stringliteral">&#39;offBackgroundColor&#39;</span>, <span class="stringliteral">&#39;#ffffff&#39;</span> );
<a name="l00961"></a>00961         $_sOnBGColor = PS::o( $arOptions, <span class="stringliteral">&#39;onBackgroundColor&#39;</span>, <span class="stringliteral">&#39;#ffffff&#39;</span> );
<a name="l00962"></a>00962         $_sOnBorderColor = PS::o( $arOptions, <span class="stringliteral">&#39;onBorderColor&#39;</span>, <span class="stringliteral">&#39;#33677F&#39;</span> );
<a name="l00963"></a>00963         $_iOnBorderSize = PS::o( $arOptions, <span class="stringliteral">&#39;onBorderSize&#39;</span>, 1 );
<a name="l00964"></a>00964         $_sOffBorderColor = PS::o( $arOptions, <span class="stringliteral">&#39;offBorderColor&#39;</span>, <span class="stringliteral">&#39;#85b1de&#39;</span> );
<a name="l00965"></a>00965         $_iOffBorderSize = PS::o( $arOptions, <span class="stringliteral">&#39;offBorderSize&#39;</span>, 1 );
<a name="l00966"></a>00966 
<a name="l00967"></a>00967         <span class="comment">//  Optional background image for non-hovered field</span>
<a name="l00968"></a>00968         $_sFieldImageUrl = PS::o( $arOptions, <span class="stringliteral">&#39;fieldImageUrl&#39;</span> );
<a name="l00969"></a>00969         $_sFieldImageRepeat = PS::o( $arOptions, <span class="stringliteral">&#39;fieldImageRepeat&#39;</span>, <span class="stringliteral">&#39;repeat-x&#39;</span> );
<a name="l00970"></a>00970         $_sFieldImagePosition = PS::o( $arOptions, <span class="stringliteral">&#39;fieldImagePosition&#39;</span>, <span class="stringliteral">&#39;top&#39;</span> );
<a name="l00971"></a>00971 
<a name="l00972"></a>00972         <span class="comment">//  Set up the cool input effects...</span>
<a name="l00973"></a>00973         $_sScript =&lt;&lt;&lt;CODE
<a name="l00974"></a>00974 jQuery(<span class="stringliteral">&quot;{$sSelector}&quot;</span>).addClass(<span class="stringliteral">&quot;{$_sOffClass}&quot;</span>);jQuery(<span class="stringliteral">&quot;{$sSelector}&quot;</span>).focus(function(){jQuery(<span class="keyword">this</span>).addClass(<span class="stringliteral">&quot;{$_sOnClass}&quot;</span>).removeClass(<span class="stringliteral">&quot;{$_sOffClass}&quot;</span>);}).blur(function(){jQuery(<span class="keyword">this</span>).removeClass(<span class="stringliteral">&quot;{$_sOnClass}&quot;</span>).addClass(<span class="stringliteral">&quot;{$_sOffClass}&quot;</span>);});
<a name="l00975"></a>00975 CODE;
<a name="l00976"></a>00976 
<a name="l00977"></a>00977         <span class="comment">//  Register script</span>
<a name="l00978"></a>00978         PS::registerScript( md5( time() ), $_sScript );
<a name="l00979"></a>00979 
<a name="l00980"></a>00980         $_sCss =&lt;&lt;&lt;CODE
<a name="l00981"></a>00981 {$sSelector} input[type=<span class="stringliteral">&quot;text&quot;</span>]:focus,
<a name="l00982"></a>00982 {$sSelector} input[type=<span class="stringliteral">&quot;password&quot;</span>]:focus,
<a name="l00983"></a>00983 {$sSelector} select:focus
<a name="l00984"></a>00984 {
<a name="l00985"></a>00985     background-image: none;
<a name="l00986"></a>00986     background-color: {$_sOnBGColor};
<a name="l00987"></a>00987     border: solid {$_iOnBorderSize}px {$_sOnBorderColor};
<a name="l00988"></a>00988 }
<a name="l00989"></a>00989 
<a name="l00990"></a>00990 .{$_sOnClass}
<a name="l00991"></a>00991 {
<a name="l00992"></a>00992     background-image: none;
<a name="l00993"></a>00993     background-color: {$_sOnBGColor};
<a name="l00994"></a>00994     border: solid {$_iOffBorderSize}px {$_sOffBorderColor};
<a name="l00995"></a>00995 }
<a name="l00996"></a>00996 
<a name="l00997"></a>00997 .{$_sOffClass}
<a name="l00998"></a>00998 {
<a name="l00999"></a>00999     background-color: {$_sOffBGColor};
<a name="l01000"></a>01000     border: solid {$_iOffBorderSize}px {$_sOffBorderColor};
<a name="l01001"></a>01001 CODE;
<a name="l01002"></a>01002 
<a name="l01003"></a>01003         <span class="keywordflow">if</span> ( ! empty( $_sFieldImageUrl ) )
<a name="l01004"></a>01004         {
<a name="l01005"></a>01005             $_sTempCss =&lt;&lt;&lt;CSS
<a name="l01006"></a>01006     background-image: url(<span class="stringliteral">&#39;{$_sFieldImageUrl}&#39;</span>);
<a name="l01007"></a>01007     background-repeat: {$_sFieldImageRepeat};
<a name="l01008"></a>01008     background-position: {$_sFieldImagePosition};
<a name="l01009"></a>01009 CSS;
<a name="l01010"></a>01010         }
<a name="l01011"></a>01011 
<a name="l01012"></a>01012         <span class="comment">//  Add anything else we&#39;ve appended...</span>
<a name="l01013"></a>01013         $_sCss .= $_sTempCss . <span class="stringliteral">&quot;\n}&quot;</span>;
<a name="l01014"></a>01014 
<a name="l01015"></a>01015         <span class="comment">//  Register CSS</span>
<a name="l01016"></a>01016         PS::registerCss( md5( time() ), $_sCss );
<a name="l01017"></a>01017     }
<a name="l01018"></a>01018 
<a name="l01028"></a>01028     <span class="keyword">public</span> <span class="keyword">static</span> function dropDown( $eType, $sName, $sLabel = null, $arOptions = <a class="code" href="admin_8php.html#a2394bd91cde70158acb50a4a7f860ab5">array</a>() )
<a name="l01029"></a>01029     {
<a name="l01030"></a>01030         $_output = null;
<a name="l01031"></a>01031         $_sValue = PS::o( $arOptions, <span class="stringliteral">&#39;value&#39;</span>, null, <span class="keyword">true</span> );
<a name="l01032"></a>01032         $_labelClass = PS::o( $arOptions, <span class="stringliteral">&#39;labelClass&#39;</span>, null, <span class="keyword">true</span> );
<a name="l01033"></a>01033 
<a name="l01034"></a>01034         <span class="keywordflow">if</span> ( $sLabel ) $_output = self::label( $sLabel, $sName, $arOptions );
<a name="l01035"></a>01035 
<a name="l01036"></a>01036         <span class="keywordflow">if</span> ( null == ( $_arOptions = self::getGenericDropDownValues( $eType, $arOptions ) ) )
<a name="l01037"></a>01037             <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l01038"></a>01038 
<a name="l01039"></a>01039         <span class="keywordflow">if</span> ( ! empty( $_arOptions ) )
<a name="l01040"></a>01040         {
<a name="l01041"></a>01041             $_sInner = <span class="stringliteral">&#39;&#39;</span>;
<a name="l01042"></a>01042             $_sValue = PS::nvl( PS::o( $arOptions, <span class="stringliteral">&#39;value&#39;</span>, null, <span class="keyword">true</span> ), $_sValue );
<a name="l01043"></a>01043 
<a name="l01044"></a>01044             <span class="keywordflow">foreach</span> ( $_arOptions as $_sKey =&gt; $_sVal )
<a name="l01045"></a>01045             {
<a name="l01046"></a>01046                 <a class="code" href="themeRoller_8php.html#ad6e41e6da579a605bb979b745aa3a612">$_arOpts</a> = <a class="code" href="admin_8php.html#a2394bd91cde70158acb50a4a7f860ab5">array</a>( <span class="stringliteral">&#39;value&#39;</span> =&gt; $_sKey );
<a name="l01047"></a>01047                 <span class="keywordflow">if</span> ( $_sValue == $_sKey ) <a class="code" href="themeRoller_8php.html#ad6e41e6da579a605bb979b745aa3a612">$_arOpts</a>[ <span class="stringliteral">&#39;selected&#39;</span> ] = <span class="stringliteral">&#39;selected&#39;</span>;
<a name="l01048"></a>01048                 $_sInner .= self::tag( <span class="stringliteral">&#39;option&#39;</span>, <a class="code" href="themeRoller_8php.html#ad6e41e6da579a605bb979b745aa3a612">$_arOpts</a>, $_sVal );
<a name="l01049"></a>01049             }
<a name="l01050"></a>01050 
<a name="l01051"></a>01051             $arOptions[<span class="stringliteral">&#39;name&#39;</span>] = $sName;
<a name="l01052"></a>01052             $_output .= self::tag( <span class="stringliteral">&#39;SELECT&#39;</span>, $arOptions, $_sInner );
<a name="l01053"></a>01053         }
<a name="l01054"></a>01054 
<a name="l01055"></a>01055         <span class="keywordflow">return</span> $_output;
<a name="l01056"></a>01056     }
<a name="l01057"></a>01057 
<a name="l01069"></a>01069     <span class="keyword">public</span> <span class="keyword">static</span> function beginForm( $sAction = <span class="stringliteral">&#39;&#39;</span>, $sMethod = <span class="stringliteral">&#39;POST&#39;</span>, $htmlOptions = <a class="code" href="admin_8php.html#a2394bd91cde70158acb50a4a7f860ab5">array</a>() )
<a name="l01070"></a>01070     {
<a name="l01071"></a>01071         $_validListateOptions = PS::o( $htmlOptions, <span class="stringliteral">&#39;validateOptions&#39;</span>, <a class="code" href="admin_8php.html#a2394bd91cde70158acb50a4a7f860ab5">array</a>(), <span class="keyword">true</span> );
<a name="l01072"></a>01072 
<a name="l01073"></a>01073         <span class="keywordflow">if</span> ( PS::o( $htmlOptions, <span class="stringliteral">&#39;validate&#39;</span>, <span class="keyword">false</span>, <span class="keyword">true</span> ) )
<a name="l01074"></a>01074         {
<a name="l01075"></a>01075             self::$m_bValidating = <span class="keyword">true</span>;
<a name="l01076"></a>01076             <span class="keywordflow">if</span> ( ! isset( $_validListateOptions[<span class="stringliteral">&#39;target&#39;</span>] ) ) $_validListateOptions[<span class="stringliteral">&#39;target&#39;</span>] = self::getFormSelector( $htmlOptions );
<a name="l01077"></a>01077             <a class="code" href="classCPSjqValidate.html#a0ffc269a208148ade57c7eb608a4562a">CPSjqValidate::create</a>( null, $_validListateOptions );
<a name="l01078"></a>01078         }
<a name="l01079"></a>01079 
<a name="l01080"></a>01080         <span class="keywordflow">if</span> ( PS::o( $htmlOptions, <span class="stringliteral">&#39;selectmenu&#39;</span>, <span class="keyword">false</span>, <span class="keyword">true</span> ) )
<a name="l01081"></a>01081             <a class="code" href="classCPSjqSelectMenu.html#a0ffc269a208148ade57c7eb608a4562a">CPSjqSelectMenu::create</a>( null, <a class="code" href="admin_8php.html#a2394bd91cde70158acb50a4a7f860ab5">array</a>( <span class="stringliteral">&#39;target&#39;</span> =&gt; self::getFormSelector( $htmlOptions ) ) );
<a name="l01082"></a>01082 
<a name="l01083"></a>01083         <span class="keywordflow">if</span> ( $_sFormTitle = PS::o( $htmlOptions, <span class="stringliteral">&#39;formTitle&#39;</span>, null, <span class="keyword">true</span> ) )
<a name="l01084"></a>01084             echo PS::tag( PS::o( $htmlOptions, <span class="stringliteral">&#39;formTitleTag&#39;</span>, <span class="stringliteral">&#39;h1&#39;</span>, <span class="keyword">true</span> ), <a class="code" href="admin_8php.html#a2394bd91cde70158acb50a4a7f860ab5">array</a>(), $_sFormTitle );
<a name="l01085"></a>01085 
<a name="l01086"></a>01086         <span class="comment">//  Grab current form id</span>
<a name="l01087"></a>01087         self::$m_sCurrentFormId = PS::o( $htmlOptions, <span class="stringliteral">&#39;id&#39;</span> );
<a name="l01088"></a>01088 
<a name="l01089"></a>01089         <span class="keywordflow">return</span> parent::beginForm( $sAction, $sMethod, $htmlOptions );
<a name="l01090"></a>01090     }
<a name="l01091"></a>01091 
<a name="l01101"></a>01101     <span class="keyword">public</span> <span class="keyword">static</span> function beginFormEx( &amp;$formOptions = <a class="code" href="admin_8php.html#a2394bd91cde70158acb50a4a7f860ab5">array</a>() )
<a name="l01102"></a>01102     {
<a name="l01103"></a>01103         <span class="comment">//  Make sure we have a form id...</span>
<a name="l01104"></a>01104         <span class="keywordflow">if</span> ( ! isset( $formOptions[<span class="stringliteral">&#39;id&#39;</span>] ) ) $formOptions[<span class="stringliteral">&#39;id&#39;</span>] = <span class="stringliteral">&#39;ps-edit-form&#39;</span>;
<a name="l01105"></a>01105 
<a name="l01106"></a>01106         <span class="comment">//  Get the rest of our options</span>
<a name="l01107"></a>01107         $_uiStyle = PS::o( $formOptions, <span class="stringliteral">&#39;uiStyle&#39;</span>, self::UI_DEFAULT, <span class="keyword">true</span> );
<a name="l01108"></a>01108         $_action = PS::o( $formOptions, <span class="stringliteral">&#39;action&#39;</span>, <span class="stringliteral">&#39;&#39;</span>, <span class="keyword">true</span> );
<a name="l01109"></a>01109         $_method = PS::o( $formOptions, <span class="stringliteral">&#39;method&#39;</span>, <span class="stringliteral">&#39;POST&#39;</span>, <span class="keyword">true</span> );
<a name="l01110"></a>01110         $_setPageTitle = PS::o( $formOptions, <span class="stringliteral">&#39;setPageTitle&#39;</span>, <span class="keyword">true</span>, <span class="keyword">true</span> );
<a name="l01111"></a>01111         $_errorCss = PS::o( $formOptions, <span class="stringliteral">&#39;errorCss&#39;</span>, <span class="stringliteral">&#39;ui-state-error&#39;</span> );
<a name="l01112"></a>01112         $_formHeader = PS::o( $formOptions, <span class="stringliteral">&#39;formHeader&#39;</span>, null, <span class="keyword">true</span> );
<a name="l01113"></a>01113 
<a name="l01114"></a>01114         <span class="comment">//  Register form CSS if desired...</span>
<a name="l01115"></a>01115         PS::_rcf( PS::o( $formOptions, <span class="stringliteral">&#39;cssFiles&#39;</span>, <a class="code" href="admin_8php.html#a2394bd91cde70158acb50a4a7f860ab5">array</a>(), <span class="keyword">true</span> ) );
<a name="l01116"></a>01116 
<a name="l01117"></a>01117         <span class="comment">//  And scripts</span>
<a name="l01118"></a>01118         PS::_rsf( PS::o( $formOptions, <span class="stringliteral">&#39;scriptFiles&#39;</span>, <a class="code" href="admin_8php.html#a2394bd91cde70158acb50a4a7f860ab5">array</a>(), <span class="keyword">true</span> ) );
<a name="l01119"></a>01119 
<a name="l01120"></a>01120         <span class="comment">//  What type of form?</span>
<a name="l01121"></a>01121         <span class="keywordflow">switch</span> ( $_uiStyle )
<a name="l01122"></a>01122         {
<a name="l01123"></a>01123             <span class="keywordflow">case</span> self::UI_JQUERY:
<a name="l01124"></a>01124                 $_formContainerClass = PS::o( $formOptions, <span class="stringliteral">&#39;formContainerClass&#39;</span>, self::STD_JQUI_FORM_CONTAINER_CLASS, <span class="keyword">true</span> );
<a name="l01125"></a>01125                 $_formClass = PS::o( $formOptions, <span class="stringliteral">&#39;formClass&#39;</span>, self::STD_FORM_CLASS, <span class="keyword">true</span> );
<a name="l01126"></a>01126                 PS::$errorCss = $_errorClass = $_errorCss;
<a name="l01127"></a>01127                 <span class="keywordflow">break</span>;
<a name="l01128"></a>01128 
<a name="l01129"></a>01129             <span class="keywordflow">case</span> self::UI_DEFAULT:
<a name="l01130"></a>01130             <span class="keywordflow">default</span>:
<a name="l01131"></a>01131                 $_formContainerClass = PS::o( $formOptions, <span class="stringliteral">&#39;formContainerClass&#39;</span>, self::STD_FORM_CONTAINER_CLASS, <span class="keyword">true</span> );
<a name="l01132"></a>01132                 $_formClass = PS::o( $formOptions, <span class="stringliteral">&#39;formClass&#39;</span>, self::STD_FORM_CLASS, <span class="keyword">true</span> );
<a name="l01133"></a>01133                 PS::$errorCss = $_errorClass = <span class="stringliteral">&#39;ps-validate-error&#39;</span>;
<a name="l01134"></a>01134                 <span class="keywordflow">break</span>;
<a name="l01135"></a>01135         }
<a name="l01136"></a>01136 
<a name="l01137"></a>01137         <span class="comment">//  Set validation error class...</span>
<a name="l01138"></a>01138         <span class="keywordflow">if</span> ( PS::o( $formOptions, <span class="stringliteral">&#39;validate&#39;</span>, <span class="keyword">false</span> ) == <span class="keyword">true</span> )
<a name="l01139"></a>01139         {
<a name="l01140"></a>01140             $_validList = PS::o( $formOptions, <span class="stringliteral">&#39;validateOptions&#39;</span>, <a class="code" href="admin_8php.html#a2394bd91cde70158acb50a4a7f860ab5">array</a>(), <span class="keyword">true</span> );
<a name="l01141"></a>01141             $_validList[<span class="stringliteral">&#39;errorClass&#39;</span>] = PS::o( $_validList, <span class="stringliteral">&#39;errorClass&#39;</span>, self::$errorCss );
<a name="l01142"></a>01142             $_validList[<span class="stringliteral">&#39;ignoreTitle&#39;</span>] = PS::o( $_validList, <span class="stringliteral">&#39;ignoreTitle&#39;</span>, <span class="keyword">true</span> );
<a name="l01143"></a>01143             $formOptions[<span class="stringliteral">&#39;validateOptions&#39;</span>] = $_validList;
<a name="l01144"></a>01144         }
<a name="l01145"></a>01145 
<a name="l01146"></a>01146         <span class="comment">//  So it begins...</span>
<a name="l01147"></a>01147         $_output = null;
<a name="l01148"></a>01148 
<a name="l01149"></a>01149         <span class="comment">//  Form header info...</span>
<a name="l01150"></a>01150         <span class="keywordflow">if</span> ( $_formHeader )
<a name="l01151"></a>01151         {
<a name="l01152"></a>01152             <span class="comment">//  Page title...</span>
<a name="l01153"></a>01153             <span class="keywordflow">if</span> ( $_setPageTitle ) PS::_gc()-&gt;pageTitle = PS::_a()-&gt;name . <span class="stringliteral">&#39; : &#39;</span> . $_formHeader;
<a name="l01154"></a>01154 
<a name="l01155"></a>01155             <span class="comment">//  Form title...</span>
<a name="l01156"></a>01156             $_formHeaderTag = PS::o( $formOptions, <span class="stringliteral">&#39;formHeaderTag&#39;</span>, <span class="stringliteral">&#39;H1&#39;</span>, <span class="keyword">true</span> );
<a name="l01157"></a>01157             $_arFormHeaderOptions = PS::o( $formOptions, <span class="stringliteral">&#39;formHeaderOptions&#39;</span>, <a class="code" href="admin_8php.html#a2394bd91cde70158acb50a4a7f860ab5">array</a>(), <span class="keyword">true</span> );
<a name="l01158"></a>01158             $_output .= PS::tag( $_formHeaderTag, $_arFormHeaderOptions, $_formHeader );
<a name="l01159"></a>01159 
<a name="l01160"></a>01160             <span class="keywordflow">if</span> ( $_formHeaderContent = PS::o( $formOptions, <span class="stringliteral">&#39;formHeaderContent&#39;</span>, null, <span class="keyword">true</span> ) )
<a name="l01161"></a>01161             {
<a name="l01162"></a>01162                 $_formHeaderContentTag = PS::o( $formOptions, <span class="stringliteral">&#39;formHeaderContentTag&#39;</span>, <span class="stringliteral">&#39;DIV&#39;</span>, <span class="keyword">true</span> );
<a name="l01163"></a>01163                 $_formHeaderContentOptions = PS::o( $formOptions, <span class="stringliteral">&#39;formHeaderContentOptions&#39;</span>, <a class="code" href="admin_8php.html#a2394bd91cde70158acb50a4a7f860ab5">array</a>(), <span class="keyword">true</span> );
<a name="l01164"></a>01164                 $_output .= PS::tag( $_formHeaderContentTag, $_formHeaderContentOptions, $_formHeaderContent );
<a name="l01165"></a>01165             }
<a name="l01166"></a>01166         }
<a name="l01167"></a>01167 
<a name="l01168"></a>01168         <span class="comment">//  Build out begining of form...</span>
<a name="l01169"></a>01169         $_output .= PS::openTag( <span class="stringliteral">&#39;div&#39;</span>, <a class="code" href="admin_8php.html#a2394bd91cde70158acb50a4a7f860ab5">array</a>( <span class="stringliteral">&#39;class&#39;</span> =&gt; $_formContainerClass ) );
<a name="l01170"></a>01170         $_output .= PS::openTag( <span class="stringliteral">&#39;div&#39;</span>, <a class="code" href="admin_8php.html#a2394bd91cde70158acb50a4a7f860ab5">array</a>( <span class="stringliteral">&#39;class&#39;</span> =&gt; $_formClass ) );
<a name="l01171"></a>01171 
<a name="l01172"></a>01172         <span class="comment">//  Build the form</span>
<a name="l01173"></a>01173         self::$m_bInForm = <span class="keyword">true</span>;
<a name="l01174"></a>01174         <span class="keywordflow">return</span> $_output . self::beginForm( $_action, $_method, $formOptions );
<a name="l01175"></a>01175     }
<a name="l01176"></a>01176 
<a name="l01183"></a>01183     <span class="keyword">public</span> <span class="keyword">static</span> function endForm()
<a name="l01184"></a>01184     {
<a name="l01185"></a>01185         <span class="comment">//  Finish our container</span>
<a name="l01186"></a>01186         $_sAppend = ( self::$m_bInForm ) ? self::closeTag( <span class="stringliteral">&#39;div&#39;</span> ) . PS::closeTag( <span class="stringliteral">&#39;div&#39;</span> ) : null;
<a name="l01187"></a>01187         self::$m_bInForm = <span class="keyword">false</span>;
<a name="l01188"></a>01188 
<a name="l01189"></a>01189         <span class="keywordflow">return</span> parent::endForm() . $_sAppend;
<a name="l01190"></a>01190     }
<a name="l01191"></a>01191 
<a name="l01199"></a>01199     <span class="keyword">public</span> <span class="keyword">static</span> function textLabel( $sName, $sLabel = null, $arOptions = <a class="code" href="admin_8php.html#a2394bd91cde70158acb50a4a7f860ab5">array</a>() )
<a name="l01200"></a>01200     {
<a name="l01201"></a>01201         $_sType = PS::o( $arOptions, <span class="stringliteral">&#39;_forType&#39;</span>, <span class="stringliteral">&#39;text&#39;</span> );
<a name="l01202"></a>01202         $_bRequired = PS::o( $arOptions, <span class="stringliteral">&#39;_required&#39;</span>, <span class="keyword">false</span> );
<a name="l01203"></a>01203         $arOptions[ <span class="stringliteral">&#39;id&#39;</span> ] = $arOptions[<span class="stringliteral">&#39;name&#39;</span>] = self::getIdPrefix( <span class="stringliteral">&#39;label&#39;</span> ) . $sName;
<a name="l01204"></a>01204         $_suffixToUse = PS::o( $arOptions, <span class="stringliteral">&#39;noSuffix&#39;</span>, <span class="keyword">false</span>, <span class="keyword">true</span> ) ? <span class="stringliteral">&#39;&#39;</span> : self::$m_sLabelSuffix;
<a name="l01205"></a>01205 
<a name="l01206"></a>01206         <span class="keywordflow">return</span> self::tag( <span class="stringliteral">&#39;label&#39;</span>, $arOptions, ( ( $sLabel == null ) ? $sName : $sLabel ) . $_suffixToUse . self::getRequiredLabel() ) ;
<a name="l01207"></a>01207     }
<a name="l01208"></a>01208 
<a name="l01217"></a>01217     <span class="keyword">public</span> <span class="keyword">static</span> function submitButton( $sLabel = <span class="stringliteral">&#39;Submit&#39;</span>, $htmlOptions = <a class="code" href="admin_8php.html#a2394bd91cde70158acb50a4a7f860ab5">array</a>() )
<a name="l01218"></a>01218     {
<a name="l01219"></a>01219         $htmlOptions[<span class="stringliteral">&#39;type&#39;</span>] = <span class="stringliteral">&#39;submit&#39;</span>;
<a name="l01220"></a>01220 
<a name="l01221"></a>01221         <span class="comment">//  jQUI Button?</span>
<a name="l01222"></a>01222         <span class="keywordflow">if</span> ( PS::o( $htmlOptions, <span class="stringliteral">&#39;jqui&#39;</span>, <span class="keyword">false</span>, <span class="keyword">true</span> ) ) <span class="keywordflow">return</span> self::jquiButton( $sLabel, <span class="stringliteral">&#39;_submit_&#39;</span>, $htmlOptions );
<a name="l01223"></a>01223 
<a name="l01224"></a>01224         <span class="comment">//  Otherwise use regular button</span>
<a name="l01225"></a>01225         <span class="keywordflow">return</span> self::button( $sLabel, $htmlOptions );
<a name="l01226"></a>01226     }
<a name="l01227"></a>01227 
<a name="l01240"></a>01240     <span class="keyword">public</span> <span class="keyword">static</span> function beginButtonBar( $htmlOptions = <a class="code" href="admin_8php.html#a2394bd91cde70158acb50a4a7f860ab5">array</a>() )
<a name="l01241"></a>01241     {
<a name="l01242"></a>01242         $_bDialog = PS::o( $htmlOptions, <span class="stringliteral">&#39;jquiDialog&#39;</span>, <span class="keyword">false</span> );
<a name="l01243"></a>01243 
<a name="l01244"></a>01244         <span class="comment">//  Get orientation of buttons</span>
<a name="l01245"></a>01245         <span class="keywordflow">if</span> ( PS::o( $htmlOptions, <span class="stringliteral">&#39;barLeft&#39;</span> ) )
<a name="l01246"></a>01246             $_sDirClass = <span class="stringliteral">&#39;ps-submit-button-bar-left&#39;</span>;
<a name="l01247"></a>01247         <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( PS::o( $htmlOptions, <span class="stringliteral">&#39;barCenter&#39;</span> ) )
<a name="l01248"></a>01248             $_sDirClass = <span class="stringliteral">&#39;ps-submit-button-bar-center&#39;</span>;
<a name="l01249"></a>01249         <span class="keywordflow">else</span>
<a name="l01250"></a>01250             $_sDirClass = <span class="stringliteral">&#39;ps-submit-button-bar-right&#39;</span>;
<a name="l01251"></a>01251 
<a name="l01252"></a>01252         <a class="code" href="controller_2controller_8php.html#a7d53885feef470ba528847a3f2f1f93a">$_sClass</a> = PS::o( $htmlOptions, <span class="stringliteral">&#39;barClass&#39;</span>, $_bDialog ? <span class="stringliteral">&#39;.ui-dialog .ui-dialog-buttonpane&#39;</span> : <span class="stringliteral">&#39;ps-submit-button-bar&#39;</span> ) . <span class="charliteral">&#39; &#39;</span> . $_sDirClass;
<a name="l01253"></a>01253 
<a name="l01254"></a>01254         <span class="keywordflow">if</span> ( ! $_bNoBorder = PS::o( $htmlOptions, <span class="stringliteral">&#39;noBorder&#39;</span>, <span class="keyword">false</span> ) ) <a class="code" href="controller_2controller_8php.html#a7d53885feef470ba528847a3f2f1f93a">$_sClass</a> .= <span class="stringliteral">&#39; ps-submit-button-bar-border&#39;</span>;
<a name="l01255"></a>01255 
<a name="l01256"></a>01256         <span class="keywordflow">return</span> PS::openTag( <span class="stringliteral">&#39;div&#39;</span>, <a class="code" href="admin_8php.html#a2394bd91cde70158acb50a4a7f860ab5">array</a>( <span class="stringliteral">&#39;class&#39;</span> =&gt; <a class="code" href="controller_2controller_8php.html#a7d53885feef470ba528847a3f2f1f93a">$_sClass</a> ) );
<a name="l01257"></a>01257     }
<a name="l01258"></a>01258 
<a name="l01263"></a>01263     <span class="keyword">public</span> <span class="keyword">static</span> function endButtonBar()
<a name="l01264"></a>01264     {
<a name="l01265"></a>01265         <span class="keywordflow">return</span> PS::closeTag( <span class="stringliteral">&#39;div&#39;</span> );
<a name="l01266"></a>01266     }
<a name="l01267"></a>01267 
<a name="l01283"></a>01283     <span class="keyword">public</span> <span class="keyword">static</span> function submitButtonBar( $sLabel = <span class="stringliteral">&#39;Submit&#39;</span>, $htmlOptions = <a class="code" href="admin_8php.html#a2394bd91cde70158acb50a4a7f860ab5">array</a>() )
<a name="l01284"></a>01284     {
<a name="l01285"></a>01285         $_sLegend = null;
<a name="l01286"></a>01286 
<a name="l01287"></a>01287         <span class="comment">//  Make sure current form id is set if we have it...</span>
<a name="l01288"></a>01288         $htmlOptions[<span class="stringliteral">&#39;formId&#39;</span>] = PS::o( $htmlOptions, <span class="stringliteral">&#39;formId&#39;</span>, self::$m_sCurrentFormId );
<a name="l01289"></a>01289         <span class="keywordflow">if</span> ( self::$_showRequiredLabel &amp;&amp; trim( self::$afterRequiredLabel ) ) $_sLegend = <span class="stringliteral">&#39;&lt;span class=&quot;ps-form-legend&quot;&gt;&lt;span class=&quot;required&quot;&gt;&#39;</span> . self::getRequiredLabel() . <span class="stringliteral">&#39;&lt;/span&gt; denotes required fields&lt;/span&gt;&#39;</span>;
<a name="l01290"></a>01290 
<a name="l01291"></a>01291         <span class="keywordflow">return</span> self::beginButtonBar( $htmlOptions ) . $_sLegend . self::submitButton( $sLabel, $htmlOptions ) . self::endButtonBar();
<a name="l01292"></a>01292     }
<a name="l01293"></a>01293 
<a name="l01294"></a>01294     <span class="comment">/****</span>
<a name="l01295"></a>01295 <span class="comment">    * Output a jQuery UI icon, icon button, or plain button</span>
<a name="l01296"></a>01296 <span class="comment">    *</span>
<a name="l01297"></a>01297 <span class="comment">    * @param string $sLabel</span>
<a name="l01298"></a>01298 <span class="comment">    * @param string $sLink</span>
<a name="l01299"></a>01299 <span class="comment">    * @param array $arOptions</span>
<a name="l01300"></a>01300 <span class="comment">    */</span>
<a name="l01301"></a>01301     <span class="keyword">public</span> <span class="keyword">static</span> function jquiButton( $sLabel, $sLink, $arOptions = <a class="code" href="admin_8php.html#a2394bd91cde70158acb50a4a7f860ab5">array</a>() )
<a name="l01302"></a>01302     {
<a name="l01303"></a>01303         <span class="keyword">static</span> $_bRegistered = <span class="keyword">false</span>;
<a name="l01304"></a>01304         $_sSize = $_sIconPos = $_bIconOnly = null;
<a name="l01305"></a>01305         $_sLink = is_array( $sLink ) ? CHtml::normalizeUrl( $sLink ) : $sLink;
<a name="l01306"></a>01306         $_bSubmit = ( $_sLink == <span class="stringliteral">&#39;_submit_&#39;</span> || PS::o( $arOptions, <span class="stringliteral">&#39;submit&#39;</span>, <span class="keyword">false</span>, <span class="keyword">true</span> ) );
<a name="l01307"></a>01307 
<a name="l01308"></a>01308         $_sId = PS::o( $arOptions, <span class="stringliteral">&#39;id&#39;</span>, self::getWidgetId( self::ID_PREFIX . <span class="stringliteral">&#39;.jqbtn&#39;</span> ), <span class="keyword">true</span> );
<a name="l01309"></a>01309         $_sFormId = PS::o( $arOptions, <span class="stringliteral">&#39;formId&#39;</span>, self::$m_sCurrentFormId, <span class="keyword">true</span> );
<a name="l01310"></a>01310 
<a name="l01311"></a>01311         <span class="keywordflow">if</span> ( $_sIcon = PS::o( $arOptions, <span class="stringliteral">&#39;icon&#39;</span>, null, <span class="keyword">true</span> ) )
<a name="l01312"></a>01312         {
<a name="l01313"></a>01313             $_bIconOnly = PS::o( $arOptions, <span class="stringliteral">&#39;iconOnly&#39;</span>, <span class="keyword">false</span>, <span class="keyword">true</span> );
<a name="l01314"></a>01314             $_sIcon = <span class="stringliteral">&quot;&lt;span class=\&quot;ui-icon ui-icon-{$_sIcon}\&quot;&gt;&lt;/span&gt;&quot;</span>;
<a name="l01315"></a>01315             <span class="keywordflow">if</span> ( $sLabel &amp;&amp; ! $_bIconOnly )
<a name="l01316"></a>01316                 $_sIconPos = <span class="stringliteral">&quot;ps-button-icon-&quot;</span> . PS::o( $arOptions, <span class="stringliteral">&#39;iconPosition&#39;</span>, <span class="stringliteral">&#39;left&#39;</span>, <span class="keyword">true</span> );
<a name="l01317"></a>01317             <span class="keywordflow">else</span>
<a name="l01318"></a>01318             {
<a name="l01319"></a>01319                 $_sSize = PS::o( $arOptions, <span class="stringliteral">&#39;iconSize&#39;</span>, null, <span class="keyword">true</span> );
<a name="l01320"></a>01320                 $_sIconPos = <span class="stringliteral">&#39;ps-button-icon-solo&#39;</span> . ( ( $_sSize ) ? <span class="charliteral">&#39;-&#39;</span> . $_sSize : <span class="stringliteral">&#39;&#39;</span> );
<a name="l01321"></a>01321             }
<a name="l01322"></a>01322         }
<a name="l01323"></a>01323 
<a name="l01324"></a>01324         <span class="keywordflow">if</span> ( $_sOnClick = PS::o( $arOptions, <span class="stringliteral">&#39;click&#39;</span>, null, <span class="keyword">true</span> ) )
<a name="l01325"></a>01325             $_sOnClick = <span class="stringliteral">&#39;onClick=&quot;&#39;</span> . $_sOnClick . <span class="charliteral">&#39;&quot;&#39;</span>;
<a name="l01326"></a>01326         <span class="keywordflow">else</span>
<a name="l01327"></a>01327         {
<a name="l01328"></a>01328             <span class="keywordflow">if</span> ( $_sConfirm = PS::o( $arOptions, <span class="stringliteral">&#39;confirm&#39;</span>, null, <span class="keyword">true</span> ) )
<a name="l01329"></a>01329             {
<a name="l01330"></a>01330                 $_sHref = $_sLink;
<a name="l01331"></a>01331                 $_sForm = ( $_sFormId ) ? <span class="stringliteral">&quot;document.getElementById(&#39;{$_sFormId}&#39;)&quot;</span> : <span class="stringliteral">&#39;this.form&#39;</span>;
<a name="l01332"></a>01332                 $_sConfirm = str_replace( <span class="stringliteral">&quot;&#39;&quot;</span>, <span class="stringliteral">&quot;&#39;&#39;&quot;</span>, str_replace( <span class="charliteral">&#39;&quot;&#39;</span>, <span class="stringliteral">&#39;&quot;&quot;&#39;</span>, $_sConfirm ) );
<a name="l01333"></a>01333                 $_sOnClick = <span class="stringliteral">&quot;return confirmAction({$_sForm},&#39;{$_sConfirm}&#39;,&#39;{$_sLink}&#39;,&#39;{$_sHref}&#39;);&quot;</span>;
<a name="l01334"></a>01334                 $_sLink = <span class="charliteral">&#39;#&#39;</span>;
<a name="l01335"></a>01335 
<a name="l01336"></a>01336                 <span class="keywordflow">if</span> ( ! $_bRegistered )
<a name="l01337"></a>01337                 {
<a name="l01338"></a>01338                     $_action = $_bSubmit ? <span class="stringliteral">&#39;return oForm.submit();&#39;</span> : <span class="stringliteral">&#39;window.location.href = sHref;&#39;</span>;
<a name="l01339"></a>01339                     $_sScript = &lt;&lt;&lt;<a class="code" href="gii_2model_2templates_2default_2model_8php.html#a41b069b7c63debb335b91e1dcda99046">HTML</a>
<a name="l01340"></a>01340 function confirmAction( oForm, sMessage, sHref )
<a name="l01341"></a>01341 {
<a name="l01342"></a>01342     jConfirm( sMessage, <span class="stringliteral">&#39;Please Confirm Your Action&#39;</span>, function( bVal ) {
<a name="l01343"></a>01343         <span class="keywordflow">if</span> ( bVal )
<a name="l01344"></a>01344         {
<a name="l01345"></a>01345             {$_action}
<a name="l01346"></a>01346             <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l01347"></a>01347         }
<a name="l01348"></a>01348 
<a name="l01349"></a>01349         <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l01350"></a>01350     });
<a name="l01351"></a>01351 }
<a name="l01352"></a>01352 <a class="code" href="gii_2model_2templates_2default_2model_8php.html#a41b069b7c63debb335b91e1dcda99046">HTML</a>;
<a name="l01353"></a>01353                     <span class="comment">//  Register scripts</span>
<a name="l01354"></a>01354                     PS::_cs()-&gt;registerScript( self::getWidgetId( self::ID_PREFIX . <span class="stringliteral">&#39;.cas.&#39;</span> ), $_sScript, CClientScript::POS_END );
<a name="l01355"></a>01355                     <a class="code" href="classCPSjqUIAlerts.html#a561cda05113b81fc962133829351f41e">CPSjqUIAlerts::loadScripts</a>();
<a name="l01356"></a>01356                     $_bRegistered = <span class="keyword">true</span>;
<a name="l01357"></a>01357                 }
<a name="l01358"></a>01358             }
<a name="l01359"></a>01359             <span class="keywordflow">else</span>
<a name="l01360"></a>01360             {
<a name="l01361"></a>01361                 <span class="keywordflow">if</span> ( $_bSubmit || $_sLink == <span class="stringliteral">&#39;_submit_&#39;</span> )
<a name="l01362"></a>01362                 {
<a name="l01363"></a>01363                     $_sLink = <span class="stringliteral">&#39;&#39;</span>;
<a name="l01364"></a>01364                     $_sOnClick = <span class="stringliteral">&quot;return jQuery(&quot;</span> . ( $_sFormId ? <span class="stringliteral">&quot;&#39;#{$_sFormId}&#39;&quot;</span> : <span class="stringliteral">&quot;&#39;div.yiiForm&gt;form&#39;&quot;</span> ) . <span class="stringliteral">&quot;).submit();&quot;</span>;
<a name="l01365"></a>01365                 }
<a name="l01366"></a>01366             }
<a name="l01367"></a>01367         }
<a name="l01368"></a>01368 
<a name="l01369"></a>01369         <span class="comment">//  Set our link options</span>
<a name="l01370"></a>01370         $arOptions[<span class="stringliteral">&#39;id&#39;</span>] = $_sId;
<a name="l01371"></a>01371         $arOptions[<span class="stringliteral">&#39;title&#39;</span>] = $sLabel;
<a name="l01372"></a>01372         <a class="code" href="controller_2controller_8php.html#a7d53885feef470ba528847a3f2f1f93a">$_sClass</a> = PS::o( $arOptions, <span class="stringliteral">&#39;class&#39;</span>, null );
<a name="l01373"></a>01373         $arOptions[<span class="stringliteral">&#39;class&#39;</span>] = <span class="stringliteral">&quot;ps-button {$_sIconPos} ui-state-default ui-corner-all {$_sClass}&quot;</span>;
<a name="l01374"></a>01374 
<a name="l01375"></a>01375         <span class="comment">//  Make sure we add our onClick...</span>
<a name="l01376"></a>01376         <span class="keywordflow">if</span> ( $_sOnClick )
<a name="l01377"></a>01377         {
<a name="l01378"></a>01378             $arOptions[<span class="stringliteral">&#39;onclick&#39;</span>] = $_sOnClick;
<a name="l01379"></a>01379             $arOptions[<span class="stringliteral">&#39;encode&#39;</span>] = <span class="keyword">false</span>;
<a name="l01380"></a>01380         }
<a name="l01381"></a>01381 
<a name="l01382"></a>01382         <span class="comment">//  Generate the link</span>
<a name="l01383"></a>01383         <span class="keywordflow">return</span> self::link( ( $_sIcon . $sLabel ), $_sLink, $arOptions );
<a name="l01384"></a>01384     }
<a name="l01385"></a>01385 
<a name="l01392"></a>01392     <span class="keyword">public</span> <span class="keyword">static</span> function showDates( $model, $sCreatedColumn = <span class="stringliteral">&#39;created&#39;</span>, $sModifiedColumn = <span class="stringliteral">&#39;modified&#39;</span>, $sDateFormat = <span class="stringliteral">&#39;m/d/Y h:i:s A&#39;</span> )
<a name="l01393"></a>01393     {
<a name="l01394"></a>01394         $_output = null;
<a name="l01395"></a>01395 
<a name="l01396"></a>01396         <span class="keywordflow">if</span> ( $model-&gt;hasAttribute( $sCreatedColumn ) &amp;&amp; $model-&gt;hasAttribute( $sModifiedColumn ) )
<a name="l01397"></a>01397         {
<a name="l01398"></a>01398             $_dtCreate = strtotime( $model-&gt;$sCreatedColumn );
<a name="l01399"></a>01399             $_dtLMod = strtotime( $model-&gt;$sModifiedColumn );
<a name="l01400"></a>01400 
<a name="l01401"></a>01401             <span class="comment">//  Fix up dates</span>
<a name="l01402"></a>01402             $_dtCreate = date( $sDateFormat, $_dtCreate );
<a name="l01403"></a>01403             $_dtLMod = date( $sDateFormat, $_dtLMod );
<a name="l01404"></a>01404 
<a name="l01405"></a>01405             $_output = <span class="stringliteral">&#39;&lt;div class=&quot;ps-form-footer&quot;&gt;&#39;</span>;
<a name="l01406"></a>01406             $_output .= <span class="stringliteral">&#39;&lt;span&gt;&lt;strong&gt;Created:&lt;/strong&gt;&amp;nbsp;&#39;</span> . $_dtCreate . <span class="stringliteral">&#39;&lt;/span&gt;&#39;</span> . self::pipe( <span class="charliteral">&#39;/&#39;</span> ) . <span class="stringliteral">&#39;&lt;span&gt;&lt;strong&gt;Modified:&lt;/strong&gt;&amp;nbsp;&#39;</span> . $_dtLMod . <span class="stringliteral">&#39;&lt;/span&gt;&#39;</span>;
<a name="l01407"></a>01407             $_output .= <span class="stringliteral">&#39;&lt;/div&gt;&#39;</span>;
<a name="l01408"></a>01408         }
<a name="l01409"></a>01409 
<a name="l01410"></a>01410         <span class="keywordflow">return</span> $_output;
<a name="l01411"></a>01411     }
<a name="l01412"></a>01412 
<a name="l01423"></a>01423     <span class="keyword">public</span> <span class="keyword">static</span> function imageLink( $src, $sHref, $htmlOptions = <a class="code" href="admin_8php.html#a2394bd91cde70158acb50a4a7f860ab5">array</a>() )
<a name="l01424"></a>01424     {
<a name="l01425"></a>01425         <span class="keywordflow">if</span> ( $_sHoverImage = PS::o( $htmlOptions, <span class="stringliteral">&#39;hoverImage&#39;</span>, null, <span class="keyword">true</span> ) )
<a name="l01426"></a>01426         {
<a name="l01427"></a>01427             <span class="comment">//  Create the script</span>
<a name="l01428"></a>01428             $htmlOptions[<span class="stringliteral">&#39;id&#39;</span>] = PS::o( $htmlOptions, <span class="stringliteral">&#39;id&#39;</span>, self::ID_PREFIX . self::$count++ );
<a name="l01429"></a>01429 
<a name="l01430"></a>01430             $_sScript =&lt;&lt;&lt;<a class="code" href="gii_2model_2templates_2default_2model_8php.html#a41b069b7c63debb335b91e1dcda99046">HTML</a>
<a name="l01431"></a>01431     jQuery(<span class="stringliteral">&#39;#{$htmlOptions[&#39;</span><span class="keywordtype">id</span><span class="stringliteral">&#39;]}&#39;</span>).hover(
<a name="l01432"></a>01432         function(){
<a name="l01433"></a>01433             jQuery(<span class="keyword">this</span>).attr(<span class="stringliteral">&#39;src&#39;</span>,<span class="stringliteral">&#39;{$_sHoverImage}&#39;</span>);
<a name="l01434"></a>01434         },
<a name="l01435"></a>01435         function(){
<a name="l01436"></a>01436             jQuery(<span class="keyword">this</span>).attr(<span class="stringliteral">&#39;src&#39;</span>,<span class="stringliteral">&#39;{$src}&#39;</span>);
<a name="l01437"></a>01437         }
<a name="l01438"></a>01438     );
<a name="l01439"></a>01439 <a class="code" href="gii_2model_2templates_2default_2model_8php.html#a41b069b7c63debb335b91e1dcda99046">HTML</a>;
<a name="l01440"></a>01440             <span class="comment">//  Register the script</span>
<a name="l01441"></a>01441             PS::registerScript( <span class="stringliteral">&#39;ib#&#39;</span> . self::getWidgetId( self::ID_PREFIX ), $_sScript );
<a name="l01442"></a>01442         }
<a name="l01443"></a>01443 
<a name="l01444"></a>01444         <span class="keywordflow">return</span> self::tag( <span class="charliteral">&#39;a&#39;</span>, <a class="code" href="admin_8php.html#a2394bd91cde70158acb50a4a7f860ab5">array</a>( <span class="stringliteral">&#39;href&#39;</span> =&gt; $sHref ), self::image( $src, null, $htmlOptions ) );
<a name="l01445"></a>01445     }
<a name="l01446"></a>01446 
<a name="l01456"></a>01456     <span class="keyword">public</span> <span class="keyword">static</span> function imageButton( $src, $htmlOptions = <a class="code" href="admin_8php.html#a2394bd91cde70158acb50a4a7f860ab5">array</a>() )
<a name="l01457"></a>01457     {
<a name="l01458"></a>01458         <span class="keywordflow">if</span> ( $_sHoverImage = PS::o( $htmlOptions, <span class="stringliteral">&#39;hoverImage&#39;</span>, null, <span class="keyword">true</span> ) )
<a name="l01459"></a>01459         {
<a name="l01460"></a>01460             <span class="comment">//  Create the script</span>
<a name="l01461"></a>01461             $htmlOptions[<span class="stringliteral">&#39;id&#39;</span>] = PS::o( $htmlOptions, <span class="stringliteral">&#39;id&#39;</span>, self::ID_PREFIX . self::$count++ );
<a name="l01462"></a>01462 
<a name="l01463"></a>01463             $_sScript =&lt;&lt;&lt;<a class="code" href="gii_2model_2templates_2default_2model_8php.html#a41b069b7c63debb335b91e1dcda99046">HTML</a>
<a name="l01467"></a>01467     jQuery(<span class="stringliteral">&#39;#{$htmlOptions[&#39;</span><span class="keywordtype">id</span><span class="stringliteral">&#39;]}&#39;</span>).hover(
<a name="l01468"></a>01468         function(){
<a name="l01469"></a>01469             jQuery(<span class="keyword">this</span>).attr(<span class="stringliteral">&#39;src&#39;</span>,<span class="stringliteral">&#39;{$_sHoverImage}&#39;</span>);
<a name="l01470"></a>01470         },
<a name="l01471"></a>01471         function(){
<a name="l01472"></a>01472             jQuery(<span class="keyword">this</span>).attr(<span class="stringliteral">&#39;src&#39;</span>,<span class="stringliteral">&#39;{$src}&#39;</span>);
<a name="l01473"></a>01473         }
<a name="l01474"></a>01474     );
<a name="l01475"></a>01475 <a class="code" href="gii_2model_2templates_2default_2model_8php.html#a41b069b7c63debb335b91e1dcda99046">HTML</a>;
<a name="l01476"></a>01476             <span class="comment">//  Register the script</span>
<a name="l01477"></a>01477             PS::_rs( <span class="stringliteral">&#39;ib#&#39;</span> . self::ID_PREFIX . self::$count++, $_sScript, CClientScript::POS_READY );
<a name="l01478"></a>01478         }
<a name="l01479"></a>01479 
<a name="l01480"></a>01480         <span class="keywordflow">return</span> parent::imageButton( $src, $htmlOptions );
<a name="l01481"></a>01481     }
<a name="l01482"></a>01482 
<a name="l01490"></a>01490     <span class="keyword">protected</span> <span class="keyword">static</span> function getFormSelector( $htmlOptions = <a class="code" href="admin_8php.html#a2394bd91cde70158acb50a4a7f860ab5">array</a>(), $sDefaultId = <span class="stringliteral">&#39;div.yiiForm&gt;form&#39;</span> )
<a name="l01491"></a>01491     {
<a name="l01492"></a>01492         $_sTarget = PS::o( $htmlOptions, <span class="stringliteral">&#39;id&#39;</span>, null );
<a name="l01493"></a>01493         <span class="keywordflow">return</span> ( $_sTarget == null ) ? $sDefaultId : <span class="charliteral">&#39;#&#39;</span> . $_sTarget;
<a name="l01494"></a>01494     }
<a name="l01495"></a>01495 
<a name="l01518"></a>01518     <span class="keyword">public</span> <span class="keyword">static</span> function radioButtonList($name,$select,$data,$htmlOptions=<a class="code" href="admin_8php.html#a2394bd91cde70158acb50a4a7f860ab5">array</a>())
<a name="l01519"></a>01519     {
<a name="l01520"></a>01520         $template=isset($htmlOptions[<span class="stringliteral">&#39;template&#39;</span>])?$htmlOptions[<span class="stringliteral">&#39;template&#39;</span>]:<span class="stringliteral">&#39;{input} {label}&#39;</span>;
<a name="l01521"></a>01521         $separator=isset($htmlOptions[<span class="stringliteral">&#39;separator&#39;</span>])?$htmlOptions[<span class="stringliteral">&#39;separator&#39;</span>]:<span class="stringliteral">&quot;&lt;br/&gt;\n&quot;</span>;
<a name="l01522"></a>01522         unset($htmlOptions[<span class="stringliteral">&#39;template&#39;</span>],$htmlOptions[<span class="stringliteral">&#39;separator&#39;</span>]);
<a name="l01523"></a>01523 
<a name="l01524"></a>01524         $labelOptions=isset($htmlOptions[<span class="stringliteral">&#39;labelOptions&#39;</span>])?$htmlOptions[<span class="stringliteral">&#39;labelOptions&#39;</span>]:<a class="code" href="admin_8php.html#a2394bd91cde70158acb50a4a7f860ab5">array</a>();
<a name="l01525"></a>01525         unset($htmlOptions[<span class="stringliteral">&#39;labelOptions&#39;</span>]);
<a name="l01526"></a>01526 
<a name="l01527"></a>01527         $items=<a class="code" href="admin_8php.html#a2394bd91cde70158acb50a4a7f860ab5">array</a>();
<a name="l01528"></a>01528         $baseID=self::getIdByName($name);
<a name="l01529"></a>01529         $id=0;
<a name="l01530"></a>01530         <span class="keywordflow">foreach</span>($data as $value=&gt;<a class="code" href="gii_2model_2templates_2default_2model_8php.html#a92ae3eac75e60335c146412727e9aa46">$label</a>)
<a name="l01531"></a>01531         {
<a name="l01532"></a>01532             $checked=!strcmp($value,$select);
<a name="l01533"></a>01533             $htmlOptions[<span class="stringliteral">&#39;value&#39;</span>]=$value;
<a name="l01534"></a>01534             $htmlOptions[<span class="stringliteral">&#39;id&#39;</span>]=$baseID.<span class="charliteral">&#39;_&#39;</span>.$id++;
<a name="l01535"></a>01535             $option=self::radioButton($name,$checked,$htmlOptions);
<a name="l01536"></a>01536             <a class="code" href="gii_2model_2templates_2default_2model_8php.html#a92ae3eac75e60335c146412727e9aa46">$label</a>=self::label(<a class="code" href="gii_2model_2templates_2default_2model_8php.html#a92ae3eac75e60335c146412727e9aa46">$label</a>,$htmlOptions[<span class="stringliteral">&#39;id&#39;</span>],$labelOptions);
<a name="l01537"></a>01537             $items[]=strtr($template,<a class="code" href="admin_8php.html#a2394bd91cde70158acb50a4a7f860ab5">array</a>(<span class="stringliteral">&#39;{input}&#39;</span>=&gt;$option,<span class="stringliteral">&#39;{label}&#39;</span>=&gt;<a class="code" href="gii_2model_2templates_2default_2model_8php.html#a92ae3eac75e60335c146412727e9aa46">$label</a>));
<a name="l01538"></a>01538         }
<a name="l01539"></a>01539         <span class="keywordflow">return</span> implode($separator,$items);
<a name="l01540"></a>01540     }
<a name="l01541"></a>01541 
<a name="l01549"></a>01549     <span class="keyword">public</span> <span class="keyword">static</span> function beginFieldset( $sLegend, $arOptions = <a class="code" href="admin_8php.html#a2394bd91cde70158acb50a4a7f860ab5">array</a>() )
<a name="l01550"></a>01550     {
<a name="l01551"></a>01551         $_arLegendOptions = PS::o( $arOptions, <span class="stringliteral">&#39;legendOptions&#39;</span>, <a class="code" href="admin_8php.html#a2394bd91cde70158acb50a4a7f860ab5">array</a>(), <span class="keyword">true</span> );
<a name="l01552"></a>01552         <span class="keywordflow">return</span> self::tag( <span class="stringliteral">&#39;fieldset&#39;</span>, $arOptions, ( $sLegend ? self::tag( <span class="stringliteral">&#39;legend&#39;</span>, $_arLegendOptions, $sLegend ) : <span class="keyword">false</span> ), <span class="keyword">false</span> );
<a name="l01553"></a>01553     }
<a name="l01554"></a>01554 
<a name="l01560"></a>01560     <span class="keyword">public</span> <span class="keyword">static</span> function endFieldset()
<a name="l01561"></a>01561     {
<a name="l01562"></a>01562         <span class="keywordflow">return</span> self::closeTag( <span class="stringliteral">&#39;fieldset&#39;</span> );
<a name="l01563"></a>01563     }
<a name="l01564"></a>01564 
<a name="l01571"></a>01571     <span class="keyword">public</span> <span class="keyword">static</span> function flashHighlight( $sMsg = null )
<a name="l01572"></a>01572     {
<a name="l01573"></a>01573         <span class="keywordflow">if</span> ( $sMsg )
<a name="l01574"></a>01574         {
<a name="l01575"></a>01575             <span class="keywordflow">return</span> self::tag( <span class="stringliteral">&#39;div&#39;</span>,
<a name="l01576"></a>01576                 <a class="code" href="admin_8php.html#a2394bd91cde70158acb50a4a7f860ab5">array</a>(
<a name="l01577"></a>01577                     <span class="stringliteral">&#39;class&#39;</span> =&gt; <span class="stringliteral">&#39;ui-widget&#39;</span>
<a name="l01578"></a>01578                 ),
<a name="l01579"></a>01579                 self::tag( <span class="stringliteral">&#39;div&#39;</span>,
<a name="l01580"></a>01580                     <a class="code" href="admin_8php.html#a2394bd91cde70158acb50a4a7f860ab5">array</a>(
<a name="l01581"></a>01581                         <span class="stringliteral">&#39;class&#39;</span> =&gt; <span class="stringliteral">&#39;ui-state-highlight ui-corner-all&#39;</span>,
<a name="l01582"></a>01582                         <span class="stringliteral">&#39;style&#39;</span> =&gt; <span class="stringliteral">&#39;padding:1em; margin: 5px 0px 15px 0px;&#39;</span>
<a name="l01583"></a>01583                     ),
<a name="l01584"></a>01584                     <span class="stringliteral">&#39;&lt;p&gt;&lt;span class=&quot;ui-icon ui-icon-info&quot; style=&quot;float: left; margin-right:10px;&quot;&gt;&lt;/span&gt;&#39;</span> . $sMsg . <span class="stringliteral">&#39;&lt;/p&gt;&#39;</span>
<a name="l01585"></a>01585                 )
<a name="l01586"></a>01586             );
<a name="l01587"></a>01587         }
<a name="l01588"></a>01588     }
<a name="l01589"></a>01589 
<a name="l01594"></a>01594     <span class="keyword">public</span> <span class="keyword">static</span> function flashMessage( $sWhich = <span class="stringliteral">&#39;success&#39;</span>, $bLeft = <span class="keyword">false</span> )
<a name="l01595"></a>01595     {
<a name="l01596"></a>01596         $_sMsg = ( Yii::app()-&gt;user-&gt;hasFlash( $sWhich ) ) ? Yii::app()-&gt;user-&gt;getFlash( $sWhich ) : null;
<a name="l01597"></a>01597         $_sDiv = <span class="stringliteral">&#39;ps-flash-display&#39;</span> . ( $bLeft ? <span class="stringliteral">&#39;-left&#39;</span> : <span class="stringliteral">&#39;&#39;</span> );
<a name="l01598"></a>01598         PS::registerScript( <span class="stringliteral">&#39;ps.flash.display&#39;</span>, <span class="stringliteral">&#39;jQuery(&quot;.&#39;</span> . $_sDiv . <span class="stringliteral">&#39;&quot;).animate({opacity: 1.0}, 3000).fadeOut();&#39;</span> );
<a name="l01599"></a>01599         <span class="keywordflow">return</span> self::tag( <span class="stringliteral">&#39;div&#39;</span>, <a class="code" href="admin_8php.html#a2394bd91cde70158acb50a4a7f860ab5">array</a>( <span class="stringliteral">&#39;class&#39;</span> =&gt; $_sDiv ), $_sMsg );
<a name="l01600"></a>01600     }
<a name="l01601"></a>01601 
<a name="l01607"></a>01607     <span class="keyword">public</span> <span class="keyword">static</span> function pipe( $sInner = <span class="charliteral">&#39;|&#39;</span> )
<a name="l01608"></a>01608     {
<a name="l01609"></a>01609         <span class="keywordflow">return</span> <span class="stringliteral">&#39;&lt;span class=&quot;ps-pipe&quot;&gt;&#39;</span> . $sInner . <span class="stringliteral">&#39;&lt;/span&gt;&#39;</span>;
<a name="l01610"></a>01610     }
<a name="l01611"></a>01611 
<a name="l01622"></a>01622     <span class="keyword">public</span> <span class="keyword">static</span> function errorSummary( $model, $sHeader = null, $sFooter = null, $htmlOptions = <a class="code" href="admin_8php.html#a2394bd91cde70158acb50a4a7f860ab5">array</a>() )
<a name="l01623"></a>01623     {
<a name="l01624"></a>01624         $_content = null;
<a name="l01625"></a>01625         $_errorCount = 0;
<a name="l01626"></a>01626         $_arModel = $model;
<a name="l01627"></a>01627         $_bNoIcon = PS::o( $htmlOptions, <span class="stringliteral">&#39;noIcon&#39;</span>, <span class="keyword">false</span>, <span class="keyword">true</span> );
<a name="l01628"></a>01628         $_iconClass = PS::o( $htmlOptions, <span class="stringliteral">&#39;errorIconClass&#39;</span>, null, <span class="keyword">true</span> );
<a name="l01629"></a>01629         $_headerTag = PS::o( $htmlOptions, <span class="stringliteral">&#39;headerTag&#39;</span>, <span class="stringliteral">&#39;strong&#39;</span>, <span class="keyword">true</span> );
<a name="l01630"></a>01630         $_errorListClass = PS::o( $htmlOptions, <span class="stringliteral">&#39;errorListClass&#39;</span>, null, <span class="keyword">true</span> );
<a name="l01631"></a>01631         $_singleErrorListClass = PS::o( $htmlOptions, <span class="stringliteral">&#39;singleErrorListClass&#39;</span>, $_errorListClass, <span class="keyword">true</span> );
<a name="l01632"></a>01632 
<a name="l01633"></a>01633         self::$errorSummaryCss = <span class="stringliteral">&#39;ps-error-summary ui-state-error&#39;</span>;
<a name="l01634"></a>01634 
<a name="l01635"></a>01635         <span class="keywordflow">if</span> ( ! is_array( $_arModel ) ) $_arModel = <a class="code" href="admin_8php.html#a2394bd91cde70158acb50a4a7f860ab5">array</a>( $model );
<a name="l01636"></a>01636 
<a name="l01637"></a>01637         <span class="keywordflow">foreach</span> ( $_arModel as $_oModel )
<a name="l01638"></a>01638         {
<a name="l01639"></a>01639             $_arError = $_oModel-&gt;getErrors();
<a name="l01640"></a>01640 
<a name="l01641"></a>01641             <span class="keywordflow">foreach</span> ( $_arError as $_oError )
<a name="l01642"></a>01642             {
<a name="l01643"></a>01643                 <span class="keywordflow">foreach</span> ( $_oError as $_sError )
<a name="l01644"></a>01644                 {
<a name="l01645"></a>01645                     <span class="keywordflow">if</span> ( ! empty( $_sError ) )
<a name="l01646"></a>01646                     {
<a name="l01647"></a>01647                         $_content .= PS::tag( <span class="stringliteral">&#39;li&#39;</span>, <a class="code" href="admin_8php.html#a2394bd91cde70158acb50a4a7f860ab5">array</a>(), $_sError );
<a name="l01648"></a>01648                         $_errorCount++;
<a name="l01649"></a>01649                     }
<a name="l01650"></a>01650                 }
<a name="l01651"></a>01651             }
<a name="l01652"></a>01652         }
<a name="l01653"></a>01653 
<a name="l01654"></a>01654         <span class="keywordflow">if</span> ( $_content !== null )
<a name="l01655"></a>01655         {
<a name="l01656"></a>01656             <span class="keywordflow">if</span> ( ! $_iconClass )
<a name="l01657"></a>01657                 $_sIcon = ( ! $_bNoIcon ) ? <span class="stringliteral">&#39;&lt;span class=&quot;ui-icon ui-icon-alert&quot; style=&quot;float: left; margin-right: .3em;&quot;&gt;&lt;/span&gt;&#39;</span> : null;
<a name="l01658"></a>01658             <span class="keywordflow">else</span>
<a name="l01659"></a>01659                 $_sIcon = <span class="stringliteral">&#39;&lt;span class=&quot;&#39;</span> . $_iconClass . <span class="stringliteral">&#39;&quot; style=&quot;float: left; margin-right: .3em;&quot;&gt;&lt;/span&gt;&#39;</span>;
<a name="l01660"></a>01660 
<a name="l01661"></a>01661             <span class="keywordflow">if</span> ( null === $sHeader ) $sHeader = self::tag( $_headerTag, <a class="code" href="admin_8php.html#a2394bd91cde70158acb50a4a7f860ab5">array</a>(), Yii::t( <span class="stringliteral">&#39;yii&#39;</span>, <span class="stringliteral">&#39;Please fix the following input errors:&#39;</span> ) );
<a name="l01662"></a>01662 
<a name="l01663"></a>01663             <span class="comment">//  Different class for single errors perhaps?</span>
<a name="l01664"></a>01664             <span class="keywordflow">if</span> ( $_errorCount == 1 ) $_errorListClass = $_singleErrorListClass;
<a name="l01665"></a>01665 
<a name="l01666"></a>01666             $htmlOptions[<span class="stringliteral">&#39;class&#39;</span>] = PS::o( $htmlOptions, <span class="stringliteral">&#39;class&#39;</span>, self::$errorSummaryCss, <span class="keyword">true</span> );
<a name="l01667"></a>01667             <span class="keywordflow">return</span> self::tag( <span class="stringliteral">&#39;div&#39;</span>, $htmlOptions, $_sIcon . $sHeader . self::tag( <span class="stringliteral">&#39;ul&#39;</span>, <a class="code" href="admin_8php.html#a2394bd91cde70158acb50a4a7f860ab5">array</a>( <span class="stringliteral">&#39;class&#39;</span> =&gt; $_errorListClass ), $_content ) ) . $sFooter;
<a name="l01668"></a>01668         }
<a name="l01669"></a>01669     }
<a name="l01670"></a>01670 
<a name="l01676"></a>01676     <span class="keyword">public</span> <span class="keyword">static</span> function markdownTransform( $sText )
<a name="l01677"></a>01677     {
<a name="l01678"></a>01678         $_oParser = <span class="keyword">new</span> CMarkdownParser();
<a name="l01679"></a>01679         <span class="keywordflow">return</span> $_oParser-&gt;safeTransform( $sText );
<a name="l01680"></a>01680     }
<a name="l01681"></a>01681 
<a name="l01687"></a>01687     <span class="keyword">public</span> <span class="keyword">static</span> function addClass( $oClass, $oClassData )
<a name="l01688"></a>01688     {
<a name="l01689"></a>01689         $_arClassList = ( ! is_array( $oClass ) ) ? explode( <span class="charliteral">&#39; &#39;</span>, trim( $oClass ) ) : $oClass;
<a name="l01690"></a>01690         $_arNewClasses = PS::makeArray( $oClassData );
<a name="l01691"></a>01691 
<a name="l01692"></a>01692         <span class="keywordflow">foreach</span> ( $_arNewClasses as <a class="code" href="controller_2controller_8php.html#a7d53885feef470ba528847a3f2f1f93a">$_sClass</a> )
<a name="l01693"></a>01693             <span class="keywordflow">if</span> ( ! in_array( $_sClass, $_arClassList ) ) $_arClassList[] = $_sClass;
<a name="l01694"></a>01694 
<a name="l01695"></a>01695         <span class="keywordflow">return</span> is_array( $oClass ) ? $_arClassList : implode( <span class="charliteral">&#39; &#39;</span>, $_arClassList );
<a name="l01696"></a>01696     }
<a name="l01697"></a>01697 
<a name="l01703"></a>01703     <span class="keyword">public</span> <span class="keyword">static</span> function removeClass( $oClass, $oClassData )
<a name="l01704"></a>01704     {
<a name="l01705"></a>01705         $_arClassList = ( ! is_array( $oClass ) ) ? explode( <span class="charliteral">&#39; &#39;</span>, trim( $oClass ) ) : $oClass;
<a name="l01706"></a>01706         $_arNewClasses = PS::makeArray( $oClassData );
<a name="l01707"></a>01707         $_arClass = <a class="code" href="admin_8php.html#a2394bd91cde70158acb50a4a7f860ab5">array</a>();
<a name="l01708"></a>01708 
<a name="l01709"></a>01709         <span class="keywordflow">foreach</span> ( $_arClassList as $_sClass )
<a name="l01710"></a>01710         {
<a name="l01711"></a>01711             <span class="keywordflow">if</span> ( ! in_array( $_sClass, $_arNewClasses ) )
<a name="l01712"></a>01712                 $_arClass[] = $_sClass;
<a name="l01713"></a>01713         }
<a name="l01714"></a>01714 
<a name="l01715"></a>01715         <span class="keywordflow">return</span> is_array( $oClass ) ? $_arClass : implode( <span class="charliteral">&#39; &#39;</span>, $_arClass );
<a name="l01716"></a>01716     }
<a name="l01717"></a>01717 
<a name="l01718"></a>01718     <span class="comment">//********************************************************************************</span>
<a name="l01719"></a>01719     <span class="comment">//* Protected Methods</span>
<a name="l01720"></a>01720     <span class="comment">//********************************************************************************</span>
<a name="l01721"></a>01721 
<a name="l01728"></a>01728     <span class="keyword">protected</span> <span class="keyword">static</span> function setDropDownValues( &amp;$inputFieldType, &amp;$htmlOptions = <a class="code" href="admin_8php.html#a2394bd91cde70158acb50a4a7f860ab5">array</a>(), &amp;$listData = null, $oSelected = null )
<a name="l01729"></a>01729     {
<a name="l01730"></a>01730         $_arData = null;
<a name="l01731"></a>01731 
<a name="l01732"></a>01732         <span class="comment">//  One of our generics? Set data, type and return</span>
<a name="l01733"></a>01733         <span class="keywordflow">if</span> ( $_arData = self::getGenericDropDownValues( $inputFieldType, $htmlOptions, $listData ) )
<a name="l01734"></a>01734         {
<a name="l01735"></a>01735             $inputFieldType = self::DROPDOWN;
<a name="l01736"></a>01736             $listData = $_arData;
<a name="l01737"></a>01737         }
<a name="l01738"></a>01738         <span class="keywordflow">else</span>
<a name="l01739"></a>01739         {
<a name="l01740"></a>01740             <span class="comment">//  Generic or dropdown? Set data, type and return</span>
<a name="l01741"></a>01741             <span class="keywordflow">if</span> ( $inputFieldType == self::DD_GENERIC || $inputFieldType == self::DROPDOWN )
<a name="l01742"></a>01742             {
<a name="l01743"></a>01743                 $_arData = $listData;
<a name="l01744"></a>01744                 $inputFieldType = self::DROPDOWN;
<a name="l01745"></a>01745             }
<a name="l01746"></a>01746         }
<a name="l01747"></a>01747 
<a name="l01748"></a>01748         <span class="comment">//  Return a copy of the data array</span>
<a name="l01749"></a>01749         <span class="keywordflow">return</span> $_arData;
<a name="l01750"></a>01750     }
<a name="l01751"></a>01751 
<a name="l01758"></a>01758     <span class="keyword">protected</span> <span class="keyword">static</span> function getGenericDropDownValues( $eType, &amp;$htmlOptions = <a class="code" href="admin_8php.html#a2394bd91cde70158acb50a4a7f860ab5">array</a>(), &amp;$listData = null )
<a name="l01759"></a>01759     {
<a name="l01760"></a>01760         $_arData = null;
<a name="l01761"></a>01761 
<a name="l01762"></a>01762         <span class="keywordflow">if</span> ( is_numeric( $eType ) )
<a name="l01763"></a>01763         {
<a name="l01764"></a>01764             <span class="keywordflow">switch</span> ( $eType )
<a name="l01765"></a>01765             {
<a name="l01766"></a>01766                 <span class="keywordflow">case</span> self::DD_GENERIC:
<a name="l01767"></a>01767                     $_arData = PS::nvl( $listData, PS::o( $htmlOptions, <span class="stringliteral">&#39;data&#39;</span>, null ) );
<a name="l01768"></a>01768                     <span class="keywordflow">break</span>;
<a name="l01769"></a>01769 
<a name="l01770"></a>01770                 <span class="keywordflow">case</span> self::DD_YES_NO:
<a name="l01771"></a>01771                     $_arData = <a class="code" href="admin_8php.html#a2394bd91cde70158acb50a4a7f860ab5">array</a>( 0 =&gt; <span class="stringliteral">&#39;No&#39;</span>, 1 =&gt; <span class="stringliteral">&#39;Yes&#39;</span> );
<a name="l01772"></a>01772                     <span class="keywordflow">break</span>;
<a name="l01773"></a>01773 
<a name="l01774"></a>01774                 <span class="keywordflow">case</span> self::DD_YES_NO_ALL:
<a name="l01775"></a>01775                     $_arData = <a class="code" href="admin_8php.html#a2394bd91cde70158acb50a4a7f860ab5">array</a>( -1 =&gt; <span class="stringliteral">&#39;All&#39;</span>, 0 =&gt; <span class="stringliteral">&#39;No&#39;</span>, 1 =&gt; <span class="stringliteral">&#39;Yes&#39;</span> );
<a name="l01776"></a>01776                     <span class="keywordflow">break</span>;
<a name="l01777"></a>01777 
<a name="l01778"></a>01778                 <span class="keywordflow">case</span> self::DD_US_STATES:
<a name="l01779"></a>01779                     $_arData = require( <span class="stringliteral">&#39;static/us_state_array.php&#39;</span> );
<a name="l01780"></a>01780                     <span class="keywordflow">break</span>;
<a name="l01781"></a>01781 
<a name="l01782"></a>01782                 <span class="keywordflow">case</span> self::DD_MONTH_NUMBERS:
<a name="l01783"></a>01783                     <span class="keywordflow">if</span> ( null == PS::o( $htmlOptions, <span class="stringliteral">&#39;value&#39;</span> ) ) $htmlOptions[<span class="stringliteral">&#39;value&#39;</span>] = date(<span class="charliteral">&#39;m&#39;</span>);
<a name="l01784"></a>01784                     $_arData = require( <span class="stringliteral">&#39;static/month_numbers_array.php&#39;</span> );
<a name="l01785"></a>01785                     <span class="keywordflow">break</span>;
<a name="l01786"></a>01786 
<a name="l01787"></a>01787                 <span class="keywordflow">case</span> self::DD_DAY_NUMBERS:
<a name="l01788"></a>01788                     <span class="keywordflow">if</span> ( null == PS::o( $htmlOptions, <span class="stringliteral">&#39;value&#39;</span> ) ) $htmlOptions[<span class="stringliteral">&#39;value&#39;</span>] = date(<span class="charliteral">&#39;d&#39;</span>);
<a name="l01789"></a>01789                     $_arData = require( <span class="stringliteral">&#39;static/day_numbers_array.php&#39;</span> );
<a name="l01790"></a>01790                     <span class="keywordflow">break</span>;
<a name="l01791"></a>01791 
<a name="l01792"></a>01792                 <span class="keywordflow">case</span> self::DD_MONTH_NAMES:
<a name="l01793"></a>01793                     <span class="keywordflow">if</span> ( null == PS::o( $htmlOptions, <span class="stringliteral">&#39;value&#39;</span> ) ) $htmlOptions[<span class="stringliteral">&#39;value&#39;</span>] = date(<span class="charliteral">&#39;m&#39;</span>);
<a name="l01794"></a>01794                     $_arData = require( <span class="stringliteral">&#39;static/month_names_array.php&#39;</span> );
<a name="l01795"></a>01795                     <span class="keywordflow">break</span>;
<a name="l01796"></a>01796 
<a name="l01797"></a>01797                 <span class="keywordflow">case</span> self::DD_YEARS:
<a name="l01798"></a>01798                     <span class="keywordflow">if</span> ( null == PS::o( $htmlOptions, <span class="stringliteral">&#39;value&#39;</span> ) ) $htmlOptions[<span class="stringliteral">&#39;value&#39;</span>] = date(<span class="charliteral">&#39;Y&#39;</span>);
<a name="l01799"></a>01799                     $_iRange = PS::o( $htmlOptions, <span class="stringliteral">&#39;range&#39;</span>, 5, <span class="keyword">true</span> );
<a name="l01800"></a>01800                     $_iRangeStart = PS::o( $htmlOptions, <span class="stringliteral">&#39;rangeStart&#39;</span>, date(<span class="charliteral">&#39;Y&#39;</span>), <span class="keyword">true</span> );
<a name="l01801"></a>01801                     $_arData = <a class="code" href="admin_8php.html#a2394bd91cde70158acb50a4a7f860ab5">array</a>();
<a name="l01802"></a>01802                     <span class="keywordflow">for</span> ( $_i = 0, $_iBaseYear = $_iRangeStart; $_i &lt; $_iRange; $_i++ ) $_arData[ ( $_iBaseYear + $_i ) ] = ( $_iBaseYear + $_i );
<a name="l01803"></a>01803                     <span class="keywordflow">break</span>;
<a name="l01804"></a>01804 
<a name="l01805"></a>01805                 <span class="keywordflow">case</span> self::DD_CC_TYPES:
<a name="l01806"></a>01806                     $_arData = require( <span class="stringliteral">&#39;static/cc_types_array.php&#39;</span> );
<a name="l01807"></a>01807                     <span class="keywordflow">break</span>;
<a name="l01808"></a>01808 
<a name="l01809"></a>01809                 <span class="keywordflow">case</span> self::DD_TIME_ZONES:
<a name="l01810"></a>01810                     $_arData = require( <span class="stringliteral">&#39;static/time_zones_array.php&#39;</span> );
<a name="l01811"></a>01811                     <span class="keywordflow">break</span>;
<a name="l01812"></a>01812 
<a name="l01813"></a>01813                 <span class="keywordflow">case</span> self::DD_DATA_LOOKUP:
<a name="l01814"></a>01814                     $_sId = PS::o( $htmlOptions, <span class="stringliteral">&#39;dataId&#39;</span>, null, <span class="keyword">true</span> );
<a name="l01815"></a>01815                     $_sName = PS::o( $htmlOptions, <span class="stringliteral">&#39;dataName&#39;</span>, null, <span class="keyword">true</span> );
<a name="l01816"></a>01816                     $_sModel = PS::o( $htmlOptions, <span class="stringliteral">&#39;dataModel&#39;</span>, null, <span class="keyword">true</span> );
<a name="l01817"></a>01817                     $_condition = PS::o( $htmlOptions, <span class="stringliteral">&#39;dataCondition&#39;</span>, null, <span class="keyword">true</span> );
<a name="l01818"></a>01818 
<a name="l01819"></a>01819                     <span class="keywordflow">if</span> ( $_sId &amp;&amp; $_sName &amp;&amp; $_sModel )
<a name="l01820"></a>01820                     {
<a name="l01821"></a>01821                         <span class="keywordflow">if</span> ( $_model = call_user_func( <a class="code" href="admin_8php.html#a2394bd91cde70158acb50a4a7f860ab5">array</a>( $_sModel, <span class="stringliteral">&#39;model&#39;</span> ) ) )
<a name="l01822"></a>01822                         {
<a name="l01823"></a>01823                             <span class="keywordflow">if</span> ( $_arModels = $_model-&gt;findAll( <a class="code" href="admin_8php.html#a2394bd91cde70158acb50a4a7f860ab5">array</a>( <span class="stringliteral">&#39;select&#39;</span> =&gt; $_sId . <span class="charliteral">&#39;,&#39;</span> . $_sName, <span class="stringliteral">&#39;condition&#39;</span> =&gt; $_condition ) ) )
<a name="l01824"></a>01824                             {
<a name="l01825"></a>01825                                 <span class="keywordflow">foreach</span> ( $_arModel as $_oModel )
<a name="l01826"></a>01826                                     $_ardata[ $_oModel-&gt;getAttribute( $_sId ) ] = $_oModel-&gt;getAttribute( $_sName );
<a name="l01827"></a>01827                             }
<a name="l01828"></a>01828                         }
<a name="l01829"></a>01829                     }
<a name="l01830"></a>01830                     <span class="keywordflow">break</span>;
<a name="l01831"></a>01831 
<a name="l01832"></a>01832                 <span class="keywordflow">case</span> self::DD_JQUI_THEMES:
<a name="l01833"></a>01833                     $_arData = <a class="code" href="classCPSjqUIWrapper.html#aad3fae32ed41de6a64288d3c0a01b56d">CPSjqUIWrapper::getValidThemes</a>();
<a name="l01834"></a>01834                     <span class="keywordflow">break</span>;
<a name="l01835"></a>01835             }
<a name="l01836"></a>01836         }
<a name="l01837"></a>01837 
<a name="l01838"></a>01838         <span class="keywordflow">return</span> $_arData;
<a name="l01839"></a>01839     }
<a name="l01840"></a>01840 
<a name="l01846"></a>01846     <span class="keyword">public</span> <span class="keyword">static</span> function getExternalLibraryUrl()
<a name="l01847"></a>01847     {
<a name="l01848"></a>01848         $_path = str_replace( PS::_gbu(), <span class="stringliteral">&#39;&#39;</span>, Yii::app()-&gt;getAssetManager()-&gt;getPublishedUrl( Yii::getPathOfAlias( <span class="stringliteral">&#39;pogostick.external&#39;</span> ), <span class="keyword">true</span> ) );
<a name="l01849"></a>01849         <span class="keywordflow">if</span> ( defined( <span class="stringliteral">&#39;PYE_TRACE_LEVEL&#39;</span> ) &amp;&amp; PYE_TRACE_LEVEL &gt; 3 )
<a name="l01850"></a>01850             <a class="code" href="classCPSLog.html#ab8a624f93a0bfc699dd00c01af886955">CPSLog::trace</a>( __METHOD__, <span class="stringliteral">&#39;External Library URL: &#39;</span> . $_path );
<a name="l01851"></a>01851         <span class="keywordflow">return</span> $_path;
<a name="l01852"></a>01852     }
<a name="l01853"></a>01853 
<a name="l01859"></a>01859     <span class="keyword">public</span> <span class="keyword">static</span> function getExternalLibraryPath()
<a name="l01860"></a>01860     {
<a name="l01861"></a>01861         $_path = str_replace( PS::_gbp(), <span class="stringliteral">&#39;&#39;</span>, Yii::app()-&gt;getAssetManager()-&gt;getPublishedPath( Yii::getPathOfAlias( <span class="stringliteral">&#39;pogostick.external&#39;</span> ), <span class="keyword">true</span> ) );
<a name="l01862"></a>01862         <span class="keywordflow">if</span> ( defined( <span class="stringliteral">&#39;PYE_TRACE_LEVEL&#39;</span> ) &amp;&amp; PYE_TRACE_LEVEL &gt; 3 )
<a name="l01863"></a>01863             <a class="code" href="classCPSLog.html#ab8a624f93a0bfc699dd00c01af886955">CPSLog::trace</a>( __METHOD__, <span class="stringliteral">&#39;External Library Path: &#39;</span> . $_path );
<a name="l01864"></a>01864         <span class="keywordflow">return</span> $_path;
<a name="l01865"></a>01865     }
<a name="l01866"></a>01866 
<a name="l01882"></a>01882     <span class="keyword">public</span> <span class="keyword">static</span> function activeLabelEx( $model, $attribute, $htmlOptions = <a class="code" href="admin_8php.html#a2394bd91cde70158acb50a4a7f860ab5">array</a>() )
<a name="l01883"></a>01883     {
<a name="l01884"></a>01884         $realAttribute = $attribute;
<a name="l01885"></a>01885         self::resolveName( $model, $attribute ); <span class="comment">// strip off square brackets if any</span>
<a name="l01886"></a>01886 
<a name="l01887"></a>01887         <span class="keywordflow">if</span> ( null === PS::o( $htmlOptions, <span class="stringliteral">&#39;required&#39;</span> ) ) $htmlOptions[<span class="stringliteral">&#39;required&#39;</span>] = $model-&gt;isAttributeRequired( $attribute );
<a name="l01888"></a>01888         <span class="keywordflow">return</span> self::activeLabel( $model, $realAttribute, $htmlOptions );
<a name="l01889"></a>01889     }
<a name="l01890"></a>01890 
<a name="l01896"></a>01896     <span class="keyword">public</span> <span class="keyword">static</span> function jsonFormat( $data = null )
<a name="l01897"></a>01897     {
<a name="l01898"></a>01898         $_indent = <span class="stringliteral">&#39;  &#39;</span>;
<a name="l01899"></a>01899         $_result = null;
<a name="l01900"></a>01900         $_indentLevel = 0;
<a name="l01901"></a>01901         $_inString = <span class="keyword">false</span>;
<a name="l01902"></a>01902 
<a name="l01903"></a>01903         <span class="comment">//  Is it valid?</span>
<a name="l01904"></a>01904         <span class="keywordflow">if</span> ( ! is_string( $data ) ) $data = json_decode( $data );
<a name="l01905"></a>01905 
<a name="l01906"></a>01906         <span class="keywordflow">if</span> ( empty( $data ) )
<a name="l01907"></a>01907             <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l01908"></a>01908 
<a name="l01909"></a>01909         <span class="keywordflow">for</span> ( $_i = 0, $_count = strlen( $data ); $_i &lt; $_count; $_i++ )
<a name="l01910"></a>01910         {
<a name="l01911"></a>01911             <span class="keywordflow">switch</span> ( $data[$_i] )
<a name="l01912"></a>01912             {
<a name="l01913"></a>01913                 <span class="keywordflow">case</span> <span class="charliteral">&#39;{&#39;</span>:
<a name="l01914"></a>01914                 <span class="keywordflow">case</span> <span class="charliteral">&#39;[&#39;</span>:
<a name="l01915"></a>01915                     $_result .= $data[$_i] . ( $_inString ? PHP_EOL . str_repeat( $_indent, ++$_indentLevel ) : null );
<a name="l01916"></a>01916                     <span class="keywordflow">break</span>;
<a name="l01917"></a>01917 
<a name="l01918"></a>01918                 <span class="keywordflow">case</span> <span class="charliteral">&#39;}&#39;</span>:
<a name="l01919"></a>01919                 <span class="keywordflow">case</span> <span class="charliteral">&#39;]&#39;</span>:
<a name="l01920"></a>01920                     $_result .= ( ! $_inString ? PHP_EOL . str_repeat( $_indent, $_indentLevel ) : null ) . $data[$_i];
<a name="l01921"></a>01921                     <span class="keywordflow">if</span> ( --$_indentLevel &lt; 0 ) $_indentLevel = 0;
<a name="l01922"></a>01922                     <span class="keywordflow">break</span>;
<a name="l01923"></a>01923 
<a name="l01924"></a>01924                 <span class="keywordflow">case</span> <span class="charliteral">&#39;,&#39;</span>:
<a name="l01925"></a>01925                     <span class="keywordflow">if</span> ( ! $_inString )
<a name="l01926"></a>01926                         $_result .= <span class="charliteral">&#39;,&#39;</span> . PHP_EOL . str_repeat( $_indent, $_indentLevel );
<a name="l01927"></a>01927                     <span class="keywordflow">else</span>
<a name="l01928"></a>01928                         $_result .= $data[$_i];
<a name="l01929"></a>01929                     <span class="keywordflow">break</span>;
<a name="l01930"></a>01930 
<a name="l01931"></a>01931                 <span class="keywordflow">case</span> <span class="charliteral">&#39;:&#39;</span>:
<a name="l01932"></a>01932                     <span class="keywordflow">if</span> ( ! $_inString )
<a name="l01933"></a>01933                         $_result .= <span class="stringliteral">&#39;: &#39;</span>;
<a name="l01934"></a>01934                     <span class="keywordflow">else</span>
<a name="l01935"></a>01935                         $_result .= $data[$_i];
<a name="l01936"></a>01936                     <span class="keywordflow">break</span>;
<a name="l01937"></a>01937 
<a name="l01938"></a>01938                 <span class="keywordflow">case</span> <span class="charliteral">&#39;&quot;&#39;</span>:
<a name="l01939"></a>01939                     <span class="keywordflow">if</span> ( 0 &lt; $_i &amp;&amp; <span class="charliteral">&#39;\\&#39;</span> != $data[$_i - 1] )
<a name="l01940"></a>01940                         $_inString = ! $_inString;
<a name="l01941"></a>01941 
<a name="l01942"></a>01942                 <span class="keywordflow">default</span>:
<a name="l01943"></a>01943                     $_result .= $data[$_i];
<a name="l01944"></a>01944                     <span class="keywordflow">break</span>;
<a name="l01945"></a>01945             }
<a name="l01946"></a>01946         }
<a name="l01947"></a>01947 
<a name="l01948"></a>01948         <span class="keywordflow">return</span> $_result;
<a name="l01949"></a>01949     }
<a name="l01950"></a>01950 }
</pre></div></div>
</div>
<hr class="footer"/><address class="footer"><small>Generated on Thu Mar 24 2011 20:11:38 for "The Yii Extension Library Of Doom!" by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.1 </small></address>
</body>
</html>
